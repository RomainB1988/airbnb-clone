function jI(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function FI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jd={exports:{}},Ka={},Fd={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function BI(){if(Gm)return Fe;Gm=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function I(U){return U===null||typeof U!="object"?null:(U=w&&U[w]||U["@@iterator"],typeof U=="function"?U:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,D={};function M(U,J,ie){this.props=U,this.context=J,this.refs=D,this.updater=ie||R}M.prototype.isReactComponent={},M.prototype.setState=function(U,J){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,J,"setState")},M.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function q(){}q.prototype=M.prototype;function $(U,J,ie){this.props=U,this.context=J,this.refs=D,this.updater=ie||R}var ee=$.prototype=new q;ee.constructor=$,P(ee,M.prototype),ee.isPureReactComponent=!0;var W=Array.isArray,H=Object.prototype.hasOwnProperty,Q={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function L(U,J,ie){var pe,G={},Te=null,Le=null;if(J!=null)for(pe in J.ref!==void 0&&(Le=J.ref),J.key!==void 0&&(Te=""+J.key),J)H.call(J,pe)&&!k.hasOwnProperty(pe)&&(G[pe]=J[pe]);var de=arguments.length-2;if(de===1)G.children=ie;else if(1<de){for(var Me=Array(de),me=0;me<de;me++)Me[me]=arguments[me+2];G.children=Me}if(U&&U.defaultProps)for(pe in de=U.defaultProps,de)G[pe]===void 0&&(G[pe]=de[pe]);return{$$typeof:n,type:U,key:Te,ref:Le,props:G,_owner:Q.current}}function T(U,J){return{$$typeof:n,type:U.type,key:J,ref:U.ref,props:U.props,_owner:U._owner}}function x(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function O(U){var J={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ie){return J[ie]})}var N=/\/+/g;function A(U,J){return typeof U=="object"&&U!==null&&U.key!=null?O(""+U.key):J.toString(36)}function _e(U,J,ie,pe,G){var Te=typeof U;(Te==="undefined"||Te==="boolean")&&(U=null);var Le=!1;if(U===null)Le=!0;else switch(Te){case"string":case"number":Le=!0;break;case"object":switch(U.$$typeof){case n:case e:Le=!0}}if(Le)return Le=U,G=G(Le),U=pe===""?"."+A(Le,0):pe,W(G)?(ie="",U!=null&&(ie=U.replace(N,"$&/")+"/"),_e(G,J,ie,"",function(me){return me})):G!=null&&(x(G)&&(G=T(G,ie+(!G.key||Le&&Le.key===G.key?"":(""+G.key).replace(N,"$&/")+"/")+U)),J.push(G)),1;if(Le=0,pe=pe===""?".":pe+":",W(U))for(var de=0;de<U.length;de++){Te=U[de];var Me=pe+A(Te,de);Le+=_e(Te,J,ie,Me,G)}else if(Me=I(U),typeof Me=="function")for(U=Me.call(U),de=0;!(Te=U.next()).done;)Te=Te.value,Me=pe+A(Te,de++),Le+=_e(Te,J,ie,Me,G);else if(Te==="object")throw J=String(U),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Le}function Ie(U,J,ie){if(U==null)return U;var pe=[],G=0;return _e(U,pe,"","",function(Te){return J.call(ie,Te,G++)}),pe}function Ae(U){if(U._status===-1){var J=U._result;J=J(),J.then(function(ie){(U._status===0||U._status===-1)&&(U._status=1,U._result=ie)},function(ie){(U._status===0||U._status===-1)&&(U._status=2,U._result=ie)}),U._status===-1&&(U._status=0,U._result=J)}if(U._status===1)return U._result.default;throw U._result}var Ce={current:null},te={transition:null},ce={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:te,ReactCurrentOwner:Q};function se(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:Ie,forEach:function(U,J,ie){Ie(U,function(){J.apply(this,arguments)},ie)},count:function(U){var J=0;return Ie(U,function(){J++}),J},toArray:function(U){return Ie(U,function(J){return J})||[]},only:function(U){if(!x(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Fe.Component=M,Fe.Fragment=t,Fe.Profiler=o,Fe.PureComponent=$,Fe.StrictMode=r,Fe.Suspense=f,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Fe.act=se,Fe.cloneElement=function(U,J,ie){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var pe=P({},U.props),G=U.key,Te=U.ref,Le=U._owner;if(J!=null){if(J.ref!==void 0&&(Te=J.ref,Le=Q.current),J.key!==void 0&&(G=""+J.key),U.type&&U.type.defaultProps)var de=U.type.defaultProps;for(Me in J)H.call(J,Me)&&!k.hasOwnProperty(Me)&&(pe[Me]=J[Me]===void 0&&de!==void 0?de[Me]:J[Me])}var Me=arguments.length-2;if(Me===1)pe.children=ie;else if(1<Me){de=Array(Me);for(var me=0;me<Me;me++)de[me]=arguments[me+2];pe.children=de}return{$$typeof:n,type:U.type,key:G,ref:Te,props:pe,_owner:Le}},Fe.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Fe.createElement=L,Fe.createFactory=function(U){var J=L.bind(null,U);return J.type=U,J},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(U){return{$$typeof:d,render:U}},Fe.isValidElement=x,Fe.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:Ae}},Fe.memo=function(U,J){return{$$typeof:g,type:U,compare:J===void 0?null:J}},Fe.startTransition=function(U){var J=te.transition;te.transition={};try{U()}finally{te.transition=J}},Fe.unstable_act=se,Fe.useCallback=function(U,J){return Ce.current.useCallback(U,J)},Fe.useContext=function(U){return Ce.current.useContext(U)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(U){return Ce.current.useDeferredValue(U)},Fe.useEffect=function(U,J){return Ce.current.useEffect(U,J)},Fe.useId=function(){return Ce.current.useId()},Fe.useImperativeHandle=function(U,J,ie){return Ce.current.useImperativeHandle(U,J,ie)},Fe.useInsertionEffect=function(U,J){return Ce.current.useInsertionEffect(U,J)},Fe.useLayoutEffect=function(U,J){return Ce.current.useLayoutEffect(U,J)},Fe.useMemo=function(U,J){return Ce.current.useMemo(U,J)},Fe.useReducer=function(U,J,ie){return Ce.current.useReducer(U,J,ie)},Fe.useRef=function(U){return Ce.current.useRef(U)},Fe.useState=function(U){return Ce.current.useState(U)},Fe.useSyncExternalStore=function(U,J,ie){return Ce.current.useSyncExternalStore(U,J,ie)},Fe.useTransition=function(){return Ce.current.useTransition()},Fe.version="18.3.1",Fe}var Km;function Vf(){return Km||(Km=1,Fd.exports=BI()),Fd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qm;function zI(){if(Qm)return Ka;Qm=1;var n=Vf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,g){var _,w={},I=null,R=null;g!==void 0&&(I=""+g),f.key!==void 0&&(I=""+f.key),f.ref!==void 0&&(R=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(w[_]=f[_]);if(d&&d.defaultProps)for(_ in f=d.defaultProps,f)w[_]===void 0&&(w[_]=f[_]);return{$$typeof:e,type:d,key:I,ref:R,props:w,_owner:o.current}}return Ka.Fragment=t,Ka.jsx=u,Ka.jsxs=u,Ka}var Zm;function $I(){return Zm||(Zm=1,jd.exports=zI()),jd.exports}var Z=$I(),y=Vf();const WI=FI(y),HI=jI({__proto__:null,default:WI},[y]);var Ju={},Bd={exports:{}},dn={},zd={exports:{}},$d={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm;function qI(){return Jm||(Jm=1,function(n){function e(te,ce){var se=te.length;te.push(ce);e:for(;0<se;){var U=se-1>>>1,J=te[U];if(0<o(J,ce))te[U]=ce,te[se]=J,se=U;else break e}}function t(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var ce=te[0],se=te.pop();if(se!==ce){te[0]=se;e:for(var U=0,J=te.length,ie=J>>>1;U<ie;){var pe=2*(U+1)-1,G=te[pe],Te=pe+1,Le=te[Te];if(0>o(G,se))Te<J&&0>o(Le,G)?(te[U]=Le,te[Te]=se,U=Te):(te[U]=G,te[pe]=se,U=pe);else if(Te<J&&0>o(Le,se))te[U]=Le,te[Te]=se,U=Te;else break e}}return ce}function o(te,ce){var se=te.sortIndex-ce.sortIndex;return se!==0?se:te.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],g=[],_=1,w=null,I=3,R=!1,P=!1,D=!1,M=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(te){for(var ce=t(g);ce!==null;){if(ce.callback===null)r(g);else if(ce.startTime<=te)r(g),ce.sortIndex=ce.expirationTime,e(f,ce);else break;ce=t(g)}}function W(te){if(D=!1,ee(te),!P)if(t(f)!==null)P=!0,Ae(H);else{var ce=t(g);ce!==null&&Ce(W,ce.startTime-te)}}function H(te,ce){P=!1,D&&(D=!1,q(L),L=-1),R=!0;var se=I;try{for(ee(ce),w=t(f);w!==null&&(!(w.expirationTime>ce)||te&&!O());){var U=w.callback;if(typeof U=="function"){w.callback=null,I=w.priorityLevel;var J=U(w.expirationTime<=ce);ce=n.unstable_now(),typeof J=="function"?w.callback=J:w===t(f)&&r(f),ee(ce)}else r(f);w=t(f)}if(w!==null)var ie=!0;else{var pe=t(g);pe!==null&&Ce(W,pe.startTime-ce),ie=!1}return ie}finally{w=null,I=se,R=!1}}var Q=!1,k=null,L=-1,T=5,x=-1;function O(){return!(n.unstable_now()-x<T)}function N(){if(k!==null){var te=n.unstable_now();x=te;var ce=!0;try{ce=k(!0,te)}finally{ce?A():(Q=!1,k=null)}}else Q=!1}var A;if(typeof $=="function")A=function(){$(N)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Ie=_e.port2;_e.port1.onmessage=N,A=function(){Ie.postMessage(null)}}else A=function(){M(N,0)};function Ae(te){k=te,Q||(Q=!0,A())}function Ce(te,ce){L=M(function(){te(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_continueExecution=function(){P||R||(P=!0,Ae(H))},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(te){switch(I){case 1:case 2:case 3:var ce=3;break;default:ce=I}var se=I;I=ce;try{return te()}finally{I=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var se=I;I=te;try{return ce()}finally{I=se}},n.unstable_scheduleCallback=function(te,ce,se){var U=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?U+se:U):se=U,te){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=se+J,te={id:_++,callback:ce,priorityLevel:te,startTime:se,expirationTime:J,sortIndex:-1},se>U?(te.sortIndex=se,e(g,te),t(f)===null&&te===t(g)&&(D?(q(L),L=-1):D=!0,Ce(W,se-U))):(te.sortIndex=J,e(f,te),P||R||(P=!0,Ae(H))),te},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(te){var ce=I;return function(){var se=I;I=ce;try{return te.apply(this,arguments)}finally{I=se}}}}($d)),$d}var Ym;function GI(){return Ym||(Ym=1,zd.exports=qI()),zd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm;function KI(){if(Xm)return dn;Xm=1;var n=Vf(),e=GI();function t(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(i,s){u(i,s),u(i+"Capture",s)}function u(i,s){for(o[i]=s,i=0;i<s.length;i++)r.add(s[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function I(i){return f.call(w,i)?!0:f.call(_,i)?!1:g.test(i)?w[i]=!0:(_[i]=!0,!1)}function R(i,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function P(i,s,l,h){if(s===null||typeof s>"u"||R(i,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function D(i,s,l,h,p,v,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=s,this.sanitizeURL=v,this.removeEmptyString=S}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){M[i]=new D(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];M[s]=new D(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){M[i]=new D(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){M[i]=new D(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){M[i]=new D(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){M[i]=new D(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){M[i]=new D(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){M[i]=new D(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){M[i]=new D(i,5,!1,i.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function $(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(q,$);M[s]=new D(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(q,$);M[s]=new D(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(q,$);M[s]=new D(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){M[i]=new D(i,1,!1,i.toLowerCase(),null,!1,!1)}),M.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){M[i]=new D(i,1,!1,i.toLowerCase(),null,!0,!0)});function ee(i,s,l,h){var p=M.hasOwnProperty(s)?M[s]:null;(p!==null?p.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(P(s,l,p,h)&&(l=null),h||p===null?I(s)&&(l===null?i.removeAttribute(s):i.setAttribute(s,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(s=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(s):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,s,l):i.setAttribute(s,l))))}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),Q=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),O=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),Ie=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),te=Symbol.iterator;function ce(i){return i===null||typeof i!="object"?null:(i=te&&i[te]||i["@@iterator"],typeof i=="function"?i:null)}var se=Object.assign,U;function J(i){if(U===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);U=s&&s[1]||""}return`
`+U+i}var ie=!1;function pe(i,s){if(!i||ie)return"";ie=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(K){var h=K}Reflect.construct(i,[],s)}else{try{s.call()}catch(K){h=K}i.call(s.prototype)}else{try{throw Error()}catch(K){h=K}i()}}catch(K){if(K&&h&&typeof K.stack=="string"){for(var p=K.stack.split(`
`),v=h.stack.split(`
`),S=p.length-1,b=v.length-1;1<=S&&0<=b&&p[S]!==v[b];)b--;for(;1<=S&&0<=b;S--,b--)if(p[S]!==v[b]){if(S!==1||b!==1)do if(S--,b--,0>b||p[S]!==v[b]){var V=`
`+p[S].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=S&&0<=b);break}}}finally{ie=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?J(i):""}function G(i){switch(i.tag){case 5:return J(i.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return i=pe(i.type,!1),i;case 11:return i=pe(i.type.render,!1),i;case 1:return i=pe(i.type,!0),i;default:return""}}function Te(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case Q:return"Portal";case T:return"Profiler";case L:return"StrictMode";case A:return"Suspense";case _e:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case x:return(i._context.displayName||"Context")+".Provider";case N:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ie:return s=i.displayName||null,s!==null?s:Te(i.type)||"Memo";case Ae:s=i._payload,i=i._init;try{return Te(i(s))}catch{}}return null}function Le(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(s);case 8:return s===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function de(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Me(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function me(i){var s=Me(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),h=""+i[s];if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,v=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return p.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Ue(i){i._valueTracker||(i._valueTracker=me(i))}function Rt(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return i&&(h=Me(i)?i.checked?"true":"false":i.value),i=h,i!==l?(s.setValue(i),!0):!1}function At(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function mn(i,s){var l=s.checked;return se({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function He(i,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=de(s.value!=null?s.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function di(i,s){s=s.checked,s!=null&&ee(i,"checked",s,!1)}function dr(i,s){di(i,s);var l=de(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?$n(i,s.type,l):s.hasOwnProperty("defaultValue")&&$n(i,s.type,de(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function ds(i,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,l||s===i.value||(i.value=s),i.defaultValue=s}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function $n(i,s,l){(s!=="number"||At(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var kn=Array.isArray;function rn(i,s,l,h){if(i=i.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=s.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+de(l),s=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}s!==null||i[p].disabled||(s=i[p])}s!==null&&(s.selected=!0)}}function fi(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Wn(i,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(kn(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}i._wrapperState={initialValue:de(l)}}function Ur(i,s){var l=de(s.value),h=de(s.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),s.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function pi(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function pt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?pt(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Rn,fr=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(s,l,h,p)})}:i}(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(Rn=Rn||document.createElement("div"),Rn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Rn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function Hn(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var An={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pr=["Webkit","ms","Moz","O"];Object.keys(An).forEach(function(i){pr.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),An[s]=An[i]})});function gr(i,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||An.hasOwnProperty(i)&&An[i]?(""+s).trim():s+"px"}function gi(i,s){i=i.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=gr(l,s[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var mr=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mi(i,s){if(s){if(mr[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function vr(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yr=null;function qn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var jr=null,Yt=null,vn=null;function Gn(i){if(i=Ma(i)){if(typeof jr!="function")throw Error(t(280));var s=i.stateNode;s&&(s=du(s),jr(i.stateNode,i.type,s))}}function yn(i){Yt?vn?vn.push(i):vn=[i]:Yt=i}function _r(){if(Yt){var i=Yt,s=vn;if(vn=Yt=null,Gn(i),s)for(i=0;i<s.length;i++)Gn(s[i])}}function Er(i,s){return i(s)}function wr(){}var xn=!1;function fs(i,s,l){if(xn)return i(s,l);xn=!0;try{return Er(i,s,l)}finally{xn=!1,(Yt!==null||vn!==null)&&(wr(),_r())}}function tt(i,s){var l=i.stateNode;if(l===null)return null;var h=du(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var xe=!1;if(d)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){xe=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{xe=!1}function ps(i,s,l,h,p,v,S,b,V){var K=Array.prototype.slice.call(arguments,3);try{s.apply(l,K)}catch(ae){this.onError(ae)}}var gs=!1,Qs=null,Qn=!1,fa=null,fh={onError:function(i){gs=!0,Qs=i}};function Zs(i,s,l,h,p,v,S,b,V){gs=!1,Qs=null,ps.apply(fh,arguments)}function Vl(i,s,l,h,p,v,S,b,V){if(Zs.apply(this,arguments),gs){if(gs){var K=Qs;gs=!1,Qs=null}else throw Error(t(198));Qn||(Qn=!0,fa=K)}}function Zn(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,s.flags&4098&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function ms(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function Jn(i){if(Zn(i)!==i)throw Error(t(188))}function Ul(i){var s=i.alternate;if(!s){if(s=Zn(i),s===null)throw Error(t(188));return s!==i?null:i}for(var l=i,h=s;;){var p=l.return;if(p===null)break;var v=p.alternate;if(v===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===l)return Jn(p),i;if(v===h)return Jn(p),s;v=v.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=v;else{for(var S=!1,b=p.child;b;){if(b===l){S=!0,l=p,h=v;break}if(b===h){S=!0,h=p,l=v;break}b=b.sibling}if(!S){for(b=v.child;b;){if(b===l){S=!0,l=v,h=p;break}if(b===h){S=!0,h=v,l=p;break}b=b.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:s}function pa(i){return i=Ul(i),i!==null?Js(i):null}function Js(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=Js(i);if(s!==null)return s;i=i.sibling}return null}var Ys=e.unstable_scheduleCallback,ga=e.unstable_cancelCallback,jl=e.unstable_shouldYield,ph=e.unstable_requestPaint,rt=e.unstable_now,Fl=e.unstable_getCurrentPriorityLevel,vs=e.unstable_ImmediatePriority,vi=e.unstable_UserBlockingPriority,bn=e.unstable_NormalPriority,ma=e.unstable_LowPriority,Bl=e.unstable_IdlePriority,ys=null,_n=null;function zl(i){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(ys,i,void 0,(i.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Wl,va=Math.log,$l=Math.LN2;function Wl(i){return i>>>=0,i===0?32:31-(va(i)/$l|0)|0}var Xs=64,eo=4194304;function yi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function _s(i,s){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,v=i.pingedLanes,S=l&268435455;if(S!==0){var b=S&~p;b!==0?h=yi(b):(v&=S,v!==0&&(h=yi(v)))}else S=l&~p,S!==0?h=yi(S):v!==0&&(h=yi(v));if(h===0)return 0;if(s!==0&&s!==h&&!(s&p)&&(p=h&-h,v=s&-s,p>=v||p===16&&(v&4194240)!==0))return s;if(h&4&&(h|=l&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=h;0<s;)l=31-Xt(s),p=1<<l,h|=i[l],s&=~p;return h}function gh(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fr(i,s){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,v=i.pendingLanes;0<v;){var S=31-Xt(v),b=1<<S,V=p[S];V===-1?(!(b&l)||b&h)&&(p[S]=gh(b,s)):V<=s&&(i.expiredLanes|=b),v&=~b}}function En(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Es(){var i=Xs;return Xs<<=1,!(Xs&4194240)&&(Xs=64),i}function _i(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function Ei(i,s,l){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-Xt(s),i[s]=l}function nt(i,s){var l=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-Xt(l),v=1<<p;s[p]=0,h[p]=-1,i[p]=-1,l&=~v}}function wi(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var h=31-Xt(l),p=1<<h;p&s|i[h]&s&&(i[h]|=s),l&=~p}}var qe=0;function Si(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Hl,to,ql,Gl,Kl,ya=!1,Sr=[],Vt=null,Yn=null,Xn=null,Ii=new Map,Mn=new Map,Ir=[],mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ql(i,s){switch(i){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":Ii.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mn.delete(s.pointerId)}}function sn(i,s,l,h,p,v){return i===null||i.nativeEvent!==v?(i={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[p]},s!==null&&(s=Ma(s),s!==null&&to(s)),i):(i.eventSystemFlags|=h,s=i.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),i)}function vh(i,s,l,h,p){switch(s){case"focusin":return Vt=sn(Vt,i,s,l,h,p),!0;case"dragenter":return Yn=sn(Yn,i,s,l,h,p),!0;case"mouseover":return Xn=sn(Xn,i,s,l,h,p),!0;case"pointerover":var v=p.pointerId;return Ii.set(v,sn(Ii.get(v)||null,i,s,l,h,p)),!0;case"gotpointercapture":return v=p.pointerId,Mn.set(v,sn(Mn.get(v)||null,i,s,l,h,p)),!0}return!1}function Zl(i){var s=Cs(i.target);if(s!==null){var l=Zn(s);if(l!==null){if(s=l.tag,s===13){if(s=ms(l),s!==null){i.blockedOn=s,Kl(i.priority,function(){ql(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Br(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=no(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);yr=h,l.target.dispatchEvent(h),yr=null}else return s=Ma(l),s!==null&&to(s),i.blockedOn=l,!1;s.shift()}return!0}function ws(i,s,l){Br(i)&&l.delete(s)}function Jl(){ya=!1,Vt!==null&&Br(Vt)&&(Vt=null),Yn!==null&&Br(Yn)&&(Yn=null),Xn!==null&&Br(Xn)&&(Xn=null),Ii.forEach(ws),Mn.forEach(ws)}function er(i,s){i.blockedOn===s&&(i.blockedOn=null,ya||(ya=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Jl)))}function tr(i){function s(p){return er(p,i)}if(0<Sr.length){er(Sr[0],i);for(var l=1;l<Sr.length;l++){var h=Sr[l];h.blockedOn===i&&(h.blockedOn=null)}}for(Vt!==null&&er(Vt,i),Yn!==null&&er(Yn,i),Xn!==null&&er(Xn,i),Ii.forEach(s),Mn.forEach(s),l=0;l<Ir.length;l++)h=Ir[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<Ir.length&&(l=Ir[0],l.blockedOn===null);)Zl(l),l.blockedOn===null&&Ir.shift()}var zr=W.ReactCurrentBatchConfig,Ti=!0;function ut(i,s,l,h){var p=qe,v=zr.transition;zr.transition=null;try{qe=1,_a(i,s,l,h)}finally{qe=p,zr.transition=v}}function yh(i,s,l,h){var p=qe,v=zr.transition;zr.transition=null;try{qe=4,_a(i,s,l,h)}finally{qe=p,zr.transition=v}}function _a(i,s,l,h){if(Ti){var p=no(i,s,l,h);if(p===null)Rh(i,s,h,Ss,l),Ql(i,h);else if(vh(p,i,s,l,h))h.stopPropagation();else if(Ql(i,h),s&4&&-1<mh.indexOf(i)){for(;p!==null;){var v=Ma(p);if(v!==null&&Hl(v),v=no(i,s,l,h),v===null&&Rh(i,s,h,Ss,l),v===p)break;p=v}p!==null&&h.stopPropagation()}else Rh(i,s,h,null,l)}}var Ss=null;function no(i,s,l,h){if(Ss=null,i=qn(h),i=Cs(i),i!==null)if(s=Zn(i),s===null)i=null;else if(l=s.tag,l===13){if(i=ms(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return Ss=i,null}function Ea(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fl()){case vs:return 1;case vi:return 4;case bn:case ma:return 16;case Bl:return 536870912;default:return 16}default:return 16}}var wn=null,ro=null,on=null;function wa(){if(on)return on;var i,s=ro,l=s.length,h,p="value"in wn?wn.value:wn.textContent,v=p.length;for(i=0;i<l&&s[i]===p[i];i++);var S=l-i;for(h=1;h<=S&&s[l-h]===p[v-h];h++);return on=p.slice(i,1<h?1-h:void 0)}function io(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Tr(){return!0}function Sa(){return!1}function Ut(i){function s(l,h,p,v,S){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(l=i[b],this[b]=l?l(v):v[b]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Tr:Sa,this.isPropagationStopped=Sa,this}return se(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),s}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=Ut(nr),Cr=se({},nr,{view:0,detail:0}),_h=Ut(Cr),oo,$r,Ci,Is=se({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ci&&(Ci&&i.type==="mousemove"?(oo=i.screenX-Ci.screenX,$r=i.screenY-Ci.screenY):$r=oo=0,Ci=i),oo)},movementY:function(i){return"movementY"in i?i.movementY:$r}}),ao=Ut(Is),Ia=se({},Is,{dataTransfer:0}),Yl=Ut(Ia),lo=se({},Cr,{relatedTarget:0}),uo=Ut(lo),Xl=se({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wr=Ut(Xl),eu=se({},nr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),tu=Ut(eu),nu=se({},nr,{data:0}),Ta=Ut(nu),co={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},en={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=ru[i])?!!s[i]:!1}function Lr(){return iu}var c=se({},Cr,{key:function(i){if(i.key){var s=co[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=io(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?en[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(i){return i.type==="keypress"?io(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?io(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),m=Ut(c),E=se({},Is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C=Ut(E),F=se({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),Y=Ut(F),he=se({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),et=Ut(he),It=se({},Is,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ke=Ut(It),xt=[9,13,27,32],_t=d&&"CompositionEvent"in window,On=null;d&&"documentMode"in document&&(On=document.documentMode);var Sn=d&&"TextEvent"in window&&!On,Ts=d&&(!_t||On&&8<On&&11>=On),ho=" ",Bp=!1;function zp(i,s){switch(i){case"keyup":return xt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $p(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fo=!1;function NS(i,s){switch(i){case"compositionend":return $p(s);case"keypress":return s.which!==32?null:(Bp=!0,ho);case"textInput":return i=s.data,i===ho&&Bp?null:i;default:return null}}function VS(i,s){if(fo)return i==="compositionend"||!_t&&zp(i,s)?(i=wa(),on=ro=wn=null,fo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ts&&s.locale!=="ko"?null:s.data;default:return null}}var US={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wp(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!US[i.type]:s==="textarea"}function Hp(i,s,l,h){yn(h),s=uu(s,"onChange"),0<s.length&&(l=new so("onChange","change",null,l,h),i.push({event:l,listeners:s}))}var Ca=null,La=null;function jS(i){ug(i,0)}function su(i){var s=yo(i);if(Rt(s))return i}function FS(i,s){if(i==="change")return s}var qp=!1;if(d){var Eh;if(d){var wh="oninput"in document;if(!wh){var Gp=document.createElement("div");Gp.setAttribute("oninput","return;"),wh=typeof Gp.oninput=="function"}Eh=wh}else Eh=!1;qp=Eh&&(!document.documentMode||9<document.documentMode)}function Kp(){Ca&&(Ca.detachEvent("onpropertychange",Qp),La=Ca=null)}function Qp(i){if(i.propertyName==="value"&&su(La)){var s=[];Hp(s,La,i,qn(i)),fs(jS,s)}}function BS(i,s,l){i==="focusin"?(Kp(),Ca=s,La=l,Ca.attachEvent("onpropertychange",Qp)):i==="focusout"&&Kp()}function zS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return su(La)}function $S(i,s){if(i==="click")return su(s)}function WS(i,s){if(i==="input"||i==="change")return su(s)}function HS(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var rr=typeof Object.is=="function"?Object.is:HS;function Pa(i,s){if(rr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(s,p)||!rr(i[p],s[p]))return!1}return!0}function Zp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Jp(i,s){var l=Zp(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=s&&h>=s)return{node:l,offset:s-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zp(l)}}function Yp(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Yp(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Xp(){for(var i=window,s=At();s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=At(i.document)}return s}function Sh(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function qS(i){var s=Xp(),l=i.focusedElem,h=i.selectionRange;if(s!==l&&l&&l.ownerDocument&&Yp(l.ownerDocument.documentElement,l)){if(h!==null&&Sh(l)){if(s=h.start,i=h.end,i===void 0&&(i=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(i,l.value.length);else if(i=(s=l.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,v=Math.min(h.start,p);h=h.end===void 0?v:Math.min(h.end,p),!i.extend&&v>h&&(p=h,h=v,v=p),p=Jp(l,v);var S=Jp(l,h);p&&S&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),i.removeAllRanges(),v>h?(i.addRange(s),i.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),i.addRange(s)))}}for(s=[],i=l;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)i=s[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var GS=d&&"documentMode"in document&&11>=document.documentMode,po=null,Ih=null,ka=null,Th=!1;function eg(i,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Th||po==null||po!==At(h)||(h=po,"selectionStart"in h&&Sh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ka&&Pa(ka,h)||(ka=h,h=uu(Ih,"onSelect"),0<h.length&&(s=new so("onSelect","select",null,s,l),i.push({event:s,listeners:h}),s.target=po)))}function ou(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var go={animationend:ou("Animation","AnimationEnd"),animationiteration:ou("Animation","AnimationIteration"),animationstart:ou("Animation","AnimationStart"),transitionend:ou("Transition","TransitionEnd")},Ch={},tg={};d&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function au(i){if(Ch[i])return Ch[i];if(!go[i])return i;var s=go[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in tg)return Ch[i]=s[l];return i}var ng=au("animationend"),rg=au("animationiteration"),ig=au("animationstart"),sg=au("transitionend"),og=new Map,ag="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(i,s){og.set(i,s),a(s,[i])}for(var Lh=0;Lh<ag.length;Lh++){var Ph=ag[Lh],KS=Ph.toLowerCase(),QS=Ph[0].toUpperCase()+Ph.slice(1);Li(KS,"on"+QS)}Li(ng,"onAnimationEnd"),Li(rg,"onAnimationIteration"),Li(ig,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(sg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function lg(i,s,l){var h=i.type||"unknown-event";i.currentTarget=l,Vl(h,s,void 0,i),i.currentTarget=null}function ug(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var v=void 0;if(s)for(var S=h.length-1;0<=S;S--){var b=h[S],V=b.instance,K=b.currentTarget;if(b=b.listener,V!==v&&p.isPropagationStopped())break e;lg(p,b,K),v=V}else for(S=0;S<h.length;S++){if(b=h[S],V=b.instance,K=b.currentTarget,b=b.listener,V!==v&&p.isPropagationStopped())break e;lg(p,b,K),v=V}}}if(Qn)throw i=fa,Qn=!1,fa=null,i}function st(i,s){var l=s[Dh];l===void 0&&(l=s[Dh]=new Set);var h=i+"__bubble";l.has(h)||(cg(s,i,2,!1),l.add(h))}function kh(i,s,l){var h=0;s&&(h|=4),cg(l,i,h,s)}var lu="_reactListening"+Math.random().toString(36).slice(2);function Aa(i){if(!i[lu]){i[lu]=!0,r.forEach(function(l){l!=="selectionchange"&&(ZS.has(l)||kh(l,!1,i),kh(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[lu]||(s[lu]=!0,kh("selectionchange",!1,s))}}function cg(i,s,l,h){switch(Ea(s)){case 1:var p=ut;break;case 4:p=yh;break;default:p=_a}l=p.bind(null,s,l,i),p=void 0,!xe||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(s,l,{capture:!0,passive:p}):i.addEventListener(s,l,!0):p!==void 0?i.addEventListener(s,l,{passive:p}):i.addEventListener(s,l,!1)}function Rh(i,s,l,h,p){var v=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var b=h.stateNode.containerInfo;if(b===p||b.nodeType===8&&b.parentNode===p)break;if(S===4)for(S=h.return;S!==null;){var V=S.tag;if((V===3||V===4)&&(V=S.stateNode.containerInfo,V===p||V.nodeType===8&&V.parentNode===p))return;S=S.return}for(;b!==null;){if(S=Cs(b),S===null)return;if(V=S.tag,V===5||V===6){h=v=S;continue e}b=b.parentNode}}h=h.return}fs(function(){var K=v,ae=qn(l),le=[];e:{var oe=og.get(i);if(oe!==void 0){var fe=so,Ee=i;switch(i){case"keypress":if(io(l)===0)break e;case"keydown":case"keyup":fe=m;break;case"focusin":Ee="focus",fe=uo;break;case"focusout":Ee="blur",fe=uo;break;case"beforeblur":case"afterblur":fe=uo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Yl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Y;break;case ng:case rg:case ig:fe=Wr;break;case sg:fe=et;break;case"scroll":fe=_h;break;case"wheel":fe=Ke;break;case"copy":case"cut":case"paste":fe=tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=C}var we=(s&4)!==0,mt=!we&&i==="scroll",B=we?oe!==null?oe+"Capture":null:oe;we=[];for(var j=K,z;j!==null;){z=j;var ue=z.stateNode;if(z.tag===5&&ue!==null&&(z=ue,B!==null&&(ue=tt(j,B),ue!=null&&we.push(xa(j,ue,z)))),mt)break;j=j.return}0<we.length&&(oe=new fe(oe,Ee,null,l,ae),le.push({event:oe,listeners:we}))}}if(!(s&7)){e:{if(oe=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",oe&&l!==yr&&(Ee=l.relatedTarget||l.fromElement)&&(Cs(Ee)||Ee[Hr]))break e;if((fe||oe)&&(oe=ae.window===ae?ae:(oe=ae.ownerDocument)?oe.defaultView||oe.parentWindow:window,fe?(Ee=l.relatedTarget||l.toElement,fe=K,Ee=Ee?Cs(Ee):null,Ee!==null&&(mt=Zn(Ee),Ee!==mt||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(fe=null,Ee=K),fe!==Ee)){if(we=ao,ue="onMouseLeave",B="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(we=C,ue="onPointerLeave",B="onPointerEnter",j="pointer"),mt=fe==null?oe:yo(fe),z=Ee==null?oe:yo(Ee),oe=new we(ue,j+"leave",fe,l,ae),oe.target=mt,oe.relatedTarget=z,ue=null,Cs(ae)===K&&(we=new we(B,j+"enter",Ee,l,ae),we.target=z,we.relatedTarget=mt,ue=we),mt=ue,fe&&Ee)t:{for(we=fe,B=Ee,j=0,z=we;z;z=mo(z))j++;for(z=0,ue=B;ue;ue=mo(ue))z++;for(;0<j-z;)we=mo(we),j--;for(;0<z-j;)B=mo(B),z--;for(;j--;){if(we===B||B!==null&&we===B.alternate)break t;we=mo(we),B=mo(B)}we=null}else we=null;fe!==null&&hg(le,oe,fe,we,!1),Ee!==null&&mt!==null&&hg(le,mt,Ee,we,!0)}}e:{if(oe=K?yo(K):window,fe=oe.nodeName&&oe.nodeName.toLowerCase(),fe==="select"||fe==="input"&&oe.type==="file")var Se=FS;else if(Wp(oe))if(qp)Se=WS;else{Se=zS;var ke=BS}else(fe=oe.nodeName)&&fe.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Se=$S);if(Se&&(Se=Se(i,K))){Hp(le,Se,l,ae);break e}ke&&ke(i,oe,K),i==="focusout"&&(ke=oe._wrapperState)&&ke.controlled&&oe.type==="number"&&$n(oe,"number",oe.value)}switch(ke=K?yo(K):window,i){case"focusin":(Wp(ke)||ke.contentEditable==="true")&&(po=ke,Ih=K,ka=null);break;case"focusout":ka=Ih=po=null;break;case"mousedown":Th=!0;break;case"contextmenu":case"mouseup":case"dragend":Th=!1,eg(le,l,ae);break;case"selectionchange":if(GS)break;case"keydown":case"keyup":eg(le,l,ae)}var Re;if(_t)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else fo?zp(i,l)&&(Oe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Oe="onCompositionStart");Oe&&(Ts&&l.locale!=="ko"&&(fo||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&fo&&(Re=wa()):(wn=ae,ro="value"in wn?wn.value:wn.textContent,fo=!0)),ke=uu(K,Oe),0<ke.length&&(Oe=new Ta(Oe,i,null,l,ae),le.push({event:Oe,listeners:ke}),Re?Oe.data=Re:(Re=$p(l),Re!==null&&(Oe.data=Re)))),(Re=Sn?NS(i,l):VS(i,l))&&(K=uu(K,"onBeforeInput"),0<K.length&&(ae=new Ta("onBeforeInput","beforeinput",null,l,ae),le.push({event:ae,listeners:K}),ae.data=Re))}ug(le,s)})}function xa(i,s,l){return{instance:i,listener:s,currentTarget:l}}function uu(i,s){for(var l=s+"Capture",h=[];i!==null;){var p=i,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=tt(i,l),v!=null&&h.unshift(xa(i,v,p)),v=tt(i,s),v!=null&&h.push(xa(i,v,p))),i=i.return}return h}function mo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function hg(i,s,l,h,p){for(var v=s._reactName,S=[];l!==null&&l!==h;){var b=l,V=b.alternate,K=b.stateNode;if(V!==null&&V===h)break;b.tag===5&&K!==null&&(b=K,p?(V=tt(l,v),V!=null&&S.unshift(xa(l,V,b))):p||(V=tt(l,v),V!=null&&S.push(xa(l,V,b)))),l=l.return}S.length!==0&&i.push({event:s,listeners:S})}var JS=/\r\n?/g,YS=/\u0000|\uFFFD/g;function dg(i){return(typeof i=="string"?i:""+i).replace(JS,`
`).replace(YS,"")}function cu(i,s,l){if(s=dg(s),dg(i)!==s&&l)throw Error(t(425))}function hu(){}var Ah=null,xh=null;function bh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Mh=typeof setTimeout=="function"?setTimeout:void 0,XS=typeof clearTimeout=="function"?clearTimeout:void 0,fg=typeof Promise=="function"?Promise:void 0,eI=typeof queueMicrotask=="function"?queueMicrotask:typeof fg<"u"?function(i){return fg.resolve(null).then(i).catch(tI)}:Mh;function tI(i){setTimeout(function(){throw i})}function Oh(i,s){var l=s,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),tr(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);tr(s)}function Pi(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function pg(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return i;s--}else l==="/$"&&s++}i=i.previousSibling}return null}var vo=Math.random().toString(36).slice(2),Pr="__reactFiber$"+vo,ba="__reactProps$"+vo,Hr="__reactContainer$"+vo,Dh="__reactEvents$"+vo,nI="__reactListeners$"+vo,rI="__reactHandles$"+vo;function Cs(i){var s=i[Pr];if(s)return s;for(var l=i.parentNode;l;){if(s=l[Hr]||l[Pr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=pg(i);i!==null;){if(l=i[Pr])return l;i=pg(i)}return s}i=l,l=i.parentNode}return null}function Ma(i){return i=i[Pr]||i[Hr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function yo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function du(i){return i[ba]||null}var Nh=[],_o=-1;function ki(i){return{current:i}}function ot(i){0>_o||(i.current=Nh[_o],Nh[_o]=null,_o--)}function it(i,s){_o++,Nh[_o]=i.current,i.current=s}var Ri={},Wt=ki(Ri),an=ki(!1),Ls=Ri;function Eo(i,s){var l=i.type.contextTypes;if(!l)return Ri;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in l)p[v]=s[v];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=p),p}function ln(i){return i=i.childContextTypes,i!=null}function fu(){ot(an),ot(Wt)}function gg(i,s,l){if(Wt.current!==Ri)throw Error(t(168));it(Wt,s),it(an,l)}function mg(i,s,l){var h=i.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in s))throw Error(t(108,Le(i)||"Unknown",p));return se({},l,h)}function pu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ri,Ls=Wt.current,it(Wt,i),it(an,an.current),!0}function vg(i,s,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=mg(i,s,Ls),h.__reactInternalMemoizedMergedChildContext=i,ot(an),ot(Wt),it(Wt,i)):ot(an),it(an,l)}var qr=null,gu=!1,Vh=!1;function yg(i){qr===null?qr=[i]:qr.push(i)}function iI(i){gu=!0,yg(i)}function Ai(){if(!Vh&&qr!==null){Vh=!0;var i=0,s=qe;try{var l=qr;for(qe=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}qr=null,gu=!1}catch(p){throw qr!==null&&(qr=qr.slice(i+1)),Ys(vs,Ai),p}finally{qe=s,Vh=!1}}return null}var wo=[],So=0,mu=null,vu=0,Dn=[],Nn=0,Ps=null,Gr=1,Kr="";function ks(i,s){wo[So++]=vu,wo[So++]=mu,mu=i,vu=s}function _g(i,s,l){Dn[Nn++]=Gr,Dn[Nn++]=Kr,Dn[Nn++]=Ps,Ps=i;var h=Gr;i=Kr;var p=32-Xt(h)-1;h&=~(1<<p),l+=1;var v=32-Xt(s)+p;if(30<v){var S=p-p%5;v=(h&(1<<S)-1).toString(32),h>>=S,p-=S,Gr=1<<32-Xt(s)+p|l<<p|h,Kr=v+i}else Gr=1<<v|l<<p|h,Kr=i}function Uh(i){i.return!==null&&(ks(i,1),_g(i,1,0))}function jh(i){for(;i===mu;)mu=wo[--So],wo[So]=null,vu=wo[--So],wo[So]=null;for(;i===Ps;)Ps=Dn[--Nn],Dn[Nn]=null,Kr=Dn[--Nn],Dn[Nn]=null,Gr=Dn[--Nn],Dn[Nn]=null}var In=null,Tn=null,ct=!1,ir=null;function Eg(i,s){var l=Fn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=i,s=i.deletions,s===null?(i.deletions=[l],i.flags|=16):s.push(l)}function wg(i,s){switch(i.tag){case 5:var l=i.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,In=i,Tn=Pi(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,In=i,Tn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Ps!==null?{id:Gr,overflow:Kr}:null,i.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Fn(18,null,null,0),l.stateNode=s,l.return=i,i.child=l,In=i,Tn=null,!0):!1;default:return!1}}function Fh(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Bh(i){if(ct){var s=Tn;if(s){var l=s;if(!wg(i,s)){if(Fh(i))throw Error(t(418));s=Pi(l.nextSibling);var h=In;s&&wg(i,s)?Eg(h,l):(i.flags=i.flags&-4097|2,ct=!1,In=i)}}else{if(Fh(i))throw Error(t(418));i.flags=i.flags&-4097|2,ct=!1,In=i}}}function Sg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;In=i}function yu(i){if(i!==In)return!1;if(!ct)return Sg(i),ct=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!bh(i.type,i.memoizedProps)),s&&(s=Tn)){if(Fh(i))throw Ig(),Error(t(418));for(;s;)Eg(i,s),s=Pi(s.nextSibling)}if(Sg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(s===0){Tn=Pi(i.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}i=i.nextSibling}Tn=null}}else Tn=In?Pi(i.stateNode.nextSibling):null;return!0}function Ig(){for(var i=Tn;i;)i=Pi(i.nextSibling)}function Io(){Tn=In=null,ct=!1}function zh(i){ir===null?ir=[i]:ir.push(i)}var sI=W.ReactCurrentBatchConfig;function Oa(i,s,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,v=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(S){var b=p.refs;S===null?delete b[v]:b[v]=S},s._stringRef=v,s)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function _u(i,s){throw i=Object.prototype.toString.call(s),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function Tg(i){var s=i._init;return s(i._payload)}function Cg(i){function s(B,j){if(i){var z=B.deletions;z===null?(B.deletions=[j],B.flags|=16):z.push(j)}}function l(B,j){if(!i)return null;for(;j!==null;)s(B,j),j=j.sibling;return null}function h(B,j){for(B=new Map;j!==null;)j.key!==null?B.set(j.key,j):B.set(j.index,j),j=j.sibling;return B}function p(B,j){return B=Ui(B,j),B.index=0,B.sibling=null,B}function v(B,j,z){return B.index=z,i?(z=B.alternate,z!==null?(z=z.index,z<j?(B.flags|=2,j):z):(B.flags|=2,j)):(B.flags|=1048576,j)}function S(B){return i&&B.alternate===null&&(B.flags|=2),B}function b(B,j,z,ue){return j===null||j.tag!==6?(j=Md(z,B.mode,ue),j.return=B,j):(j=p(j,z),j.return=B,j)}function V(B,j,z,ue){var Se=z.type;return Se===k?ae(B,j,z.props.children,ue,z.key):j!==null&&(j.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Ae&&Tg(Se)===j.type)?(ue=p(j,z.props),ue.ref=Oa(B,j,z),ue.return=B,ue):(ue=$u(z.type,z.key,z.props,null,B.mode,ue),ue.ref=Oa(B,j,z),ue.return=B,ue)}function K(B,j,z,ue){return j===null||j.tag!==4||j.stateNode.containerInfo!==z.containerInfo||j.stateNode.implementation!==z.implementation?(j=Od(z,B.mode,ue),j.return=B,j):(j=p(j,z.children||[]),j.return=B,j)}function ae(B,j,z,ue,Se){return j===null||j.tag!==7?(j=Ns(z,B.mode,ue,Se),j.return=B,j):(j=p(j,z),j.return=B,j)}function le(B,j,z){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Md(""+j,B.mode,z),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case H:return z=$u(j.type,j.key,j.props,null,B.mode,z),z.ref=Oa(B,null,j),z.return=B,z;case Q:return j=Od(j,B.mode,z),j.return=B,j;case Ae:var ue=j._init;return le(B,ue(j._payload),z)}if(kn(j)||ce(j))return j=Ns(j,B.mode,z,null),j.return=B,j;_u(B,j)}return null}function oe(B,j,z,ue){var Se=j!==null?j.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Se!==null?null:b(B,j,""+z,ue);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case H:return z.key===Se?V(B,j,z,ue):null;case Q:return z.key===Se?K(B,j,z,ue):null;case Ae:return Se=z._init,oe(B,j,Se(z._payload),ue)}if(kn(z)||ce(z))return Se!==null?null:ae(B,j,z,ue,null);_u(B,z)}return null}function fe(B,j,z,ue,Se){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return B=B.get(z)||null,b(j,B,""+ue,Se);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case H:return B=B.get(ue.key===null?z:ue.key)||null,V(j,B,ue,Se);case Q:return B=B.get(ue.key===null?z:ue.key)||null,K(j,B,ue,Se);case Ae:var ke=ue._init;return fe(B,j,z,ke(ue._payload),Se)}if(kn(ue)||ce(ue))return B=B.get(z)||null,ae(j,B,ue,Se,null);_u(j,ue)}return null}function Ee(B,j,z,ue){for(var Se=null,ke=null,Re=j,Oe=j=0,Ot=null;Re!==null&&Oe<z.length;Oe++){Re.index>Oe?(Ot=Re,Re=null):Ot=Re.sibling;var Je=oe(B,Re,z[Oe],ue);if(Je===null){Re===null&&(Re=Ot);break}i&&Re&&Je.alternate===null&&s(B,Re),j=v(Je,j,Oe),ke===null?Se=Je:ke.sibling=Je,ke=Je,Re=Ot}if(Oe===z.length)return l(B,Re),ct&&ks(B,Oe),Se;if(Re===null){for(;Oe<z.length;Oe++)Re=le(B,z[Oe],ue),Re!==null&&(j=v(Re,j,Oe),ke===null?Se=Re:ke.sibling=Re,ke=Re);return ct&&ks(B,Oe),Se}for(Re=h(B,Re);Oe<z.length;Oe++)Ot=fe(Re,B,Oe,z[Oe],ue),Ot!==null&&(i&&Ot.alternate!==null&&Re.delete(Ot.key===null?Oe:Ot.key),j=v(Ot,j,Oe),ke===null?Se=Ot:ke.sibling=Ot,ke=Ot);return i&&Re.forEach(function(ji){return s(B,ji)}),ct&&ks(B,Oe),Se}function we(B,j,z,ue){var Se=ce(z);if(typeof Se!="function")throw Error(t(150));if(z=Se.call(z),z==null)throw Error(t(151));for(var ke=Se=null,Re=j,Oe=j=0,Ot=null,Je=z.next();Re!==null&&!Je.done;Oe++,Je=z.next()){Re.index>Oe?(Ot=Re,Re=null):Ot=Re.sibling;var ji=oe(B,Re,Je.value,ue);if(ji===null){Re===null&&(Re=Ot);break}i&&Re&&ji.alternate===null&&s(B,Re),j=v(ji,j,Oe),ke===null?Se=ji:ke.sibling=ji,ke=ji,Re=Ot}if(Je.done)return l(B,Re),ct&&ks(B,Oe),Se;if(Re===null){for(;!Je.done;Oe++,Je=z.next())Je=le(B,Je.value,ue),Je!==null&&(j=v(Je,j,Oe),ke===null?Se=Je:ke.sibling=Je,ke=Je);return ct&&ks(B,Oe),Se}for(Re=h(B,Re);!Je.done;Oe++,Je=z.next())Je=fe(Re,B,Oe,Je.value,ue),Je!==null&&(i&&Je.alternate!==null&&Re.delete(Je.key===null?Oe:Je.key),j=v(Je,j,Oe),ke===null?Se=Je:ke.sibling=Je,ke=Je);return i&&Re.forEach(function(UI){return s(B,UI)}),ct&&ks(B,Oe),Se}function mt(B,j,z,ue){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case H:e:{for(var Se=z.key,ke=j;ke!==null;){if(ke.key===Se){if(Se=z.type,Se===k){if(ke.tag===7){l(B,ke.sibling),j=p(ke,z.props.children),j.return=B,B=j;break e}}else if(ke.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Ae&&Tg(Se)===ke.type){l(B,ke.sibling),j=p(ke,z.props),j.ref=Oa(B,ke,z),j.return=B,B=j;break e}l(B,ke);break}else s(B,ke);ke=ke.sibling}z.type===k?(j=Ns(z.props.children,B.mode,ue,z.key),j.return=B,B=j):(ue=$u(z.type,z.key,z.props,null,B.mode,ue),ue.ref=Oa(B,j,z),ue.return=B,B=ue)}return S(B);case Q:e:{for(ke=z.key;j!==null;){if(j.key===ke)if(j.tag===4&&j.stateNode.containerInfo===z.containerInfo&&j.stateNode.implementation===z.implementation){l(B,j.sibling),j=p(j,z.children||[]),j.return=B,B=j;break e}else{l(B,j);break}else s(B,j);j=j.sibling}j=Od(z,B.mode,ue),j.return=B,B=j}return S(B);case Ae:return ke=z._init,mt(B,j,ke(z._payload),ue)}if(kn(z))return Ee(B,j,z,ue);if(ce(z))return we(B,j,z,ue);_u(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,j!==null&&j.tag===6?(l(B,j.sibling),j=p(j,z),j.return=B,B=j):(l(B,j),j=Md(z,B.mode,ue),j.return=B,B=j),S(B)):l(B,j)}return mt}var To=Cg(!0),Lg=Cg(!1),Eu=ki(null),wu=null,Co=null,$h=null;function Wh(){$h=Co=wu=null}function Hh(i){var s=Eu.current;ot(Eu),i._currentValue=s}function qh(i,s,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),i===l)break;i=i.return}}function Lo(i,s){wu=i,$h=Co=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&s&&(un=!0),i.firstContext=null)}function Vn(i){var s=i._currentValue;if($h!==i)if(i={context:i,memoizedValue:s,next:null},Co===null){if(wu===null)throw Error(t(308));Co=i,wu.dependencies={lanes:0,firstContext:i}}else Co=Co.next=i;return s}var Rs=null;function Gh(i){Rs===null?Rs=[i]:Rs.push(i)}function Pg(i,s,l,h){var p=s.interleaved;return p===null?(l.next=l,Gh(s)):(l.next=p.next,p.next=l),s.interleaved=l,Qr(i,h)}function Qr(i,s){i.lanes|=s;var l=i.alternate;for(l!==null&&(l.lanes|=s),l=i,i=i.return;i!==null;)i.childLanes|=s,l=i.alternate,l!==null&&(l.childLanes|=s),l=i,i=i.return;return l.tag===3?l.stateNode:null}var xi=!1;function Kh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kg(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Zr(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function bi(i,s,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,Ze&2){var p=h.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),h.pending=s,Qr(i,l)}return p=h.interleaved,p===null?(s.next=s,Gh(h)):(s.next=p.next,p.next=s),h.interleaved=s,Qr(i,l)}function Su(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,wi(i,l)}}function Rg(i,s){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?p=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?p=v=s:v=v.next=s}else p=v=s;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}function Iu(i,s,l,h){var p=i.updateQueue;xi=!1;var v=p.firstBaseUpdate,S=p.lastBaseUpdate,b=p.shared.pending;if(b!==null){p.shared.pending=null;var V=b,K=V.next;V.next=null,S===null?v=K:S.next=K,S=V;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,b=ae.lastBaseUpdate,b!==S&&(b===null?ae.firstBaseUpdate=K:b.next=K,ae.lastBaseUpdate=V))}if(v!==null){var le=p.baseState;S=0,ae=K=V=null,b=v;do{var oe=b.lane,fe=b.eventTime;if((h&oe)===oe){ae!==null&&(ae=ae.next={eventTime:fe,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var Ee=i,we=b;switch(oe=s,fe=l,we.tag){case 1:if(Ee=we.payload,typeof Ee=="function"){le=Ee.call(fe,le,oe);break e}le=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=we.payload,oe=typeof Ee=="function"?Ee.call(fe,le,oe):Ee,oe==null)break e;le=se({},le,oe);break e;case 2:xi=!0}}b.callback!==null&&b.lane!==0&&(i.flags|=64,oe=p.effects,oe===null?p.effects=[b]:oe.push(b))}else fe={eventTime:fe,lane:oe,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ae===null?(K=ae=fe,V=le):ae=ae.next=fe,S|=oe;if(b=b.next,b===null){if(b=p.shared.pending,b===null)break;oe=b,b=oe.next,oe.next=null,p.lastBaseUpdate=oe,p.shared.pending=null}}while(!0);if(ae===null&&(V=le),p.baseState=V,p.firstBaseUpdate=K,p.lastBaseUpdate=ae,s=p.shared.interleaved,s!==null){p=s;do S|=p.lane,p=p.next;while(p!==s)}else v===null&&(p.shared.lanes=0);bs|=S,i.lanes=S,i.memoizedState=le}}function Ag(i,s,l){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var h=i[s],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Da={},kr=ki(Da),Na=ki(Da),Va=ki(Da);function As(i){if(i===Da)throw Error(t(174));return i}function Qh(i,s){switch(it(Va,s),it(Na,i),it(kr,Da),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lt(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=lt(s,i)}ot(kr),it(kr,s)}function Po(){ot(kr),ot(Na),ot(Va)}function xg(i){As(Va.current);var s=As(kr.current),l=lt(s,i.type);s!==l&&(it(Na,i),it(kr,l))}function Zh(i){Na.current===i&&(ot(kr),ot(Na))}var ht=ki(0);function Tu(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Jh=[];function Yh(){for(var i=0;i<Jh.length;i++)Jh[i]._workInProgressVersionPrimary=null;Jh.length=0}var Cu=W.ReactCurrentDispatcher,Xh=W.ReactCurrentBatchConfig,xs=0,dt=null,Tt=null,bt=null,Lu=!1,Ua=!1,ja=0,oI=0;function Ht(){throw Error(t(321))}function ed(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!rr(i[l],s[l]))return!1;return!0}function td(i,s,l,h,p,v){if(xs=v,dt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Cu.current=i===null||i.memoizedState===null?cI:hI,i=l(h,p),Ua){v=0;do{if(Ua=!1,ja=0,25<=v)throw Error(t(301));v+=1,bt=Tt=null,s.updateQueue=null,Cu.current=dI,i=l(h,p)}while(Ua)}if(Cu.current=Ru,s=Tt!==null&&Tt.next!==null,xs=0,bt=Tt=dt=null,Lu=!1,s)throw Error(t(300));return i}function nd(){var i=ja!==0;return ja=0,i}function Rr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?dt.memoizedState=bt=i:bt=bt.next=i,bt}function Un(){if(Tt===null){var i=dt.alternate;i=i!==null?i.memoizedState:null}else i=Tt.next;var s=bt===null?dt.memoizedState:bt.next;if(s!==null)bt=s,Tt=i;else{if(i===null)throw Error(t(310));Tt=i,i={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},bt===null?dt.memoizedState=bt=i:bt=bt.next=i}return bt}function Fa(i,s){return typeof s=="function"?s(i):s}function rd(i){var s=Un(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=Tt,p=h.baseQueue,v=l.pending;if(v!==null){if(p!==null){var S=p.next;p.next=v.next,v.next=S}h.baseQueue=p=v,l.pending=null}if(p!==null){v=p.next,h=h.baseState;var b=S=null,V=null,K=v;do{var ae=K.lane;if((xs&ae)===ae)V!==null&&(V=V.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),h=K.hasEagerState?K.eagerState:i(h,K.action);else{var le={lane:ae,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};V===null?(b=V=le,S=h):V=V.next=le,dt.lanes|=ae,bs|=ae}K=K.next}while(K!==null&&K!==v);V===null?S=h:V.next=b,rr(h,s.memoizedState)||(un=!0),s.memoizedState=h,s.baseState=S,s.baseQueue=V,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do v=p.lane,dt.lanes|=v,bs|=v,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function id(i){var s=Un(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,v=s.memoizedState;if(p!==null){l.pending=null;var S=p=p.next;do v=i(v,S.action),S=S.next;while(S!==p);rr(v,s.memoizedState)||(un=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,h]}function bg(){}function Mg(i,s){var l=dt,h=Un(),p=s(),v=!rr(h.memoizedState,p);if(v&&(h.memoizedState=p,un=!0),h=h.queue,sd(Ng.bind(null,l,h,i),[i]),h.getSnapshot!==s||v||bt!==null&&bt.memoizedState.tag&1){if(l.flags|=2048,Ba(9,Dg.bind(null,l,h,p,s),void 0,null),Mt===null)throw Error(t(349));xs&30||Og(l,s,p)}return p}function Og(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=dt.updateQueue,s===null?(s={lastEffect:null,stores:null},dt.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function Dg(i,s,l,h){s.value=l,s.getSnapshot=h,Vg(s)&&Ug(i)}function Ng(i,s,l){return l(function(){Vg(s)&&Ug(i)})}function Vg(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!rr(i,l)}catch{return!0}}function Ug(i){var s=Qr(i,1);s!==null&&lr(s,i,1,-1)}function jg(i){var s=Rr();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:i},s.queue=i,i=i.dispatch=uI.bind(null,dt,i),[s.memoizedState,i]}function Ba(i,s,l,h){return i={tag:i,create:s,destroy:l,deps:h,next:null},s=dt.updateQueue,s===null?(s={lastEffect:null,stores:null},dt.updateQueue=s,s.lastEffect=i.next=i):(l=s.lastEffect,l===null?s.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,s.lastEffect=i)),i}function Fg(){return Un().memoizedState}function Pu(i,s,l,h){var p=Rr();dt.flags|=i,p.memoizedState=Ba(1|s,l,void 0,h===void 0?null:h)}function ku(i,s,l,h){var p=Un();h=h===void 0?null:h;var v=void 0;if(Tt!==null){var S=Tt.memoizedState;if(v=S.destroy,h!==null&&ed(h,S.deps)){p.memoizedState=Ba(s,l,v,h);return}}dt.flags|=i,p.memoizedState=Ba(1|s,l,v,h)}function Bg(i,s){return Pu(8390656,8,i,s)}function sd(i,s){return ku(2048,8,i,s)}function zg(i,s){return ku(4,2,i,s)}function $g(i,s){return ku(4,4,i,s)}function Wg(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Hg(i,s,l){return l=l!=null?l.concat([i]):null,ku(4,4,Wg.bind(null,s,i),l)}function od(){}function qg(i,s){var l=Un();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&ed(s,h[1])?h[0]:(l.memoizedState=[i,s],i)}function Gg(i,s){var l=Un();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&ed(s,h[1])?h[0]:(i=i(),l.memoizedState=[i,s],i)}function Kg(i,s,l){return xs&21?(rr(l,s)||(l=Es(),dt.lanes|=l,bs|=l,i.baseState=!0),s):(i.baseState&&(i.baseState=!1,un=!0),i.memoizedState=l)}function aI(i,s){var l=qe;qe=l!==0&&4>l?l:4,i(!0);var h=Xh.transition;Xh.transition={};try{i(!1),s()}finally{qe=l,Xh.transition=h}}function Qg(){return Un().memoizedState}function lI(i,s,l){var h=Ni(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Zg(i))Jg(s,l);else if(l=Pg(i,s,l,h),l!==null){var p=nn();lr(l,i,h,p),Yg(l,s,h)}}function uI(i,s,l){var h=Ni(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Zg(i))Jg(s,p);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,b=v(S,l);if(p.hasEagerState=!0,p.eagerState=b,rr(b,S)){var V=s.interleaved;V===null?(p.next=p,Gh(s)):(p.next=V.next,V.next=p),s.interleaved=p;return}}catch{}finally{}l=Pg(i,s,p,h),l!==null&&(p=nn(),lr(l,i,h,p),Yg(l,s,h))}}function Zg(i){var s=i.alternate;return i===dt||s!==null&&s===dt}function Jg(i,s){Ua=Lu=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function Yg(i,s,l){if(l&4194240){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,wi(i,l)}}var Ru={readContext:Vn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},cI={readContext:Vn,useCallback:function(i,s){return Rr().memoizedState=[i,s===void 0?null:s],i},useContext:Vn,useEffect:Bg,useImperativeHandle:function(i,s,l){return l=l!=null?l.concat([i]):null,Pu(4194308,4,Wg.bind(null,s,i),l)},useLayoutEffect:function(i,s){return Pu(4194308,4,i,s)},useInsertionEffect:function(i,s){return Pu(4,2,i,s)},useMemo:function(i,s){var l=Rr();return s=s===void 0?null:s,i=i(),l.memoizedState=[i,s],i},useReducer:function(i,s,l){var h=Rr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},h.queue=i,i=i.dispatch=lI.bind(null,dt,i),[h.memoizedState,i]},useRef:function(i){var s=Rr();return i={current:i},s.memoizedState=i},useState:jg,useDebugValue:od,useDeferredValue:function(i){return Rr().memoizedState=i},useTransition:function(){var i=jg(!1),s=i[0];return i=aI.bind(null,i[1]),Rr().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,l){var h=dt,p=Rr();if(ct){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Mt===null)throw Error(t(349));xs&30||Og(h,s,l)}p.memoizedState=l;var v={value:l,getSnapshot:s};return p.queue=v,Bg(Ng.bind(null,h,v,i),[i]),h.flags|=2048,Ba(9,Dg.bind(null,h,v,l,s),void 0,null),l},useId:function(){var i=Rr(),s=Mt.identifierPrefix;if(ct){var l=Kr,h=Gr;l=(h&~(1<<32-Xt(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=ja++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=oI++,s=":"+s+"r"+l.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},hI={readContext:Vn,useCallback:qg,useContext:Vn,useEffect:sd,useImperativeHandle:Hg,useInsertionEffect:zg,useLayoutEffect:$g,useMemo:Gg,useReducer:rd,useRef:Fg,useState:function(){return rd(Fa)},useDebugValue:od,useDeferredValue:function(i){var s=Un();return Kg(s,Tt.memoizedState,i)},useTransition:function(){var i=rd(Fa)[0],s=Un().memoizedState;return[i,s]},useMutableSource:bg,useSyncExternalStore:Mg,useId:Qg,unstable_isNewReconciler:!1},dI={readContext:Vn,useCallback:qg,useContext:Vn,useEffect:sd,useImperativeHandle:Hg,useInsertionEffect:zg,useLayoutEffect:$g,useMemo:Gg,useReducer:id,useRef:Fg,useState:function(){return id(Fa)},useDebugValue:od,useDeferredValue:function(i){var s=Un();return Tt===null?s.memoizedState=i:Kg(s,Tt.memoizedState,i)},useTransition:function(){var i=id(Fa)[0],s=Un().memoizedState;return[i,s]},useMutableSource:bg,useSyncExternalStore:Mg,useId:Qg,unstable_isNewReconciler:!1};function sr(i,s){if(i&&i.defaultProps){s=se({},s),i=i.defaultProps;for(var l in i)s[l]===void 0&&(s[l]=i[l]);return s}return s}function ad(i,s,l,h){s=i.memoizedState,l=l(h,s),l=l==null?s:se({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Au={isMounted:function(i){return(i=i._reactInternals)?Zn(i)===i:!1},enqueueSetState:function(i,s,l){i=i._reactInternals;var h=nn(),p=Ni(i),v=Zr(h,p);v.payload=s,l!=null&&(v.callback=l),s=bi(i,v,p),s!==null&&(lr(s,i,p,h),Su(s,i,p))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var h=nn(),p=Ni(i),v=Zr(h,p);v.tag=1,v.payload=s,l!=null&&(v.callback=l),s=bi(i,v,p),s!==null&&(lr(s,i,p,h),Su(s,i,p))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=nn(),h=Ni(i),p=Zr(l,h);p.tag=2,s!=null&&(p.callback=s),s=bi(i,p,h),s!==null&&(lr(s,i,h,l),Su(s,i,h))}};function Xg(i,s,l,h,p,v,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,v,S):s.prototype&&s.prototype.isPureReactComponent?!Pa(l,h)||!Pa(p,v):!0}function em(i,s,l){var h=!1,p=Ri,v=s.contextType;return typeof v=="object"&&v!==null?v=Vn(v):(p=ln(s)?Ls:Wt.current,h=s.contextTypes,v=(h=h!=null)?Eo(i,p):Ri),s=new s(l,v),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Au,i.stateNode=s,s._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=v),s}function tm(i,s,l,h){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==i&&Au.enqueueReplaceState(s,s.state,null)}function ld(i,s,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},Kh(i);var v=s.contextType;typeof v=="object"&&v!==null?p.context=Vn(v):(v=ln(s)?Ls:Wt.current,p.context=Eo(i,v)),p.state=i.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(ad(i,s,v,l),p.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&Au.enqueueReplaceState(p,p.state,null),Iu(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function ko(i,s){try{var l="",h=s;do l+=G(h),h=h.return;while(h);var p=l}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:s,stack:p,digest:null}}function ud(i,s,l){return{value:i,source:null,stack:l??null,digest:s??null}}function cd(i,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var fI=typeof WeakMap=="function"?WeakMap:Map;function nm(i,s,l){l=Zr(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){Vu||(Vu=!0,Cd=h),cd(i,s)},l}function rm(i,s,l){l=Zr(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=s.value;l.payload=function(){return h(p)},l.callback=function(){cd(i,s)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){cd(i,s),typeof h!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),l}function im(i,s,l){var h=i.pingCache;if(h===null){h=i.pingCache=new fI;var p=new Set;h.set(s,p)}else p=h.get(s),p===void 0&&(p=new Set,h.set(s,p));p.has(l)||(p.add(l),i=PI.bind(null,i,s,l),s.then(i,i))}function sm(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function om(i,s,l,h,p){return i.mode&1?(i.flags|=65536,i.lanes=p,i):(i===s?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Zr(-1,1),s.tag=2,bi(l,s,1))),l.lanes|=1),i)}var pI=W.ReactCurrentOwner,un=!1;function tn(i,s,l,h){s.child=i===null?Lg(s,null,l,h):To(s,i.child,l,h)}function am(i,s,l,h,p){l=l.render;var v=s.ref;return Lo(s,p),h=td(i,s,l,h,v,p),l=nd(),i!==null&&!un?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~p,Jr(i,s,p)):(ct&&l&&Uh(s),s.flags|=1,tn(i,s,h,p),s.child)}function lm(i,s,l,h,p){if(i===null){var v=l.type;return typeof v=="function"&&!bd(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=v,um(i,s,v,h,p)):(i=$u(l.type,null,h,s,s.mode,p),i.ref=s.ref,i.return=s,s.child=i)}if(v=i.child,!(i.lanes&p)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:Pa,l(S,h)&&i.ref===s.ref)return Jr(i,s,p)}return s.flags|=1,i=Ui(v,h),i.ref=s.ref,i.return=s,s.child=i}function um(i,s,l,h,p){if(i!==null){var v=i.memoizedProps;if(Pa(v,h)&&i.ref===s.ref)if(un=!1,s.pendingProps=h=v,(i.lanes&p)!==0)i.flags&131072&&(un=!0);else return s.lanes=i.lanes,Jr(i,s,p)}return hd(i,s,l,h,p)}function cm(i,s,l){var h=s.pendingProps,p=h.children,v=i!==null?i.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Ao,Cn),Cn|=l;else{if(!(l&1073741824))return i=v!==null?v.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,it(Ao,Cn),Cn|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:l,it(Ao,Cn),Cn|=h}else v!==null?(h=v.baseLanes|l,s.memoizedState=null):h=l,it(Ao,Cn),Cn|=h;return tn(i,s,p,l),s.child}function hm(i,s){var l=s.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function hd(i,s,l,h,p){var v=ln(l)?Ls:Wt.current;return v=Eo(s,v),Lo(s,p),l=td(i,s,l,h,v,p),h=nd(),i!==null&&!un?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~p,Jr(i,s,p)):(ct&&h&&Uh(s),s.flags|=1,tn(i,s,l,p),s.child)}function dm(i,s,l,h,p){if(ln(l)){var v=!0;pu(s)}else v=!1;if(Lo(s,p),s.stateNode===null)bu(i,s),em(s,l,h),ld(s,l,h,p),h=!0;else if(i===null){var S=s.stateNode,b=s.memoizedProps;S.props=b;var V=S.context,K=l.contextType;typeof K=="object"&&K!==null?K=Vn(K):(K=ln(l)?Ls:Wt.current,K=Eo(s,K));var ae=l.getDerivedStateFromProps,le=typeof ae=="function"||typeof S.getSnapshotBeforeUpdate=="function";le||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(b!==h||V!==K)&&tm(s,S,h,K),xi=!1;var oe=s.memoizedState;S.state=oe,Iu(s,h,S,p),V=s.memoizedState,b!==h||oe!==V||an.current||xi?(typeof ae=="function"&&(ad(s,l,ae,h),V=s.memoizedState),(b=xi||Xg(s,l,b,h,oe,V,K))?(le||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=V),S.props=h,S.state=V,S.context=K,h=b):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{S=s.stateNode,kg(i,s),b=s.memoizedProps,K=s.type===s.elementType?b:sr(s.type,b),S.props=K,le=s.pendingProps,oe=S.context,V=l.contextType,typeof V=="object"&&V!==null?V=Vn(V):(V=ln(l)?Ls:Wt.current,V=Eo(s,V));var fe=l.getDerivedStateFromProps;(ae=typeof fe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(b!==le||oe!==V)&&tm(s,S,h,V),xi=!1,oe=s.memoizedState,S.state=oe,Iu(s,h,S,p);var Ee=s.memoizedState;b!==le||oe!==Ee||an.current||xi?(typeof fe=="function"&&(ad(s,l,fe,h),Ee=s.memoizedState),(K=xi||Xg(s,l,K,h,oe,Ee,V)||!1)?(ae||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,Ee,V),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,Ee,V)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||b===i.memoizedProps&&oe===i.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&oe===i.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=Ee),S.props=h,S.state=Ee,S.context=V,h=K):(typeof S.componentDidUpdate!="function"||b===i.memoizedProps&&oe===i.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&oe===i.memoizedState||(s.flags|=1024),h=!1)}return dd(i,s,l,h,v,p)}function dd(i,s,l,h,p,v){hm(i,s);var S=(s.flags&128)!==0;if(!h&&!S)return p&&vg(s,l,!1),Jr(i,s,v);h=s.stateNode,pI.current=s;var b=S&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,i!==null&&S?(s.child=To(s,i.child,null,v),s.child=To(s,null,b,v)):tn(i,s,b,v),s.memoizedState=h.state,p&&vg(s,l,!0),s.child}function fm(i){var s=i.stateNode;s.pendingContext?gg(i,s.pendingContext,s.pendingContext!==s.context):s.context&&gg(i,s.context,!1),Qh(i,s.containerInfo)}function pm(i,s,l,h,p){return Io(),zh(p),s.flags|=256,tn(i,s,l,h),s.child}var fd={dehydrated:null,treeContext:null,retryLane:0};function pd(i){return{baseLanes:i,cachePool:null,transitions:null}}function gm(i,s,l){var h=s.pendingProps,p=ht.current,v=!1,S=(s.flags&128)!==0,b;if((b=S)||(b=i!==null&&i.memoizedState===null?!1:(p&2)!==0),b?(v=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),it(ht,p&1),i===null)return Bh(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(s.mode&1?i.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(S=h.children,i=h.fallback,v?(h=s.mode,v=s.child,S={mode:"hidden",children:S},!(h&1)&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Wu(S,h,0,null),i=Ns(i,h,l,null),v.return=s,i.return=s,v.sibling=i,s.child=v,s.child.memoizedState=pd(l),s.memoizedState=fd,i):gd(s,S));if(p=i.memoizedState,p!==null&&(b=p.dehydrated,b!==null))return gI(i,s,S,h,b,p,l);if(v){v=h.fallback,S=s.mode,p=i.child,b=p.sibling;var V={mode:"hidden",children:h.children};return!(S&1)&&s.child!==p?(h=s.child,h.childLanes=0,h.pendingProps=V,s.deletions=null):(h=Ui(p,V),h.subtreeFlags=p.subtreeFlags&14680064),b!==null?v=Ui(b,v):(v=Ns(v,S,l,null),v.flags|=2),v.return=s,h.return=s,h.sibling=v,s.child=h,h=v,v=s.child,S=i.child.memoizedState,S=S===null?pd(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=i.childLanes&~l,s.memoizedState=fd,h}return v=i.child,i=v.sibling,h=Ui(v,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=l),h.return=s,h.sibling=null,i!==null&&(l=s.deletions,l===null?(s.deletions=[i],s.flags|=16):l.push(i)),s.child=h,s.memoizedState=null,h}function gd(i,s){return s=Wu({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function xu(i,s,l,h){return h!==null&&zh(h),To(s,i.child,null,l),i=gd(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function gI(i,s,l,h,p,v,S){if(l)return s.flags&256?(s.flags&=-257,h=ud(Error(t(422))),xu(i,s,S,h)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(v=h.fallback,p=s.mode,h=Wu({mode:"visible",children:h.children},p,0,null),v=Ns(v,p,S,null),v.flags|=2,h.return=s,v.return=s,h.sibling=v,s.child=h,s.mode&1&&To(s,i.child,null,S),s.child.memoizedState=pd(S),s.memoizedState=fd,v);if(!(s.mode&1))return xu(i,s,S,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var b=h.dgst;return h=b,v=Error(t(419)),h=ud(v,h,void 0),xu(i,s,S,h)}if(b=(S&i.childLanes)!==0,un||b){if(h=Mt,h!==null){switch(S&-S){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(h.suspendedLanes|S)?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,Qr(i,p),lr(h,i,p,-1))}return xd(),h=ud(Error(t(421))),xu(i,s,S,h)}return p.data==="$?"?(s.flags|=128,s.child=i.child,s=kI.bind(null,i),p._reactRetry=s,null):(i=v.treeContext,Tn=Pi(p.nextSibling),In=s,ct=!0,ir=null,i!==null&&(Dn[Nn++]=Gr,Dn[Nn++]=Kr,Dn[Nn++]=Ps,Gr=i.id,Kr=i.overflow,Ps=s),s=gd(s,h.children),s.flags|=4096,s)}function mm(i,s,l){i.lanes|=s;var h=i.alternate;h!==null&&(h.lanes|=s),qh(i.return,s,l)}function md(i,s,l,h,p){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=l,v.tailMode=p)}function vm(i,s,l){var h=s.pendingProps,p=h.revealOrder,v=h.tail;if(tn(i,s,h.children,l),h=ht.current,h&2)h=h&1|2,s.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&mm(i,l,s);else if(i.tag===19)mm(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(it(ht,h),!(s.mode&1))s.memoizedState=null;else switch(p){case"forwards":for(l=s.child,p=null;l!==null;)i=l.alternate,i!==null&&Tu(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),md(s,!1,p,l,v);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(i=p.alternate,i!==null&&Tu(i)===null){s.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}md(s,!0,l,null,v);break;case"together":md(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function bu(i,s){!(s.mode&1)&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function Jr(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),bs|=s.lanes,!(l&s.childLanes))return null;if(i!==null&&s.child!==i.child)throw Error(t(153));if(s.child!==null){for(i=s.child,l=Ui(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=Ui(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function mI(i,s,l){switch(s.tag){case 3:fm(s),Io();break;case 5:xg(s);break;case 1:ln(s.type)&&pu(s);break;case 4:Qh(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,p=s.memoizedProps.value;it(Eu,h._currentValue),h._currentValue=p;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(it(ht,ht.current&1),s.flags|=128,null):l&s.child.childLanes?gm(i,s,l):(it(ht,ht.current&1),i=Jr(i,s,l),i!==null?i.sibling:null);it(ht,ht.current&1);break;case 19:if(h=(l&s.childLanes)!==0,i.flags&128){if(h)return vm(i,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),it(ht,ht.current),h)break;return null;case 22:case 23:return s.lanes=0,cm(i,s,l)}return Jr(i,s,l)}var ym,vd,_m,Em;ym=function(i,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},vd=function(){},_m=function(i,s,l,h){var p=i.memoizedProps;if(p!==h){i=s.stateNode,As(kr.current);var v=null;switch(l){case"input":p=mn(i,p),h=mn(i,h),v=[];break;case"select":p=se({},p,{value:void 0}),h=se({},h,{value:void 0}),v=[];break;case"textarea":p=fi(i,p),h=fi(i,h),v=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=hu)}mi(l,h);var S;l=null;for(K in p)if(!h.hasOwnProperty(K)&&p.hasOwnProperty(K)&&p[K]!=null)if(K==="style"){var b=p[K];for(S in b)b.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?v||(v=[]):(v=v||[]).push(K,null));for(K in h){var V=h[K];if(b=p!=null?p[K]:void 0,h.hasOwnProperty(K)&&V!==b&&(V!=null||b!=null))if(K==="style")if(b){for(S in b)!b.hasOwnProperty(S)||V&&V.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in V)V.hasOwnProperty(S)&&b[S]!==V[S]&&(l||(l={}),l[S]=V[S])}else l||(v||(v=[]),v.push(K,l)),l=V;else K==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,b=b?b.__html:void 0,V!=null&&b!==V&&(v=v||[]).push(K,V)):K==="children"?typeof V!="string"&&typeof V!="number"||(v=v||[]).push(K,""+V):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(V!=null&&K==="onScroll"&&st("scroll",i),v||b===V||(v=[])):(v=v||[]).push(K,V))}l&&(v=v||[]).push("style",l);var K=v;(s.updateQueue=K)&&(s.flags|=4)}},Em=function(i,s,l,h){l!==h&&(s.flags|=4)};function za(i,s){if(!ct)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function qt(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(s)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,s}function vI(i,s,l){var h=s.pendingProps;switch(jh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(s),null;case 1:return ln(s.type)&&fu(),qt(s),null;case 3:return h=s.stateNode,Po(),ot(an),ot(Wt),Yh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(yu(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ir!==null&&(kd(ir),ir=null))),vd(i,s),qt(s),null;case 5:Zh(s);var p=As(Va.current);if(l=s.type,i!==null&&s.stateNode!=null)_m(i,s,l,h,p),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return qt(s),null}if(i=As(kr.current),yu(s)){h=s.stateNode,l=s.type;var v=s.memoizedProps;switch(h[Pr]=s,h[ba]=v,i=(s.mode&1)!==0,l){case"dialog":st("cancel",h),st("close",h);break;case"iframe":case"object":case"embed":st("load",h);break;case"video":case"audio":for(p=0;p<Ra.length;p++)st(Ra[p],h);break;case"source":st("error",h);break;case"img":case"image":case"link":st("error",h),st("load",h);break;case"details":st("toggle",h);break;case"input":He(h,v),st("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},st("invalid",h);break;case"textarea":Wn(h,v),st("invalid",h)}mi(l,v),p=null;for(var S in v)if(v.hasOwnProperty(S)){var b=v[S];S==="children"?typeof b=="string"?h.textContent!==b&&(v.suppressHydrationWarning!==!0&&cu(h.textContent,b,i),p=["children",b]):typeof b=="number"&&h.textContent!==""+b&&(v.suppressHydrationWarning!==!0&&cu(h.textContent,b,i),p=["children",""+b]):o.hasOwnProperty(S)&&b!=null&&S==="onScroll"&&st("scroll",h)}switch(l){case"input":Ue(h),ds(h,v,!0);break;case"textarea":Ue(h),pi(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=hu)}h=p,s.updateQueue=h,h!==null&&(s.flags|=4)}else{S=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=pt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=S.createElement(l,{is:h.is}):(i=S.createElement(l),l==="select"&&(S=i,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):i=S.createElementNS(i,l),i[Pr]=s,i[ba]=h,ym(i,s,!1,!1),s.stateNode=i;e:{switch(S=vr(l,h),l){case"dialog":st("cancel",i),st("close",i),p=h;break;case"iframe":case"object":case"embed":st("load",i),p=h;break;case"video":case"audio":for(p=0;p<Ra.length;p++)st(Ra[p],i);p=h;break;case"source":st("error",i),p=h;break;case"img":case"image":case"link":st("error",i),st("load",i),p=h;break;case"details":st("toggle",i),p=h;break;case"input":He(i,h),p=mn(i,h),st("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=se({},h,{value:void 0}),st("invalid",i);break;case"textarea":Wn(i,h),p=fi(i,h),st("invalid",i);break;default:p=h}mi(l,p),b=p;for(v in b)if(b.hasOwnProperty(v)){var V=b[v];v==="style"?gi(i,V):v==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&fr(i,V)):v==="children"?typeof V=="string"?(l!=="textarea"||V!=="")&&Hn(i,V):typeof V=="number"&&Hn(i,""+V):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?V!=null&&v==="onScroll"&&st("scroll",i):V!=null&&ee(i,v,V,S))}switch(l){case"input":Ue(i),ds(i,h,!1);break;case"textarea":Ue(i),pi(i);break;case"option":h.value!=null&&i.setAttribute("value",""+de(h.value));break;case"select":i.multiple=!!h.multiple,v=h.value,v!=null?rn(i,!!h.multiple,v,!1):h.defaultValue!=null&&rn(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=hu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return qt(s),null;case 6:if(i&&s.stateNode!=null)Em(i,s,i.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=As(Va.current),As(kr.current),yu(s)){if(h=s.stateNode,l=s.memoizedProps,h[Pr]=s,(v=h.nodeValue!==l)&&(i=In,i!==null))switch(i.tag){case 3:cu(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&cu(h.nodeValue,l,(i.mode&1)!==0)}v&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Pr]=s,s.stateNode=h}return qt(s),null;case 13:if(ot(ht),h=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ct&&Tn!==null&&s.mode&1&&!(s.flags&128))Ig(),Io(),s.flags|=98560,v=!1;else if(v=yu(s),h!==null&&h.dehydrated!==null){if(i===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Pr]=s}else Io(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;qt(s),v=!1}else ir!==null&&(kd(ir),ir=null),v=!0;if(!v)return s.flags&65536?s:null}return s.flags&128?(s.lanes=l,s):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(i===null||ht.current&1?Ct===0&&(Ct=3):xd())),s.updateQueue!==null&&(s.flags|=4),qt(s),null);case 4:return Po(),vd(i,s),i===null&&Aa(s.stateNode.containerInfo),qt(s),null;case 10:return Hh(s.type._context),qt(s),null;case 17:return ln(s.type)&&fu(),qt(s),null;case 19:if(ot(ht),v=s.memoizedState,v===null)return qt(s),null;if(h=(s.flags&128)!==0,S=v.rendering,S===null)if(h)za(v,!1);else{if(Ct!==0||i!==null&&i.flags&128)for(i=s.child;i!==null;){if(S=Tu(i),S!==null){for(s.flags|=128,za(v,!1),h=S.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)v=l,i=h,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,i=S.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return it(ht,ht.current&1|2),s.child}i=i.sibling}v.tail!==null&&rt()>xo&&(s.flags|=128,h=!0,za(v,!1),s.lanes=4194304)}else{if(!h)if(i=Tu(S),i!==null){if(s.flags|=128,h=!0,l=i.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),za(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!ct)return qt(s),null}else 2*rt()-v.renderingStartTime>xo&&l!==1073741824&&(s.flags|=128,h=!0,za(v,!1),s.lanes=4194304);v.isBackwards?(S.sibling=s.child,s.child=S):(l=v.last,l!==null?l.sibling=S:s.child=S,v.last=S)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=rt(),s.sibling=null,l=ht.current,it(ht,h?l&1|2:l&1),s):(qt(s),null);case 22:case 23:return Ad(),h=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?Cn&1073741824&&(qt(s),s.subtreeFlags&6&&(s.flags|=8192)):qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function yI(i,s){switch(jh(s),s.tag){case 1:return ln(s.type)&&fu(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Po(),ot(an),ot(Wt),Yh(),i=s.flags,i&65536&&!(i&128)?(s.flags=i&-65537|128,s):null;case 5:return Zh(s),null;case 13:if(ot(ht),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Io()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ot(ht),null;case 4:return Po(),null;case 10:return Hh(s.type._context),null;case 22:case 23:return Ad(),null;case 24:return null;default:return null}}var Mu=!1,Gt=!1,_I=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Ro(i,s){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){gt(i,s,h)}else l.current=null}function yd(i,s,l){try{l()}catch(h){gt(i,s,h)}}var wm=!1;function EI(i,s){if(Ah=Ti,i=Xp(),Sh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,b=-1,V=-1,K=0,ae=0,le=i,oe=null;t:for(;;){for(var fe;le!==l||p!==0&&le.nodeType!==3||(b=S+p),le!==v||h!==0&&le.nodeType!==3||(V=S+h),le.nodeType===3&&(S+=le.nodeValue.length),(fe=le.firstChild)!==null;)oe=le,le=fe;for(;;){if(le===i)break t;if(oe===l&&++K===p&&(b=S),oe===v&&++ae===h&&(V=S),(fe=le.nextSibling)!==null)break;le=oe,oe=le.parentNode}le=fe}l=b===-1||V===-1?null:{start:b,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(xh={focusedElem:i,selectionRange:l},Ti=!1,ve=s;ve!==null;)if(s=ve,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,ve=i;else for(;ve!==null;){s=ve;try{var Ee=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var we=Ee.memoizedProps,mt=Ee.memoizedState,B=s.stateNode,j=B.getSnapshotBeforeUpdate(s.elementType===s.type?we:sr(s.type,we),mt);B.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){gt(s,s.return,ue)}if(i=s.sibling,i!==null){i.return=s.return,ve=i;break}ve=s.return}return Ee=wm,wm=!1,Ee}function $a(i,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var v=p.destroy;p.destroy=void 0,v!==void 0&&yd(s,l,v)}p=p.next}while(p!==h)}}function Ou(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function _d(i){var s=i.ref;if(s!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof s=="function"?s(i):s.current=i}}function Sm(i){var s=i.alternate;s!==null&&(i.alternate=null,Sm(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[Pr],delete s[ba],delete s[Dh],delete s[nI],delete s[rI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Im(i){return i.tag===5||i.tag===3||i.tag===4}function Tm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Im(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ed(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(i,s):l.insertBefore(i,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(i,l)):(s=l,s.appendChild(i)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=hu));else if(h!==4&&(i=i.child,i!==null))for(Ed(i,s,l),i=i.sibling;i!==null;)Ed(i,s,l),i=i.sibling}function wd(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(wd(i,s,l),i=i.sibling;i!==null;)wd(i,s,l),i=i.sibling}var jt=null,or=!1;function Mi(i,s,l){for(l=l.child;l!==null;)Cm(i,s,l),l=l.sibling}function Cm(i,s,l){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(ys,l)}catch{}switch(l.tag){case 5:Gt||Ro(l,s);case 6:var h=jt,p=or;jt=null,Mi(i,s,l),jt=h,or=p,jt!==null&&(or?(i=jt,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):jt.removeChild(l.stateNode));break;case 18:jt!==null&&(or?(i=jt,l=l.stateNode,i.nodeType===8?Oh(i.parentNode,l):i.nodeType===1&&Oh(i,l),tr(i)):Oh(jt,l.stateNode));break;case 4:h=jt,p=or,jt=l.stateNode.containerInfo,or=!0,Mi(i,s,l),jt=h,or=p;break;case 0:case 11:case 14:case 15:if(!Gt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var v=p,S=v.destroy;v=v.tag,S!==void 0&&(v&2||v&4)&&yd(l,s,S),p=p.next}while(p!==h)}Mi(i,s,l);break;case 1:if(!Gt&&(Ro(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(b){gt(l,s,b)}Mi(i,s,l);break;case 21:Mi(i,s,l);break;case 22:l.mode&1?(Gt=(h=Gt)||l.memoizedState!==null,Mi(i,s,l),Gt=h):Mi(i,s,l);break;default:Mi(i,s,l)}}function Lm(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new _I),s.forEach(function(h){var p=RI.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function ar(i,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var v=i,S=s,b=S;e:for(;b!==null;){switch(b.tag){case 5:jt=b.stateNode,or=!1;break e;case 3:jt=b.stateNode.containerInfo,or=!0;break e;case 4:jt=b.stateNode.containerInfo,or=!0;break e}b=b.return}if(jt===null)throw Error(t(160));Cm(v,S,p),jt=null,or=!1;var V=p.alternate;V!==null&&(V.return=null),p.return=null}catch(K){gt(p,s,K)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Pm(s,i),s=s.sibling}function Pm(i,s){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ar(s,i),Ar(i),h&4){try{$a(3,i,i.return),Ou(3,i)}catch(we){gt(i,i.return,we)}try{$a(5,i,i.return)}catch(we){gt(i,i.return,we)}}break;case 1:ar(s,i),Ar(i),h&512&&l!==null&&Ro(l,l.return);break;case 5:if(ar(s,i),Ar(i),h&512&&l!==null&&Ro(l,l.return),i.flags&32){var p=i.stateNode;try{Hn(p,"")}catch(we){gt(i,i.return,we)}}if(h&4&&(p=i.stateNode,p!=null)){var v=i.memoizedProps,S=l!==null?l.memoizedProps:v,b=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{b==="input"&&v.type==="radio"&&v.name!=null&&di(p,v),vr(b,S);var K=vr(b,v);for(S=0;S<V.length;S+=2){var ae=V[S],le=V[S+1];ae==="style"?gi(p,le):ae==="dangerouslySetInnerHTML"?fr(p,le):ae==="children"?Hn(p,le):ee(p,ae,le,K)}switch(b){case"input":dr(p,v);break;case"textarea":Ur(p,v);break;case"select":var oe=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var fe=v.value;fe!=null?rn(p,!!v.multiple,fe,!1):oe!==!!v.multiple&&(v.defaultValue!=null?rn(p,!!v.multiple,v.defaultValue,!0):rn(p,!!v.multiple,v.multiple?[]:"",!1))}p[ba]=v}catch(we){gt(i,i.return,we)}}break;case 6:if(ar(s,i),Ar(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,v=i.memoizedProps;try{p.nodeValue=v}catch(we){gt(i,i.return,we)}}break;case 3:if(ar(s,i),Ar(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{tr(s.containerInfo)}catch(we){gt(i,i.return,we)}break;case 4:ar(s,i),Ar(i);break;case 13:ar(s,i),Ar(i),p=i.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(Td=rt())),h&4&&Lm(i);break;case 22:if(ae=l!==null&&l.memoizedState!==null,i.mode&1?(Gt=(K=Gt)||ae,ar(s,i),Gt=K):ar(s,i),Ar(i),h&8192){if(K=i.memoizedState!==null,(i.stateNode.isHidden=K)&&!ae&&i.mode&1)for(ve=i,ae=i.child;ae!==null;){for(le=ve=ae;ve!==null;){switch(oe=ve,fe=oe.child,oe.tag){case 0:case 11:case 14:case 15:$a(4,oe,oe.return);break;case 1:Ro(oe,oe.return);var Ee=oe.stateNode;if(typeof Ee.componentWillUnmount=="function"){h=oe,l=oe.return;try{s=h,Ee.props=s.memoizedProps,Ee.state=s.memoizedState,Ee.componentWillUnmount()}catch(we){gt(h,l,we)}}break;case 5:Ro(oe,oe.return);break;case 22:if(oe.memoizedState!==null){Am(le);continue}}fe!==null?(fe.return=oe,ve=fe):Am(le)}ae=ae.sibling}e:for(ae=null,le=i;;){if(le.tag===5){if(ae===null){ae=le;try{p=le.stateNode,K?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(b=le.stateNode,V=le.memoizedProps.style,S=V!=null&&V.hasOwnProperty("display")?V.display:null,b.style.display=gr("display",S))}catch(we){gt(i,i.return,we)}}}else if(le.tag===6){if(ae===null)try{le.stateNode.nodeValue=K?"":le.memoizedProps}catch(we){gt(i,i.return,we)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===i)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===i)break e;for(;le.sibling===null;){if(le.return===null||le.return===i)break e;ae===le&&(ae=null),le=le.return}ae===le&&(ae=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:ar(s,i),Ar(i),h&4&&Lm(i);break;case 21:break;default:ar(s,i),Ar(i)}}function Ar(i){var s=i.flags;if(s&2){try{e:{for(var l=i.return;l!==null;){if(Im(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Hn(p,""),h.flags&=-33);var v=Tm(i);wd(i,v,p);break;case 3:case 4:var S=h.stateNode.containerInfo,b=Tm(i);Ed(i,b,S);break;default:throw Error(t(161))}}catch(V){gt(i,i.return,V)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function wI(i,s,l){ve=i,km(i)}function km(i,s,l){for(var h=(i.mode&1)!==0;ve!==null;){var p=ve,v=p.child;if(p.tag===22&&h){var S=p.memoizedState!==null||Mu;if(!S){var b=p.alternate,V=b!==null&&b.memoizedState!==null||Gt;b=Mu;var K=Gt;if(Mu=S,(Gt=V)&&!K)for(ve=p;ve!==null;)S=ve,V=S.child,S.tag===22&&S.memoizedState!==null?xm(p):V!==null?(V.return=S,ve=V):xm(p);for(;v!==null;)ve=v,km(v),v=v.sibling;ve=p,Mu=b,Gt=K}Rm(i)}else p.subtreeFlags&8772&&v!==null?(v.return=p,ve=v):Rm(i)}}function Rm(i){for(;ve!==null;){var s=ve;if(s.flags&8772){var l=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Gt||Ou(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Gt)if(l===null)h.componentDidMount();else{var p=s.elementType===s.type?l.memoizedProps:sr(s.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&Ag(s,v,h);break;case 3:var S=s.updateQueue;if(S!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Ag(s,S,l)}break;case 5:var b=s.stateNode;if(l===null&&s.flags&4){l=b;var V=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&l.focus();break;case"img":V.src&&(l.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var K=s.alternate;if(K!==null){var ae=K.memoizedState;if(ae!==null){var le=ae.dehydrated;le!==null&&tr(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gt||s.flags&512&&_d(s)}catch(oe){gt(s,s.return,oe)}}if(s===i){ve=null;break}if(l=s.sibling,l!==null){l.return=s.return,ve=l;break}ve=s.return}}function Am(i){for(;ve!==null;){var s=ve;if(s===i){ve=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ve=l;break}ve=s.return}}function xm(i){for(;ve!==null;){var s=ve;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Ou(4,s)}catch(V){gt(s,l,V)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var p=s.return;try{h.componentDidMount()}catch(V){gt(s,p,V)}}var v=s.return;try{_d(s)}catch(V){gt(s,v,V)}break;case 5:var S=s.return;try{_d(s)}catch(V){gt(s,S,V)}}}catch(V){gt(s,s.return,V)}if(s===i){ve=null;break}var b=s.sibling;if(b!==null){b.return=s.return,ve=b;break}ve=s.return}}var SI=Math.ceil,Du=W.ReactCurrentDispatcher,Sd=W.ReactCurrentOwner,jn=W.ReactCurrentBatchConfig,Ze=0,Mt=null,Et=null,Ft=0,Cn=0,Ao=ki(0),Ct=0,Wa=null,bs=0,Nu=0,Id=0,Ha=null,cn=null,Td=0,xo=1/0,Yr=null,Vu=!1,Cd=null,Oi=null,Uu=!1,Di=null,ju=0,qa=0,Ld=null,Fu=-1,Bu=0;function nn(){return Ze&6?rt():Fu!==-1?Fu:Fu=rt()}function Ni(i){return i.mode&1?Ze&2&&Ft!==0?Ft&-Ft:sI.transition!==null?(Bu===0&&(Bu=Es()),Bu):(i=qe,i!==0||(i=window.event,i=i===void 0?16:Ea(i.type)),i):1}function lr(i,s,l,h){if(50<qa)throw qa=0,Ld=null,Error(t(185));Ei(i,l,h),(!(Ze&2)||i!==Mt)&&(i===Mt&&(!(Ze&2)&&(Nu|=l),Ct===4&&Vi(i,Ft)),hn(i,h),l===1&&Ze===0&&!(s.mode&1)&&(xo=rt()+500,gu&&Ai()))}function hn(i,s){var l=i.callbackNode;Fr(i,s);var h=_s(i,i===Mt?Ft:0);if(h===0)l!==null&&ga(l),i.callbackNode=null,i.callbackPriority=0;else if(s=h&-h,i.callbackPriority!==s){if(l!=null&&ga(l),s===1)i.tag===0?iI(Mm.bind(null,i)):yg(Mm.bind(null,i)),eI(function(){!(Ze&6)&&Ai()}),l=null;else{switch(Si(h)){case 1:l=vs;break;case 4:l=vi;break;case 16:l=bn;break;case 536870912:l=Bl;break;default:l=bn}l=Bm(l,bm.bind(null,i))}i.callbackPriority=s,i.callbackNode=l}}function bm(i,s){if(Fu=-1,Bu=0,Ze&6)throw Error(t(327));var l=i.callbackNode;if(bo()&&i.callbackNode!==l)return null;var h=_s(i,i===Mt?Ft:0);if(h===0)return null;if(h&30||h&i.expiredLanes||s)s=zu(i,h);else{s=h;var p=Ze;Ze|=2;var v=Dm();(Mt!==i||Ft!==s)&&(Yr=null,xo=rt()+500,Os(i,s));do try{CI();break}catch(b){Om(i,b)}while(!0);Wh(),Du.current=v,Ze=p,Et!==null?s=0:(Mt=null,Ft=0,s=Ct)}if(s!==0){if(s===2&&(p=En(i),p!==0&&(h=p,s=Pd(i,p))),s===1)throw l=Wa,Os(i,0),Vi(i,h),hn(i,rt()),l;if(s===6)Vi(i,h);else{if(p=i.current.alternate,!(h&30)&&!II(p)&&(s=zu(i,h),s===2&&(v=En(i),v!==0&&(h=v,s=Pd(i,v))),s===1))throw l=Wa,Os(i,0),Vi(i,h),hn(i,rt()),l;switch(i.finishedWork=p,i.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:Ds(i,cn,Yr);break;case 3:if(Vi(i,h),(h&130023424)===h&&(s=Td+500-rt(),10<s)){if(_s(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){nn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=Mh(Ds.bind(null,i,cn,Yr),s);break}Ds(i,cn,Yr);break;case 4:if(Vi(i,h),(h&4194240)===h)break;for(s=i.eventTimes,p=-1;0<h;){var S=31-Xt(h);v=1<<S,S=s[S],S>p&&(p=S),h&=~v}if(h=p,h=rt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*SI(h/1960))-h,10<h){i.timeoutHandle=Mh(Ds.bind(null,i,cn,Yr),h);break}Ds(i,cn,Yr);break;case 5:Ds(i,cn,Yr);break;default:throw Error(t(329))}}}return hn(i,rt()),i.callbackNode===l?bm.bind(null,i):null}function Pd(i,s){var l=Ha;return i.current.memoizedState.isDehydrated&&(Os(i,s).flags|=256),i=zu(i,s),i!==2&&(s=cn,cn=l,s!==null&&kd(s)),i}function kd(i){cn===null?cn=i:cn.push.apply(cn,i)}function II(i){for(var s=i;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],v=p.getSnapshot;p=p.value;try{if(!rr(v(),p))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Vi(i,s){for(s&=~Id,s&=~Nu,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var l=31-Xt(s),h=1<<l;i[l]=-1,s&=~h}}function Mm(i){if(Ze&6)throw Error(t(327));bo();var s=_s(i,0);if(!(s&1))return hn(i,rt()),null;var l=zu(i,s);if(i.tag!==0&&l===2){var h=En(i);h!==0&&(s=h,l=Pd(i,h))}if(l===1)throw l=Wa,Os(i,0),Vi(i,s),hn(i,rt()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,Ds(i,cn,Yr),hn(i,rt()),null}function Rd(i,s){var l=Ze;Ze|=1;try{return i(s)}finally{Ze=l,Ze===0&&(xo=rt()+500,gu&&Ai())}}function Ms(i){Di!==null&&Di.tag===0&&!(Ze&6)&&bo();var s=Ze;Ze|=1;var l=jn.transition,h=qe;try{if(jn.transition=null,qe=1,i)return i()}finally{qe=h,jn.transition=l,Ze=s,!(Ze&6)&&Ai()}}function Ad(){Cn=Ao.current,ot(Ao)}function Os(i,s){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,XS(l)),Et!==null)for(l=Et.return;l!==null;){var h=l;switch(jh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&fu();break;case 3:Po(),ot(an),ot(Wt),Yh();break;case 5:Zh(h);break;case 4:Po();break;case 13:ot(ht);break;case 19:ot(ht);break;case 10:Hh(h.type._context);break;case 22:case 23:Ad()}l=l.return}if(Mt=i,Et=i=Ui(i.current,null),Ft=Cn=s,Ct=0,Wa=null,Id=Nu=bs=0,cn=Ha=null,Rs!==null){for(s=0;s<Rs.length;s++)if(l=Rs[s],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,v=l.pending;if(v!==null){var S=v.next;v.next=p,h.next=S}l.pending=h}Rs=null}return i}function Om(i,s){do{var l=Et;try{if(Wh(),Cu.current=Ru,Lu){for(var h=dt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Lu=!1}if(xs=0,bt=Tt=dt=null,Ua=!1,ja=0,Sd.current=null,l===null||l.return===null){Ct=1,Wa=s,Et=null;break}e:{var v=i,S=l.return,b=l,V=s;if(s=Ft,b.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var K=V,ae=b,le=ae.tag;if(!(ae.mode&1)&&(le===0||le===11||le===15)){var oe=ae.alternate;oe?(ae.updateQueue=oe.updateQueue,ae.memoizedState=oe.memoizedState,ae.lanes=oe.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var fe=sm(S);if(fe!==null){fe.flags&=-257,om(fe,S,b,v,s),fe.mode&1&&im(v,K,s),s=fe,V=K;var Ee=s.updateQueue;if(Ee===null){var we=new Set;we.add(V),s.updateQueue=we}else Ee.add(V);break e}else{if(!(s&1)){im(v,K,s),xd();break e}V=Error(t(426))}}else if(ct&&b.mode&1){var mt=sm(S);if(mt!==null){!(mt.flags&65536)&&(mt.flags|=256),om(mt,S,b,v,s),zh(ko(V,b));break e}}v=V=ko(V,b),Ct!==4&&(Ct=2),Ha===null?Ha=[v]:Ha.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var B=nm(v,V,s);Rg(v,B);break e;case 1:b=V;var j=v.type,z=v.stateNode;if(!(v.flags&128)&&(typeof j.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Oi===null||!Oi.has(z)))){v.flags|=65536,s&=-s,v.lanes|=s;var ue=rm(v,b,s);Rg(v,ue);break e}}v=v.return}while(v!==null)}Vm(l)}catch(Se){s=Se,Et===l&&l!==null&&(Et=l=l.return);continue}break}while(!0)}function Dm(){var i=Du.current;return Du.current=Ru,i===null?Ru:i}function xd(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Mt===null||!(bs&268435455)&&!(Nu&268435455)||Vi(Mt,Ft)}function zu(i,s){var l=Ze;Ze|=2;var h=Dm();(Mt!==i||Ft!==s)&&(Yr=null,Os(i,s));do try{TI();break}catch(p){Om(i,p)}while(!0);if(Wh(),Ze=l,Du.current=h,Et!==null)throw Error(t(261));return Mt=null,Ft=0,Ct}function TI(){for(;Et!==null;)Nm(Et)}function CI(){for(;Et!==null&&!jl();)Nm(Et)}function Nm(i){var s=Fm(i.alternate,i,Cn);i.memoizedProps=i.pendingProps,s===null?Vm(i):Et=s,Sd.current=null}function Vm(i){var s=i;do{var l=s.alternate;if(i=s.return,s.flags&32768){if(l=yI(l,s),l!==null){l.flags&=32767,Et=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ct=6,Et=null;return}}else if(l=vI(l,s,Cn),l!==null){Et=l;return}if(s=s.sibling,s!==null){Et=s;return}Et=s=i}while(s!==null);Ct===0&&(Ct=5)}function Ds(i,s,l){var h=qe,p=jn.transition;try{jn.transition=null,qe=1,LI(i,s,l,h)}finally{jn.transition=p,qe=h}return null}function LI(i,s,l,h){do bo();while(Di!==null);if(Ze&6)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var v=l.lanes|l.childLanes;if(nt(i,v),i===Mt&&(Et=Mt=null,Ft=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Uu||(Uu=!0,Bm(bn,function(){return bo(),null})),v=(l.flags&15990)!==0,l.subtreeFlags&15990||v){v=jn.transition,jn.transition=null;var S=qe;qe=1;var b=Ze;Ze|=4,Sd.current=null,EI(i,l),Pm(l,i),qS(xh),Ti=!!Ah,xh=Ah=null,i.current=l,wI(l),ph(),Ze=b,qe=S,jn.transition=v}else i.current=l;if(Uu&&(Uu=!1,Di=i,ju=p),v=i.pendingLanes,v===0&&(Oi=null),zl(l.stateNode),hn(i,rt()),s!==null)for(h=i.onRecoverableError,l=0;l<s.length;l++)p=s[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(Vu)throw Vu=!1,i=Cd,Cd=null,i;return ju&1&&i.tag!==0&&bo(),v=i.pendingLanes,v&1?i===Ld?qa++:(qa=0,Ld=i):qa=0,Ai(),null}function bo(){if(Di!==null){var i=Si(ju),s=jn.transition,l=qe;try{if(jn.transition=null,qe=16>i?16:i,Di===null)var h=!1;else{if(i=Di,Di=null,ju=0,Ze&6)throw Error(t(331));var p=Ze;for(Ze|=4,ve=i.current;ve!==null;){var v=ve,S=v.child;if(ve.flags&16){var b=v.deletions;if(b!==null){for(var V=0;V<b.length;V++){var K=b[V];for(ve=K;ve!==null;){var ae=ve;switch(ae.tag){case 0:case 11:case 15:$a(8,ae,v)}var le=ae.child;if(le!==null)le.return=ae,ve=le;else for(;ve!==null;){ae=ve;var oe=ae.sibling,fe=ae.return;if(Sm(ae),ae===K){ve=null;break}if(oe!==null){oe.return=fe,ve=oe;break}ve=fe}}}var Ee=v.alternate;if(Ee!==null){var we=Ee.child;if(we!==null){Ee.child=null;do{var mt=we.sibling;we.sibling=null,we=mt}while(we!==null)}}ve=v}}if(v.subtreeFlags&2064&&S!==null)S.return=v,ve=S;else e:for(;ve!==null;){if(v=ve,v.flags&2048)switch(v.tag){case 0:case 11:case 15:$a(9,v,v.return)}var B=v.sibling;if(B!==null){B.return=v.return,ve=B;break e}ve=v.return}}var j=i.current;for(ve=j;ve!==null;){S=ve;var z=S.child;if(S.subtreeFlags&2064&&z!==null)z.return=S,ve=z;else e:for(S=j;ve!==null;){if(b=ve,b.flags&2048)try{switch(b.tag){case 0:case 11:case 15:Ou(9,b)}}catch(Se){gt(b,b.return,Se)}if(b===S){ve=null;break e}var ue=b.sibling;if(ue!==null){ue.return=b.return,ve=ue;break e}ve=b.return}}if(Ze=p,Ai(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(ys,i)}catch{}h=!0}return h}finally{qe=l,jn.transition=s}}return!1}function Um(i,s,l){s=ko(l,s),s=nm(i,s,1),i=bi(i,s,1),s=nn(),i!==null&&(Ei(i,1,s),hn(i,s))}function gt(i,s,l){if(i.tag===3)Um(i,i,l);else for(;s!==null;){if(s.tag===3){Um(s,i,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Oi===null||!Oi.has(h))){i=ko(l,i),i=rm(s,i,1),s=bi(s,i,1),i=nn(),s!==null&&(Ei(s,1,i),hn(s,i));break}}s=s.return}}function PI(i,s,l){var h=i.pingCache;h!==null&&h.delete(s),s=nn(),i.pingedLanes|=i.suspendedLanes&l,Mt===i&&(Ft&l)===l&&(Ct===4||Ct===3&&(Ft&130023424)===Ft&&500>rt()-Td?Os(i,0):Id|=l),hn(i,s)}function jm(i,s){s===0&&(i.mode&1?(s=eo,eo<<=1,!(eo&130023424)&&(eo=4194304)):s=1);var l=nn();i=Qr(i,s),i!==null&&(Ei(i,s,l),hn(i,l))}function kI(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),jm(i,l)}function RI(i,s){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),jm(i,l)}var Fm;Fm=function(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps||an.current)un=!0;else{if(!(i.lanes&l)&&!(s.flags&128))return un=!1,mI(i,s,l);un=!!(i.flags&131072)}else un=!1,ct&&s.flags&1048576&&_g(s,vu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;bu(i,s),i=s.pendingProps;var p=Eo(s,Wt.current);Lo(s,l),p=td(null,s,h,i,p,l);var v=nd();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,ln(h)?(v=!0,pu(s)):v=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Kh(s),p.updater=Au,s.stateNode=p,p._reactInternals=s,ld(s,h,i,l),s=dd(null,s,h,!0,v,l)):(s.tag=0,ct&&v&&Uh(s),tn(null,s,p,l),s=s.child),s;case 16:h=s.elementType;e:{switch(bu(i,s),i=s.pendingProps,p=h._init,h=p(h._payload),s.type=h,p=s.tag=xI(h),i=sr(h,i),p){case 0:s=hd(null,s,h,i,l);break e;case 1:s=dm(null,s,h,i,l);break e;case 11:s=am(null,s,h,i,l);break e;case 14:s=lm(null,s,h,sr(h.type,i),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:sr(h,p),hd(i,s,h,p,l);case 1:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:sr(h,p),dm(i,s,h,p,l);case 3:e:{if(fm(s),i===null)throw Error(t(387));h=s.pendingProps,v=s.memoizedState,p=v.element,kg(i,s),Iu(s,h,null,l);var S=s.memoizedState;if(h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){p=ko(Error(t(423)),s),s=pm(i,s,h,l,p);break e}else if(h!==p){p=ko(Error(t(424)),s),s=pm(i,s,h,l,p);break e}else for(Tn=Pi(s.stateNode.containerInfo.firstChild),In=s,ct=!0,ir=null,l=Lg(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Io(),h===p){s=Jr(i,s,l);break e}tn(i,s,h,l)}s=s.child}return s;case 5:return xg(s),i===null&&Bh(s),h=s.type,p=s.pendingProps,v=i!==null?i.memoizedProps:null,S=p.children,bh(h,p)?S=null:v!==null&&bh(h,v)&&(s.flags|=32),hm(i,s),tn(i,s,S,l),s.child;case 6:return i===null&&Bh(s),null;case 13:return gm(i,s,l);case 4:return Qh(s,s.stateNode.containerInfo),h=s.pendingProps,i===null?s.child=To(s,null,h,l):tn(i,s,h,l),s.child;case 11:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:sr(h,p),am(i,s,h,p,l);case 7:return tn(i,s,s.pendingProps,l),s.child;case 8:return tn(i,s,s.pendingProps.children,l),s.child;case 12:return tn(i,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,p=s.pendingProps,v=s.memoizedProps,S=p.value,it(Eu,h._currentValue),h._currentValue=S,v!==null)if(rr(v.value,S)){if(v.children===p.children&&!an.current){s=Jr(i,s,l);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var b=v.dependencies;if(b!==null){S=v.child;for(var V=b.firstContext;V!==null;){if(V.context===h){if(v.tag===1){V=Zr(-1,l&-l),V.tag=2;var K=v.updateQueue;if(K!==null){K=K.shared;var ae=K.pending;ae===null?V.next=V:(V.next=ae.next,ae.next=V),K.pending=V}}v.lanes|=l,V=v.alternate,V!==null&&(V.lanes|=l),qh(v.return,l,s),b.lanes|=l;break}V=V.next}}else if(v.tag===10)S=v.type===s.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=l,b=S.alternate,b!==null&&(b.lanes|=l),qh(S,l,s),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===s){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}tn(i,s,p.children,l),s=s.child}return s;case 9:return p=s.type,h=s.pendingProps.children,Lo(s,l),p=Vn(p),h=h(p),s.flags|=1,tn(i,s,h,l),s.child;case 14:return h=s.type,p=sr(h,s.pendingProps),p=sr(h.type,p),lm(i,s,h,p,l);case 15:return um(i,s,s.type,s.pendingProps,l);case 17:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:sr(h,p),bu(i,s),s.tag=1,ln(h)?(i=!0,pu(s)):i=!1,Lo(s,l),em(s,h,p),ld(s,h,p,l),dd(null,s,h,!0,i,l);case 19:return vm(i,s,l);case 22:return cm(i,s,l)}throw Error(t(156,s.tag))};function Bm(i,s){return Ys(i,s)}function AI(i,s,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(i,s,l,h){return new AI(i,s,l,h)}function bd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function xI(i){if(typeof i=="function")return bd(i)?1:0;if(i!=null){if(i=i.$$typeof,i===N)return 11;if(i===Ie)return 14}return 2}function Ui(i,s){var l=i.alternate;return l===null?(l=Fn(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function $u(i,s,l,h,p,v){var S=2;if(h=i,typeof i=="function")bd(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case k:return Ns(l.children,p,v,s);case L:S=8,p|=8;break;case T:return i=Fn(12,l,s,p|2),i.elementType=T,i.lanes=v,i;case A:return i=Fn(13,l,s,p),i.elementType=A,i.lanes=v,i;case _e:return i=Fn(19,l,s,p),i.elementType=_e,i.lanes=v,i;case Ce:return Wu(l,p,v,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case x:S=10;break e;case O:S=9;break e;case N:S=11;break e;case Ie:S=14;break e;case Ae:S=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return s=Fn(S,l,s,p),s.elementType=i,s.type=h,s.lanes=v,s}function Ns(i,s,l,h){return i=Fn(7,i,h,s),i.lanes=l,i}function Wu(i,s,l,h){return i=Fn(22,i,h,s),i.elementType=Ce,i.lanes=l,i.stateNode={isHidden:!1},i}function Md(i,s,l){return i=Fn(6,i,null,s),i.lanes=l,i}function Od(i,s,l){return s=Fn(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function bI(i,s,l,h,p){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_i(0),this.expirationTimes=_i(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Dd(i,s,l,h,p,v,S,b,V){return i=new bI(i,s,l,b,V),s===1?(s=1,v===!0&&(s|=8)):s=0,v=Fn(3,null,null,s),i.current=v,v.stateNode=i,v.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kh(v),i}function MI(i,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:h==null?null:""+h,children:i,containerInfo:s,implementation:l}}function zm(i){if(!i)return Ri;i=i._reactInternals;e:{if(Zn(i)!==i||i.tag!==1)throw Error(t(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(ln(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(ln(l))return mg(i,l,s)}return s}function $m(i,s,l,h,p,v,S,b,V){return i=Dd(l,h,!0,i,p,v,S,b,V),i.context=zm(null),l=i.current,h=nn(),p=Ni(l),v=Zr(h,p),v.callback=s??null,bi(l,v,p),i.current.lanes=p,Ei(i,p,h),hn(i,h),i}function Hu(i,s,l,h){var p=s.current,v=nn(),S=Ni(p);return l=zm(l),s.context===null?s.context=l:s.pendingContext=l,s=Zr(v,S),s.payload={element:i},h=h===void 0?null:h,h!==null&&(s.callback=h),i=bi(p,s,S),i!==null&&(lr(i,p,S,v),Su(i,p,S)),S}function qu(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Wm(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function Nd(i,s){Wm(i,s),(i=i.alternate)&&Wm(i,s)}function OI(){return null}var Hm=typeof reportError=="function"?reportError:function(i){console.error(i)};function Vd(i){this._internalRoot=i}Gu.prototype.render=Vd.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(t(409));Hu(i,s,null,null)},Gu.prototype.unmount=Vd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Ms(function(){Hu(null,i,null,null)}),s[Hr]=null}};function Gu(i){this._internalRoot=i}Gu.prototype.unstable_scheduleHydration=function(i){if(i){var s=Gl();i={blockedOn:null,target:i,priority:s};for(var l=0;l<Ir.length&&s!==0&&s<Ir[l].priority;l++);Ir.splice(l,0,i),l===0&&Zl(i)}};function Ud(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ku(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function qm(){}function DI(i,s,l,h,p){if(p){if(typeof h=="function"){var v=h;h=function(){var K=qu(S);v.call(K)}}var S=$m(s,h,i,0,null,!1,!1,"",qm);return i._reactRootContainer=S,i[Hr]=S.current,Aa(i.nodeType===8?i.parentNode:i),Ms(),S}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var b=h;h=function(){var K=qu(V);b.call(K)}}var V=Dd(i,0,!1,null,null,!1,!1,"",qm);return i._reactRootContainer=V,i[Hr]=V.current,Aa(i.nodeType===8?i.parentNode:i),Ms(function(){Hu(s,V,l,h)}),V}function Qu(i,s,l,h,p){var v=l._reactRootContainer;if(v){var S=v;if(typeof p=="function"){var b=p;p=function(){var V=qu(S);b.call(V)}}Hu(s,S,i,p)}else S=DI(l,s,i,p,h);return qu(S)}Hl=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var l=yi(s.pendingLanes);l!==0&&(wi(s,l|1),hn(s,rt()),!(Ze&6)&&(xo=rt()+500,Ai()))}break;case 13:Ms(function(){var h=Qr(i,1);if(h!==null){var p=nn();lr(h,i,1,p)}}),Nd(i,1)}},to=function(i){if(i.tag===13){var s=Qr(i,134217728);if(s!==null){var l=nn();lr(s,i,134217728,l)}Nd(i,134217728)}},ql=function(i){if(i.tag===13){var s=Ni(i),l=Qr(i,s);if(l!==null){var h=nn();lr(l,i,s,h)}Nd(i,s)}},Gl=function(){return qe},Kl=function(i,s){var l=qe;try{return qe=i,s()}finally{qe=l}},jr=function(i,s,l){switch(s){case"input":if(dr(i,l),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==i&&h.form===i.form){var p=du(h);if(!p)throw Error(t(90));Rt(h),dr(h,p)}}}break;case"textarea":Ur(i,l);break;case"select":s=l.value,s!=null&&rn(i,!!l.multiple,s,!1)}},Er=Rd,wr=Ms;var NI={usingClientEntryPoint:!1,Events:[Ma,yo,du,yn,_r,Rd]},Ga={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VI={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=pa(i),i===null?null:i.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||OI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{ys=Zu.inject(VI),_n=Zu}catch{}}return dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NI,dn.createPortal=function(i,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ud(s))throw Error(t(200));return MI(i,s,null,l)},dn.createRoot=function(i,s){if(!Ud(i))throw Error(t(299));var l=!1,h="",p=Hm;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=Dd(i,1,!1,null,null,l,!1,h,p),i[Hr]=s.current,Aa(i.nodeType===8?i.parentNode:i),new Vd(s)},dn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=pa(s),i=i===null?null:i.stateNode,i},dn.flushSync=function(i){return Ms(i)},dn.hydrate=function(i,s,l){if(!Ku(s))throw Error(t(200));return Qu(null,i,s,!0,l)},dn.hydrateRoot=function(i,s,l){if(!Ud(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,v="",S=Hm;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),s=$m(s,null,i,1,l??null,p,!1,v,S),i[Hr]=s.current,Aa(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,p]:s.mutableSourceEagerHydrationData.push(l,p);return new Gu(s)},dn.render=function(i,s,l){if(!Ku(s))throw Error(t(200));return Qu(null,i,s,!1,l)},dn.unmountComponentAtNode=function(i){if(!Ku(i))throw Error(t(40));return i._reactRootContainer?(Ms(function(){Qu(null,null,i,!1,function(){i._reactRootContainer=null,i[Hr]=null})}),!0):!1},dn.unstable_batchedUpdates=Rd,dn.unstable_renderSubtreeIntoContainer=function(i,s,l,h){if(!Ku(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Qu(i,s,l,!1,h)},dn.version="18.3.1-next-f1338f8080-20240426",dn}var ev;function q_(){if(ev)return Bd.exports;ev=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bd.exports=KI(),Bd.exports}var tv;function QI(){if(tv)return Ju;tv=1;var n=q_();return Ju.createRoot=n.createRoot,Ju.hydrateRoot=n.hydrateRoot,Ju}var ZI=QI(),ea=q_();/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cl.apply(this,arguments)}var Gi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Gi||(Gi={}));const nv="popstate";function JI(n){n===void 0&&(n={});function e(r,o){let{pathname:a,search:u,hash:d}=r.location;return lf("",{pathname:a,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:mc(o)}return XI(e,t,null,n)}function yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function G_(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YI(){return Math.random().toString(36).substr(2,8)}function rv(n,e){return{usr:n.state,key:n.key,idx:e}}function lf(n,e,t,r){return t===void 0&&(t=null),cl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ta(e):e,{state:t,key:e&&e.key||r||YI()})}function mc(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ta(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function XI(n,e,t,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:a=!1}=r,u=o.history,d=Gi.Pop,f=null,g=_();g==null&&(g=0,u.replaceState(cl({},u.state,{idx:g}),""));function _(){return(u.state||{idx:null}).idx}function w(){d=Gi.Pop;let M=_(),q=M==null?null:M-g;g=M,f&&f({action:d,location:D.location,delta:q})}function I(M,q){d=Gi.Push;let $=lf(D.location,M,q);g=_()+1;let ee=rv($,g),W=D.createHref($);try{u.pushState(ee,"",W)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;o.location.assign(W)}a&&f&&f({action:d,location:D.location,delta:1})}function R(M,q){d=Gi.Replace;let $=lf(D.location,M,q);g=_();let ee=rv($,g),W=D.createHref($);u.replaceState(ee,"",W),a&&f&&f({action:d,location:D.location,delta:0})}function P(M){let q=o.location.origin!=="null"?o.location.origin:o.location.href,$=typeof M=="string"?M:mc(M);return $=$.replace(/ $/,"%20"),yt(q,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,q)}let D={get action(){return d},get location(){return n(o,u)},listen(M){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(nv,w),f=M,()=>{o.removeEventListener(nv,w),f=null}},createHref(M){return e(o,M)},createURL:P,encodeLocation(M){let q=P(M);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:I,replace:R,go(M){return u.go(M)}};return D}var iv;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(iv||(iv={}));function eT(n,e,t){return t===void 0&&(t="/"),tT(n,e,t)}function tT(n,e,t,r){let o=typeof e=="string"?ta(e):e,a=Uf(o.pathname||"/",t);if(a==null)return null;let u=K_(n);nT(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let g=pT(a);d=hT(u[f],g)}return d}function K_(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let o=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(yt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let g=Zi([r,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(yt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),K_(a.children,e,_,g)),!(a.path==null&&!a.index)&&e.push({path:g,score:uT(g,a.index),routesMeta:_})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let f of Q_(a.path))o(a,u,f)}),e}function Q_(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let u=Q_(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function nT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:cT(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const rT=/^:[\w-]+$/,iT=3,sT=2,oT=1,aT=10,lT=-2,sv=n=>n==="*";function uT(n,e){let t=n.split("/"),r=t.length;return t.some(sv)&&(r+=lT),e&&(r+=sT),t.filter(o=>!sv(o)).reduce((o,a)=>o+(rT.test(a)?iT:a===""?oT:aT),r)}function cT(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function hT(n,e,t){let{routesMeta:r}=n,o={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],g=d===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",w=dT({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},_),I=f.route;if(!w)return null;Object.assign(o,w.params),u.push({params:o,pathname:Zi([a,w.pathname]),pathnameBase:yT(Zi([a,w.pathnameBase])),route:I}),w.pathnameBase!=="/"&&(a=Zi([a,w.pathnameBase]))}return u}function dT(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=fT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:r.reduce((g,_,w)=>{let{paramName:I,isOptional:R}=_;if(I==="*"){let D=d[w]||"";u=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const P=d[w];return R&&!P?g[I]=void 0:g[I]=(P||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:u,pattern:n}}function fT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),G_(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function pT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return G_(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Uf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function gT(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?ta(n):n;return{pathname:t?t.startsWith("/")?t:mT(t,e):e,search:_T(r),hash:ET(o)}}function mT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Wd(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jf(n,e){let t=vT(n);return e?t.map((r,o)=>o===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Ff(n,e,t,r){r===void 0&&(r=!1);let o;typeof n=="string"?o=ta(n):(o=cl({},n),yt(!o.pathname||!o.pathname.includes("?"),Wd("?","pathname","search",o)),yt(!o.pathname||!o.pathname.includes("#"),Wd("#","pathname","hash",o)),yt(!o.search||!o.search.includes("#"),Wd("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let I=u.split("/");for(;I[0]==="..";)I.shift(),w-=1;o.pathname=I.join("/")}d=w>=0?e[w]:"/"}let f=gT(o,d),g=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(g||_)&&(f.pathname+="/"),f}const Zi=n=>n.join("/").replace(/\/\/+/g,"/"),yT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),_T=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ET=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function wT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Z_=["post","put","patch","delete"];new Set(Z_);const ST=["get",...Z_];new Set(ST);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hl.apply(this,arguments)}const Bf=y.createContext(null),IT=y.createContext(null),ls=y.createContext(null),Hc=y.createContext(null),ci=y.createContext({outlet:null,matches:[],isDataRoute:!1}),J_=y.createContext(null);function TT(n,e){let{relative:t}=e===void 0?{}:e;na()||yt(!1);let{basename:r,navigator:o}=y.useContext(ls),{hash:a,pathname:u,search:d}=eE(n,{relative:t}),f=u;return r!=="/"&&(f=u==="/"?r:Zi([r,u])),o.createHref({pathname:f,search:d,hash:a})}function na(){return y.useContext(Hc)!=null}function Tl(){return na()||yt(!1),y.useContext(Hc).location}function Y_(n){y.useContext(ls).static||y.useLayoutEffect(n)}function Cl(){let{isDataRoute:n}=y.useContext(ci);return n?VT():CT()}function CT(){na()||yt(!1);let n=y.useContext(Bf),{basename:e,future:t,navigator:r}=y.useContext(ls),{matches:o}=y.useContext(ci),{pathname:a}=Tl(),u=JSON.stringify(jf(o,t.v7_relativeSplatPath)),d=y.useRef(!1);return Y_(()=>{d.current=!0}),y.useCallback(function(g,_){if(_===void 0&&(_={}),!d.current)return;if(typeof g=="number"){r.go(g);return}let w=Ff(g,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Zi([e,w.pathname])),(_.replace?r.replace:r.push)(w,_.state,_)},[e,r,u,a,n])}function X_(){let{matches:n}=y.useContext(ci),e=n[n.length-1];return e?e.params:{}}function eE(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=y.useContext(ls),{matches:o}=y.useContext(ci),{pathname:a}=Tl(),u=JSON.stringify(jf(o,r.v7_relativeSplatPath));return y.useMemo(()=>Ff(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function LT(n,e){return PT(n,e)}function PT(n,e,t,r){na()||yt(!1);let{navigator:o,static:a}=y.useContext(ls),{matches:u}=y.useContext(ci),d=u[u.length-1],f=d?d.params:{};d&&d.pathname;let g=d?d.pathnameBase:"/";d&&d.route;let _=Tl(),w;if(e){var I;let q=typeof e=="string"?ta(e):e;g==="/"||(I=q.pathname)!=null&&I.startsWith(g)||yt(!1),w=q}else w=_;let R=w.pathname||"/",P=R;if(g!=="/"){let q=g.replace(/^\//,"").split("/");P="/"+R.replace(/^\//,"").split("/").slice(q.length).join("/")}let D=eT(n,{pathname:P}),M=bT(D&&D.map(q=>Object.assign({},q,{params:Object.assign({},f,q.params),pathname:Zi([g,o.encodeLocation?o.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:Zi([g,o.encodeLocation?o.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),u,t,r);return e&&M?y.createElement(Hc.Provider,{value:{location:hl({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Gi.Pop}},M):M}function kT(){let n=NT(),e=wT(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),t?y.createElement("pre",{style:o},t):null,null)}const RT=y.createElement(kT,null);class AT extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?y.createElement(ci.Provider,{value:this.props.routeContext},y.createElement(J_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xT(n){let{routeContext:e,match:t,children:r}=n,o=y.useContext(Bf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(ci.Provider,{value:e},r)}function bT(n,e,t,r){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=u.findIndex(w=>w.route.id&&(d==null?void 0:d[w.route.id])!==void 0);_>=0||yt(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,g=-1;if(t&&r&&r.v7_partialHydration)for(let _=0;_<u.length;_++){let w=u[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=_),w.route.id){let{loaderData:I,errors:R}=t,P=w.route.loader&&I[w.route.id]===void 0&&(!R||R[w.route.id]===void 0);if(w.route.lazy||P){f=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((_,w,I)=>{let R,P=!1,D=null,M=null;t&&(R=d&&w.route.id?d[w.route.id]:void 0,D=w.route.errorElement||RT,f&&(g<0&&I===0?(UT("route-fallback"),P=!0,M=null):g===I&&(P=!0,M=w.route.hydrateFallbackElement||null)));let q=e.concat(u.slice(0,I+1)),$=()=>{let ee;return R?ee=D:P?ee=M:w.route.Component?ee=y.createElement(w.route.Component,null):w.route.element?ee=w.route.element:ee=_,y.createElement(xT,{match:w,routeContext:{outlet:_,matches:q,isDataRoute:t!=null},children:ee})};return t&&(w.route.ErrorBoundary||w.route.errorElement||I===0)?y.createElement(AT,{location:t.location,revalidation:t.revalidation,component:D,error:R,children:$(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):$()},null)}var tE=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(tE||{}),vc=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(vc||{});function MT(n){let e=y.useContext(Bf);return e||yt(!1),e}function OT(n){let e=y.useContext(IT);return e||yt(!1),e}function DT(n){let e=y.useContext(ci);return e||yt(!1),e}function nE(n){let e=DT(),t=e.matches[e.matches.length-1];return t.route.id||yt(!1),t.route.id}function NT(){var n;let e=y.useContext(J_),t=OT(vc.UseRouteError),r=nE(vc.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function VT(){let{router:n}=MT(tE.UseNavigateStable),e=nE(vc.UseNavigateStable),t=y.useRef(!1);return Y_(()=>{t.current=!0}),y.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,hl({fromRouteId:e},a)))},[n,e])}const ov={};function UT(n,e,t){ov[n]||(ov[n]=!0)}function jT(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function FT(n){let{to:e,replace:t,state:r,relative:o}=n;na()||yt(!1);let{future:a,static:u}=y.useContext(ls),{matches:d}=y.useContext(ci),{pathname:f}=Tl(),g=Cl(),_=Ff(e,jf(d,a.v7_relativeSplatPath),f,o==="path"),w=JSON.stringify(_);return y.useEffect(()=>g(JSON.parse(w),{replace:t,state:r,relative:o}),[g,w,o,t,r]),null}function Bi(n){yt(!1)}function BT(n){let{basename:e="/",children:t=null,location:r,navigationType:o=Gi.Pop,navigator:a,static:u=!1,future:d}=n;na()&&yt(!1);let f=e.replace(/^\/*/,"/"),g=y.useMemo(()=>({basename:f,navigator:a,static:u,future:hl({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof r=="string"&&(r=ta(r));let{pathname:_="/",search:w="",hash:I="",state:R=null,key:P="default"}=r,D=y.useMemo(()=>{let M=Uf(_,f);return M==null?null:{location:{pathname:M,search:w,hash:I,state:R,key:P},navigationType:o}},[f,_,w,I,R,P,o]);return D==null?null:y.createElement(ls.Provider,{value:g},y.createElement(Hc.Provider,{children:t,value:D}))}function zT(n){let{children:e,location:t}=n;return LT(uf(e),t)}new Promise(()=>{});function uf(n,e){e===void 0&&(e=[]);let t=[];return y.Children.forEach(n,(r,o)=>{if(!y.isValidElement(r))return;let a=[...e,o];if(r.type===y.Fragment){t.push.apply(t,uf(r.props.children,a));return}r.type!==Bi&&yt(!1),!r.props.index||!r.props.children||yt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=uf(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cf(){return cf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cf.apply(this,arguments)}function $T(n,e){if(n==null)return{};var t={},r=Object.keys(n),o,a;for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function WT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function HT(n,e){return n.button===0&&(!e||e==="_self")&&!WT(n)}const qT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GT="6";try{window.__reactRouterVersion=GT}catch{}const KT="startTransition",av=HI[KT];function QT(n){let{basename:e,children:t,future:r,window:o}=n,a=y.useRef();a.current==null&&(a.current=JI({window:o,v5Compat:!0}));let u=a.current,[d,f]=y.useState({action:u.action,location:u.location}),{v7_startTransition:g}=r||{},_=y.useCallback(w=>{g&&av?av(()=>f(w)):f(w)},[f,g]);return y.useLayoutEffect(()=>u.listen(_),[u,_]),y.useEffect(()=>jT(r),[r]),y.createElement(BT,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:r})}const ZT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vo=y.forwardRef(function(e,t){let{onClick:r,relative:o,reloadDocument:a,replace:u,state:d,target:f,to:g,preventScrollReset:_,viewTransition:w}=e,I=$T(e,qT),{basename:R}=y.useContext(ls),P,D=!1;if(typeof g=="string"&&JT.test(g)&&(P=g,ZT))try{let ee=new URL(window.location.href),W=g.startsWith("//")?new URL(ee.protocol+g):new URL(g),H=Uf(W.pathname,R);W.origin===ee.origin&&H!=null?g=H+W.search+W.hash:D=!0}catch{}let M=TT(g,{relative:o}),q=YT(g,{replace:u,state:d,target:f,preventScrollReset:_,relative:o,viewTransition:w});function $(ee){r&&r(ee),ee.defaultPrevented||q(ee)}return y.createElement("a",cf({},I,{href:P||M,onClick:D||a?r:$,ref:t,target:f}))});var lv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(lv||(lv={}));var uv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(uv||(uv={}));function YT(n,e){let{target:t,replace:r,state:o,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,f=Cl(),g=Tl(),_=eE(n,{relative:u});return y.useCallback(w=>{if(HT(w,t)){w.preventDefault();let I=r!==void 0?r:mc(g)===mc(_);f(n,{replace:I,state:o,preventScrollReset:a,relative:u,viewTransition:d})}},[g,f,_,r,o,t,n,a,u,d])}var cv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},XT=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},iE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,f=o+2<n.length,g=f?n[o+2]:0,_=a>>2,w=(a&3)<<4|d>>4;let I=(d&15)<<2|g>>6,R=g&63;f||(R=64,u||(I=64)),r.push(t[_],t[w],t[I],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):XT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||g==null||w==null)throw new eC;const I=a<<2|d>>4;if(r.push(I),g!==64){const R=d<<4&240|g>>2;if(r.push(R),w!==64){const P=g<<6&192|w;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class eC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tC=function(n){const e=rE(n);return iE.encodeByteArray(e,!0)},yc=function(n){return tC(n).replace(/\./g,"")},sE=function(n){try{return iE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=()=>nC().__FIREBASE_DEFAULTS__,iC=()=>{if(typeof process>"u"||typeof cv>"u")return;const n=cv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sE(n[1]);return e&&JSON.parse(e)},qc=()=>{try{return rC()||iC()||sC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},oE=n=>{var e,t;return(t=(e=qc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},oC=n=>{const e=oE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},aE=()=>{var n;return(n=qc())===null||n===void 0?void 0:n.config},lE=n=>{var e;return(e=qc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[yc(JSON.stringify(t)),yc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function cC(){var n;const e=(n=qc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function fC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pC(){const n=Jt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gC(){return!cC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mC(){try{return typeof indexedDB=="object"}catch{return!1}}function vC(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="FirebaseError";class hi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=yC,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?_C(a,r):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new hi(o,d,r)}}function _C(n,e){return n.replace(EC,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const EC=/\{\$([^}]+)}/g;function wC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _c(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],u=e[o];if(hv(a)&&hv(u)){if(!_c(a,u))return!1}else if(a!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function hv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ya(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,a]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Xa(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function SC(n,e){const t=new IC(n,e);return t.subscribe.bind(t)}class IC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");TC(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Hd),o.error===void 0&&(o.error=Hd),o.complete===void 0&&(o.complete=Hd);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(n){return n&&n._delegate?n._delegate:n}class zs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new aC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PC(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LC(n){return n===Us?void 0:n}function PC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new CC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const RC={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},AC=$e.INFO,xC={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},bC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=xC[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zf{constructor(e){this.name=e,this._logLevel=AC,this._logHandler=bC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const MC=(n,e)=>e.some(t=>n instanceof t);let dv,fv;function OC(){return dv||(dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DC(){return fv||(fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uE=new WeakMap,hf=new WeakMap,cE=new WeakMap,qd=new WeakMap,$f=new WeakMap;function NC(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Ji(n.result)),o()},u=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&uE.set(t,n)}).catch(()=>{}),$f.set(e,n),e}function VC(n){if(hf.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});hf.set(n,e)}let df={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ji(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UC(n){df=n(df)}function jC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Gd(this),e,...t);return cE.set(r,e.sort?e.sort():[e]),Ji(r)}:DC().includes(n)?function(...e){return n.apply(Gd(this),e),Ji(uE.get(this))}:function(...e){return Ji(n.apply(Gd(this),e))}}function FC(n){return typeof n=="function"?jC(n):(n instanceof IDBTransaction&&VC(n),MC(n,OC())?new Proxy(n,df):n)}function Ji(n){if(n instanceof IDBRequest)return NC(n);if(qd.has(n))return qd.get(n);const e=FC(n);return e!==n&&(qd.set(n,e),$f.set(e,n)),e}const Gd=n=>$f.get(n);function BC(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Ji(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Ji(u.result),f.oldVersion,f.newVersion,Ji(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const zC=["get","getKey","getAll","getAllKeys","count"],$C=["put","add","delete","clear"],Kd=new Map;function pv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Kd.get(e))return Kd.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=$C.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||zC.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let g=f.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),o&&f.done]))[0]};return Kd.set(e,a),a}UC(n=>({...n,get:(e,t,r)=>pv(e,t)||n.get(e,t,r),has:(e,t)=>!!pv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function HC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ff="@firebase/app",gv="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new zf("@firebase/app"),qC="@firebase/app-compat",GC="@firebase/analytics-compat",KC="@firebase/analytics",QC="@firebase/app-check-compat",ZC="@firebase/app-check",JC="@firebase/auth",YC="@firebase/auth-compat",XC="@firebase/database",e0="@firebase/data-connect",t0="@firebase/database-compat",n0="@firebase/functions",r0="@firebase/functions-compat",i0="@firebase/installations",s0="@firebase/installations-compat",o0="@firebase/messaging",a0="@firebase/messaging-compat",l0="@firebase/performance",u0="@firebase/performance-compat",c0="@firebase/remote-config",h0="@firebase/remote-config-compat",d0="@firebase/storage",f0="@firebase/storage-compat",p0="@firebase/firestore",g0="@firebase/vertexai",m0="@firebase/firestore-compat",v0="firebase",y0="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="[DEFAULT]",_0={[ff]:"fire-core",[qC]:"fire-core-compat",[KC]:"fire-analytics",[GC]:"fire-analytics-compat",[ZC]:"fire-app-check",[QC]:"fire-app-check-compat",[JC]:"fire-auth",[YC]:"fire-auth-compat",[XC]:"fire-rtdb",[e0]:"fire-data-connect",[t0]:"fire-rtdb-compat",[n0]:"fire-fn",[r0]:"fire-fn-compat",[i0]:"fire-iid",[s0]:"fire-iid-compat",[o0]:"fire-fcm",[a0]:"fire-fcm-compat",[l0]:"fire-perf",[u0]:"fire-perf-compat",[c0]:"fire-rc",[h0]:"fire-rc-compat",[d0]:"fire-gcs",[f0]:"fire-gcs-compat",[p0]:"fire-fst",[m0]:"fire-fst-compat",[g0]:"fire-vertex","fire-js":"fire-js",[v0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Map,E0=new Map,gf=new Map;function mv(n,e){try{n.container.addComponent(e)}catch(t){ii.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ho(n){const e=n.name;if(gf.has(e))return ii.debug(`There were multiple attempts to register component ${e}.`),!1;gf.set(e,n);for(const t of Ec.values())mv(t,n);for(const t of E0.values())mv(t,n);return!0}function Wf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function br(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new Ll("app","Firebase",w0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=y0;function hE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:pf,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw Yi.create("bad-app-name",{appName:String(o)});if(t||(t=aE()),!t)throw Yi.create("no-options");const a=Ec.get(o);if(a){if(_c(t,a.options)&&_c(r,a.config))return a;throw Yi.create("duplicate-app",{appName:o})}const u=new kC(o);for(const f of gf.values())u.addComponent(f);const d=new S0(t,r,u);return Ec.set(o,d),d}function dE(n=pf){const e=Ec.get(n);if(!e&&n===pf&&aE())return hE();if(!e)throw Yi.create("no-app",{appName:n});return e}function Xi(n,e,t){var r;let o=(r=_0[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ii.warn(d.join(" "));return}Ho(new zs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="firebase-heartbeat-database",T0=1,dl="firebase-heartbeat-store";let Qd=null;function fE(){return Qd||(Qd=BC(I0,T0,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(dl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yi.create("idb-open",{originalErrorMessage:n.message})})),Qd}async function C0(n){try{const t=(await fE()).transaction(dl),r=await t.objectStore(dl).get(pE(n));return await t.done,r}catch(e){if(e instanceof hi)ii.warn(e.message);else{const t=Yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ii.warn(t.message)}}}async function vv(n,e){try{const r=(await fE()).transaction(dl,"readwrite");await r.objectStore(dl).put(e,pE(n)),await r.done}catch(t){if(t instanceof hi)ii.warn(t.message);else{const r=Yi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ii.warn(r.message)}}}function pE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=1024,P0=30*24*60*60*1e3;class k0{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new A0(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=yv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=P0}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ii.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=yv(),{heartbeatsToSend:r,unsentEntries:o}=R0(this._heartbeatsCache.heartbeats),a=yc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ii.warn(t),""}}}function yv(){return new Date().toISOString().substring(0,10)}function R0(n,e=L0){const t=[];let r=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),_v(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),_v(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class A0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mC()?vC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await C0(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return vv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return vv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function _v(n){return yc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(n){Ho(new zs("platform-logger",e=>new WC(e),"PRIVATE")),Ho(new zs("heartbeat",e=>new k0(e),"PRIVATE")),Xi(ff,gv,n),Xi(ff,gv,"esm2017"),Xi("fire-js","")}x0("");var Ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,gE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,L){function T(){}T.prototype=L.prototype,k.D=L.prototype,k.prototype=new T,k.prototype.constructor=k,k.C=function(x,O,N){for(var A=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)A[_e-2]=arguments[_e];return L.prototype[O].apply(x,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,L,T){T||(T=0);var x=Array(16);if(typeof L=="string")for(var O=0;16>O;++O)x[O]=L.charCodeAt(T++)|L.charCodeAt(T++)<<8|L.charCodeAt(T++)<<16|L.charCodeAt(T++)<<24;else for(O=0;16>O;++O)x[O]=L[T++]|L[T++]<<8|L[T++]<<16|L[T++]<<24;L=k.g[0],T=k.g[1],O=k.g[2];var N=k.g[3],A=L+(N^T&(O^N))+x[0]+3614090360&4294967295;L=T+(A<<7&4294967295|A>>>25),A=N+(O^L&(T^O))+x[1]+3905402710&4294967295,N=L+(A<<12&4294967295|A>>>20),A=O+(T^N&(L^T))+x[2]+606105819&4294967295,O=N+(A<<17&4294967295|A>>>15),A=T+(L^O&(N^L))+x[3]+3250441966&4294967295,T=O+(A<<22&4294967295|A>>>10),A=L+(N^T&(O^N))+x[4]+4118548399&4294967295,L=T+(A<<7&4294967295|A>>>25),A=N+(O^L&(T^O))+x[5]+1200080426&4294967295,N=L+(A<<12&4294967295|A>>>20),A=O+(T^N&(L^T))+x[6]+2821735955&4294967295,O=N+(A<<17&4294967295|A>>>15),A=T+(L^O&(N^L))+x[7]+4249261313&4294967295,T=O+(A<<22&4294967295|A>>>10),A=L+(N^T&(O^N))+x[8]+1770035416&4294967295,L=T+(A<<7&4294967295|A>>>25),A=N+(O^L&(T^O))+x[9]+2336552879&4294967295,N=L+(A<<12&4294967295|A>>>20),A=O+(T^N&(L^T))+x[10]+4294925233&4294967295,O=N+(A<<17&4294967295|A>>>15),A=T+(L^O&(N^L))+x[11]+2304563134&4294967295,T=O+(A<<22&4294967295|A>>>10),A=L+(N^T&(O^N))+x[12]+1804603682&4294967295,L=T+(A<<7&4294967295|A>>>25),A=N+(O^L&(T^O))+x[13]+4254626195&4294967295,N=L+(A<<12&4294967295|A>>>20),A=O+(T^N&(L^T))+x[14]+2792965006&4294967295,O=N+(A<<17&4294967295|A>>>15),A=T+(L^O&(N^L))+x[15]+1236535329&4294967295,T=O+(A<<22&4294967295|A>>>10),A=L+(O^N&(T^O))+x[1]+4129170786&4294967295,L=T+(A<<5&4294967295|A>>>27),A=N+(T^O&(L^T))+x[6]+3225465664&4294967295,N=L+(A<<9&4294967295|A>>>23),A=O+(L^T&(N^L))+x[11]+643717713&4294967295,O=N+(A<<14&4294967295|A>>>18),A=T+(N^L&(O^N))+x[0]+3921069994&4294967295,T=O+(A<<20&4294967295|A>>>12),A=L+(O^N&(T^O))+x[5]+3593408605&4294967295,L=T+(A<<5&4294967295|A>>>27),A=N+(T^O&(L^T))+x[10]+38016083&4294967295,N=L+(A<<9&4294967295|A>>>23),A=O+(L^T&(N^L))+x[15]+3634488961&4294967295,O=N+(A<<14&4294967295|A>>>18),A=T+(N^L&(O^N))+x[4]+3889429448&4294967295,T=O+(A<<20&4294967295|A>>>12),A=L+(O^N&(T^O))+x[9]+568446438&4294967295,L=T+(A<<5&4294967295|A>>>27),A=N+(T^O&(L^T))+x[14]+3275163606&4294967295,N=L+(A<<9&4294967295|A>>>23),A=O+(L^T&(N^L))+x[3]+4107603335&4294967295,O=N+(A<<14&4294967295|A>>>18),A=T+(N^L&(O^N))+x[8]+1163531501&4294967295,T=O+(A<<20&4294967295|A>>>12),A=L+(O^N&(T^O))+x[13]+2850285829&4294967295,L=T+(A<<5&4294967295|A>>>27),A=N+(T^O&(L^T))+x[2]+4243563512&4294967295,N=L+(A<<9&4294967295|A>>>23),A=O+(L^T&(N^L))+x[7]+1735328473&4294967295,O=N+(A<<14&4294967295|A>>>18),A=T+(N^L&(O^N))+x[12]+2368359562&4294967295,T=O+(A<<20&4294967295|A>>>12),A=L+(T^O^N)+x[5]+4294588738&4294967295,L=T+(A<<4&4294967295|A>>>28),A=N+(L^T^O)+x[8]+2272392833&4294967295,N=L+(A<<11&4294967295|A>>>21),A=O+(N^L^T)+x[11]+1839030562&4294967295,O=N+(A<<16&4294967295|A>>>16),A=T+(O^N^L)+x[14]+4259657740&4294967295,T=O+(A<<23&4294967295|A>>>9),A=L+(T^O^N)+x[1]+2763975236&4294967295,L=T+(A<<4&4294967295|A>>>28),A=N+(L^T^O)+x[4]+1272893353&4294967295,N=L+(A<<11&4294967295|A>>>21),A=O+(N^L^T)+x[7]+4139469664&4294967295,O=N+(A<<16&4294967295|A>>>16),A=T+(O^N^L)+x[10]+3200236656&4294967295,T=O+(A<<23&4294967295|A>>>9),A=L+(T^O^N)+x[13]+681279174&4294967295,L=T+(A<<4&4294967295|A>>>28),A=N+(L^T^O)+x[0]+3936430074&4294967295,N=L+(A<<11&4294967295|A>>>21),A=O+(N^L^T)+x[3]+3572445317&4294967295,O=N+(A<<16&4294967295|A>>>16),A=T+(O^N^L)+x[6]+76029189&4294967295,T=O+(A<<23&4294967295|A>>>9),A=L+(T^O^N)+x[9]+3654602809&4294967295,L=T+(A<<4&4294967295|A>>>28),A=N+(L^T^O)+x[12]+3873151461&4294967295,N=L+(A<<11&4294967295|A>>>21),A=O+(N^L^T)+x[15]+530742520&4294967295,O=N+(A<<16&4294967295|A>>>16),A=T+(O^N^L)+x[2]+3299628645&4294967295,T=O+(A<<23&4294967295|A>>>9),A=L+(O^(T|~N))+x[0]+4096336452&4294967295,L=T+(A<<6&4294967295|A>>>26),A=N+(T^(L|~O))+x[7]+1126891415&4294967295,N=L+(A<<10&4294967295|A>>>22),A=O+(L^(N|~T))+x[14]+2878612391&4294967295,O=N+(A<<15&4294967295|A>>>17),A=T+(N^(O|~L))+x[5]+4237533241&4294967295,T=O+(A<<21&4294967295|A>>>11),A=L+(O^(T|~N))+x[12]+1700485571&4294967295,L=T+(A<<6&4294967295|A>>>26),A=N+(T^(L|~O))+x[3]+2399980690&4294967295,N=L+(A<<10&4294967295|A>>>22),A=O+(L^(N|~T))+x[10]+4293915773&4294967295,O=N+(A<<15&4294967295|A>>>17),A=T+(N^(O|~L))+x[1]+2240044497&4294967295,T=O+(A<<21&4294967295|A>>>11),A=L+(O^(T|~N))+x[8]+1873313359&4294967295,L=T+(A<<6&4294967295|A>>>26),A=N+(T^(L|~O))+x[15]+4264355552&4294967295,N=L+(A<<10&4294967295|A>>>22),A=O+(L^(N|~T))+x[6]+2734768916&4294967295,O=N+(A<<15&4294967295|A>>>17),A=T+(N^(O|~L))+x[13]+1309151649&4294967295,T=O+(A<<21&4294967295|A>>>11),A=L+(O^(T|~N))+x[4]+4149444226&4294967295,L=T+(A<<6&4294967295|A>>>26),A=N+(T^(L|~O))+x[11]+3174756917&4294967295,N=L+(A<<10&4294967295|A>>>22),A=O+(L^(N|~T))+x[2]+718787259&4294967295,O=N+(A<<15&4294967295|A>>>17),A=T+(N^(O|~L))+x[9]+3951481745&4294967295,k.g[0]=k.g[0]+L&4294967295,k.g[1]=k.g[1]+(O+(A<<21&4294967295|A>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+N&4294967295}r.prototype.u=function(k,L){L===void 0&&(L=k.length);for(var T=L-this.blockSize,x=this.B,O=this.h,N=0;N<L;){if(O==0)for(;N<=T;)o(this,k,N),N+=this.blockSize;if(typeof k=="string"){for(;N<L;)if(x[O++]=k.charCodeAt(N++),O==this.blockSize){o(this,x),O=0;break}}else for(;N<L;)if(x[O++]=k[N++],O==this.blockSize){o(this,x),O=0;break}}this.h=O,this.o+=L},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var L=1;L<k.length-8;++L)k[L]=0;var T=8*this.o;for(L=k.length-8;L<k.length;++L)k[L]=T&255,T/=256;for(this.u(k),k=Array(16),L=T=0;4>L;++L)for(var x=0;32>x;x+=8)k[T++]=this.g[L]>>>x&255;return k};function a(k,L){var T=d;return Object.prototype.hasOwnProperty.call(T,k)?T[k]:T[k]=L(k)}function u(k,L){this.h=L;for(var T=[],x=!0,O=k.length-1;0<=O;O--){var N=k[O]|0;x&&N==L||(T[O]=N,x=!1)}this.g=T}var d={};function f(k){return-128<=k&&128>k?a(k,function(L){return new u([L|0],0>L?-1:0)}):new u([k|0],0>k?-1:0)}function g(k){if(isNaN(k)||!isFinite(k))return w;if(0>k)return M(g(-k));for(var L=[],T=1,x=0;k>=T;x++)L[x]=k/T|0,T*=4294967296;return new u(L,0)}function _(k,L){if(k.length==0)throw Error("number format error: empty string");if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(k.charAt(0)=="-")return M(_(k.substring(1),L));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=g(Math.pow(L,8)),x=w,O=0;O<k.length;O+=8){var N=Math.min(8,k.length-O),A=parseInt(k.substring(O,O+N),L);8>N?(N=g(Math.pow(L,N)),x=x.j(N).add(g(A))):(x=x.j(T),x=x.add(g(A)))}return x}var w=f(0),I=f(1),R=f(16777216);n=u.prototype,n.m=function(){if(D(this))return-M(this).m();for(var k=0,L=1,T=0;T<this.g.length;T++){var x=this.i(T);k+=(0<=x?x:4294967296+x)*L,L*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(P(this))return"0";if(D(this))return"-"+M(this).toString(k);for(var L=g(Math.pow(k,6)),T=this,x="";;){var O=W(T,L).g;T=q(T,O.j(L));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(k);if(T=O,P(T))return N+x;for(;6>N.length;)N="0"+N;x=N+x}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function P(k){if(k.h!=0)return!1;for(var L=0;L<k.g.length;L++)if(k.g[L]!=0)return!1;return!0}function D(k){return k.h==-1}n.l=function(k){return k=q(this,k),D(k)?-1:P(k)?0:1};function M(k){for(var L=k.g.length,T=[],x=0;x<L;x++)T[x]=~k.g[x];return new u(T,~k.h).add(I)}n.abs=function(){return D(this)?M(this):this},n.add=function(k){for(var L=Math.max(this.g.length,k.g.length),T=[],x=0,O=0;O<=L;O++){var N=x+(this.i(O)&65535)+(k.i(O)&65535),A=(N>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);x=A>>>16,N&=65535,A&=65535,T[O]=A<<16|N}return new u(T,T[T.length-1]&-2147483648?-1:0)};function q(k,L){return k.add(M(L))}n.j=function(k){if(P(this)||P(k))return w;if(D(this))return D(k)?M(this).j(M(k)):M(M(this).j(k));if(D(k))return M(this.j(M(k)));if(0>this.l(R)&&0>k.l(R))return g(this.m()*k.m());for(var L=this.g.length+k.g.length,T=[],x=0;x<2*L;x++)T[x]=0;for(x=0;x<this.g.length;x++)for(var O=0;O<k.g.length;O++){var N=this.i(x)>>>16,A=this.i(x)&65535,_e=k.i(O)>>>16,Ie=k.i(O)&65535;T[2*x+2*O]+=A*Ie,$(T,2*x+2*O),T[2*x+2*O+1]+=N*Ie,$(T,2*x+2*O+1),T[2*x+2*O+1]+=A*_e,$(T,2*x+2*O+1),T[2*x+2*O+2]+=N*_e,$(T,2*x+2*O+2)}for(x=0;x<L;x++)T[x]=T[2*x+1]<<16|T[2*x];for(x=L;x<2*L;x++)T[x]=0;return new u(T,0)};function $(k,L){for(;(k[L]&65535)!=k[L];)k[L+1]+=k[L]>>>16,k[L]&=65535,L++}function ee(k,L){this.g=k,this.h=L}function W(k,L){if(P(L))throw Error("division by zero");if(P(k))return new ee(w,w);if(D(k))return L=W(M(k),L),new ee(M(L.g),M(L.h));if(D(L))return L=W(k,M(L)),new ee(M(L.g),L.h);if(30<k.g.length){if(D(k)||D(L))throw Error("slowDivide_ only works with positive integers.");for(var T=I,x=L;0>=x.l(k);)T=H(T),x=H(x);var O=Q(T,1),N=Q(x,1);for(x=Q(x,2),T=Q(T,2);!P(x);){var A=N.add(x);0>=A.l(k)&&(O=O.add(T),N=A),x=Q(x,1),T=Q(T,1)}return L=q(k,O.j(L)),new ee(O,L)}for(O=w;0<=k.l(L);){for(T=Math.max(1,Math.floor(k.m()/L.m())),x=Math.ceil(Math.log(T)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),N=g(T),A=N.j(L);D(A)||0<A.l(k);)T-=x,N=g(T),A=N.j(L);P(N)&&(N=I),O=O.add(N),k=q(k,A)}return new ee(O,k)}n.A=function(k){return W(this,k).h},n.and=function(k){for(var L=Math.max(this.g.length,k.g.length),T=[],x=0;x<L;x++)T[x]=this.i(x)&k.i(x);return new u(T,this.h&k.h)},n.or=function(k){for(var L=Math.max(this.g.length,k.g.length),T=[],x=0;x<L;x++)T[x]=this.i(x)|k.i(x);return new u(T,this.h|k.h)},n.xor=function(k){for(var L=Math.max(this.g.length,k.g.length),T=[],x=0;x<L;x++)T[x]=this.i(x)^k.i(x);return new u(T,this.h^k.h)};function H(k){for(var L=k.g.length+1,T=[],x=0;x<L;x++)T[x]=k.i(x)<<1|k.i(x-1)>>>31;return new u(T,k.h)}function Q(k,L){var T=L>>5;L%=32;for(var x=k.g.length-T,O=[],N=0;N<x;N++)O[N]=0<L?k.i(N+T)>>>L|k.i(N+T+1)<<32-L:k.i(N+T);return new u(O,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=_,es=u}).apply(typeof Ev<"u"?Ev:typeof self<"u"?self:typeof window<"u"?window:{});var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mE,el,vE,oc,mf,yE,_E,EE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,E){return c==Array.prototype||c==Object.prototype||(c[m]=E.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yu=="object"&&Yu];for(var m=0;m<c.length;++m){var E=c[m];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function o(c,m){if(m)e:{var E=r;c=c.split(".");for(var C=0;C<c.length-1;C++){var F=c[C];if(!(F in E))break e;E=E[F]}c=c[c.length-1],C=E[c],m=m(C),m!=C&&m!=null&&e(E,c,{configurable:!0,writable:!0,value:m})}}function a(c,m){c instanceof String&&(c+="");var E=0,C=!1,F={next:function(){if(!C&&E<c.length){var Y=E++;return{value:m(Y,c[Y]),done:!1}}return C=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(c){return c||function(){return a(this,function(m,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function g(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function _(c,m,E){return c.call.apply(c.bind,arguments)}function w(c,m,E){if(!c)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,C),c.apply(m,F)}}return function(){return c.apply(m,arguments)}}function I(c,m,E){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,I.apply(null,arguments)}function R(c,m){var E=Array.prototype.slice.call(arguments,1);return function(){var C=E.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function P(c,m){function E(){}E.prototype=m.prototype,c.aa=m.prototype,c.prototype=new E,c.prototype.constructor=c,c.Qb=function(C,F,Y){for(var he=Array(arguments.length-2),et=2;et<arguments.length;et++)he[et-2]=arguments[et];return m.prototype[F].apply(C,he)}}function D(c){const m=c.length;if(0<m){const E=Array(m);for(let C=0;C<m;C++)E[C]=c[C];return E}return[]}function M(c,m){for(let E=1;E<arguments.length;E++){const C=arguments[E];if(f(C)){const F=c.length||0,Y=C.length||0;c.length=F+Y;for(let he=0;he<Y;he++)c[F+he]=C[he]}else c.push(C)}}class q{constructor(m,E){this.i=m,this.j=E,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function $(c){return/^[\s\xa0]*$/.test(c)}function ee(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function W(c){return W[" "](c),c}W[" "]=function(){};var H=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function Q(c,m,E){for(const C in c)m.call(E,c[C],C,c)}function k(c,m){for(const E in c)m.call(void 0,c[E],E,c)}function L(c){const m={};for(const E in c)m[E]=c[E];return m}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,m){let E,C;for(let F=1;F<arguments.length;F++){C=arguments[F];for(E in C)c[E]=C[E];for(let Y=0;Y<T.length;Y++)E=T[Y],Object.prototype.hasOwnProperty.call(C,E)&&(c[E]=C[E])}}function O(c){var m=1;c=c.split(":");const E=[];for(;0<m&&c.length;)E.push(c.shift()),m--;return c.length&&E.push(c.join(":")),E}function N(c){d.setTimeout(()=>{throw c},0)}function A(){var c=ce;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class _e{constructor(){this.h=this.g=null}add(m,E){const C=Ie.get();C.set(m,E),this.h?this.h.next=C:this.g=C,this.h=C}}var Ie=new q(()=>new Ae,c=>c.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(m,E){this.h=m,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,te=!1,ce=new _e,se=()=>{const c=d.Promise.resolve(void 0);Ce=()=>{c.then(U)}};var U=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(E){N(E)}var m=Ie;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}te=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};d.addEventListener("test",E,m),d.removeEventListener("test",E,m)}catch{}return c}();function G(c,m){if(ie.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var E=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(H){e:{try{W(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else E=="mouseover"?m=c.fromElement:E=="mouseout"&&(m=c.toElement);this.relatedTarget=m,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Te[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&G.aa.h.call(this)}}P(G,ie);var Te={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),de=0;function Me(c,m,E,C,F){this.listener=c,this.proxy=null,this.src=m,this.type=E,this.capture=!!C,this.ha=F,this.key=++de,this.da=this.fa=!1}function me(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ue(c){this.src=c,this.g={},this.h=0}Ue.prototype.add=function(c,m,E,C,F){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var he=At(c,m,C,F);return-1<he?(m=c[he],E||(m.fa=!1)):(m=new Me(m,this.src,Y,!!C,F),m.fa=E,c.push(m)),m};function Rt(c,m){var E=m.type;if(E in c.g){var C=c.g[E],F=Array.prototype.indexOf.call(C,m,void 0),Y;(Y=0<=F)&&Array.prototype.splice.call(C,F,1),Y&&(me(m),c.g[E].length==0&&(delete c.g[E],c.h--))}}function At(c,m,E,C){for(var F=0;F<c.length;++F){var Y=c[F];if(!Y.da&&Y.listener==m&&Y.capture==!!E&&Y.ha==C)return F}return-1}var mn="closure_lm_"+(1e6*Math.random()|0),He={};function di(c,m,E,C,F){if(Array.isArray(m)){for(var Y=0;Y<m.length;Y++)di(c,m[Y],E,C,F);return null}return E=pi(E),c&&c[Le]?c.K(m,E,g(C)?!!C.capture:!1,F):dr(c,m,E,!1,C,F)}function dr(c,m,E,C,F,Y){if(!m)throw Error("Invalid event type");var he=g(F)?!!F.capture:!!F,et=Wn(c);if(et||(c[mn]=et=new Ue(c)),E=et.add(m,E,C,he,Y),E.proxy)return E;if(C=ds(),E.proxy=C,C.src=c,C.listener=E,c.addEventListener)pe||(F=he),F===void 0&&(F=!1),c.addEventListener(m.toString(),C,F);else if(c.attachEvent)c.attachEvent(rn(m.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ds(){function c(E){return m.call(c.src,c.listener,E)}const m=fi;return c}function $n(c,m,E,C,F){if(Array.isArray(m))for(var Y=0;Y<m.length;Y++)$n(c,m[Y],E,C,F);else C=g(C)?!!C.capture:!!C,E=pi(E),c&&c[Le]?(c=c.i,m=String(m).toString(),m in c.g&&(Y=c.g[m],E=At(Y,E,C,F),-1<E&&(me(Y[E]),Array.prototype.splice.call(Y,E,1),Y.length==0&&(delete c.g[m],c.h--)))):c&&(c=Wn(c))&&(m=c.g[m.toString()],c=-1,m&&(c=At(m,E,C,F)),(E=-1<c?m[c]:null)&&kn(E))}function kn(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Le])Rt(m.i,c);else{var E=c.type,C=c.proxy;m.removeEventListener?m.removeEventListener(E,C,c.capture):m.detachEvent?m.detachEvent(rn(E),C):m.addListener&&m.removeListener&&m.removeListener(C),(E=Wn(m))?(Rt(E,c),E.h==0&&(E.src=null,m[mn]=null)):me(c)}}}function rn(c){return c in He?He[c]:He[c]="on"+c}function fi(c,m){if(c.da)c=!0;else{m=new G(m,this);var E=c.listener,C=c.ha||c.src;c.fa&&kn(c),c=E.call(C,m)}return c}function Wn(c){return c=c[mn],c instanceof Ue?c:null}var Ur="__closure_events_fn_"+(1e9*Math.random()>>>0);function pi(c){return typeof c=="function"?c:(c[Ur]||(c[Ur]=function(m){return c.handleEvent(m)}),c[Ur])}function pt(){J.call(this),this.i=new Ue(this),this.M=this,this.F=null}P(pt,J),pt.prototype[Le]=!0,pt.prototype.removeEventListener=function(c,m,E,C){$n(this,c,m,E,C)};function lt(c,m){var E,C=c.F;if(C)for(E=[];C;C=C.F)E.push(C);if(c=c.M,C=m.type||m,typeof m=="string")m=new ie(m,c);else if(m instanceof ie)m.target=m.target||c;else{var F=m;m=new ie(C,c),x(m,F)}if(F=!0,E)for(var Y=E.length-1;0<=Y;Y--){var he=m.g=E[Y];F=Rn(he,C,!0,m)&&F}if(he=m.g=c,F=Rn(he,C,!0,m)&&F,F=Rn(he,C,!1,m)&&F,E)for(Y=0;Y<E.length;Y++)he=m.g=E[Y],F=Rn(he,C,!1,m)&&F}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var E=c.g[m],C=0;C<E.length;C++)me(E[C]);delete c.g[m],c.h--}}this.F=null},pt.prototype.K=function(c,m,E,C){return this.i.add(String(c),m,!1,E,C)},pt.prototype.L=function(c,m,E,C){return this.i.add(String(c),m,!0,E,C)};function Rn(c,m,E,C){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,Y=0;Y<m.length;++Y){var he=m[Y];if(he&&!he.da&&he.capture==E){var et=he.listener,It=he.ha||he.src;he.fa&&Rt(c.i,he),F=et.call(It,C)!==!1&&F}}return F&&!C.defaultPrevented}function fr(c,m,E){if(typeof c=="function")E&&(c=I(c,E));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(c,m||0)}function Hn(c){c.g=fr(()=>{c.g=null,c.i&&(c.i=!1,Hn(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class An extends J{constructor(m,E){super(),this.m=m,this.l=E,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Hn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(c){J.call(this),this.h=c,this.g={}}P(pr,J);var gr=[];function gi(c){Q(c.g,function(m,E){this.g.hasOwnProperty(E)&&kn(m)},c),c.g={}}pr.prototype.N=function(){pr.aa.N.call(this),gi(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mr=d.JSON.stringify,mi=d.JSON.parse,vr=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function yr(){}yr.prototype.h=null;function qn(c){return c.h||(c.h=c.i())}function jr(){}var Yt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vn(){ie.call(this,"d")}P(vn,ie);function Gn(){ie.call(this,"c")}P(Gn,ie);var yn={},_r=null;function Er(){return _r=_r||new pt}yn.La="serverreachability";function wr(c){ie.call(this,yn.La,c)}P(wr,ie);function xn(c){const m=Er();lt(m,new wr(m))}yn.STAT_EVENT="statevent";function fs(c,m){ie.call(this,yn.STAT_EVENT,c),this.stat=m}P(fs,ie);function tt(c){const m=Er();lt(m,new fs(m,c))}yn.Ma="timingevent";function xe(c,m){ie.call(this,yn.Ma,c),this.size=m}P(xe,ie);function Kn(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},m)}function ps(){this.g=!0}ps.prototype.xa=function(){this.g=!1};function gs(c,m,E,C,F,Y){c.info(function(){if(c.g)if(Y)for(var he="",et=Y.split("&"),It=0;It<et.length;It++){var Ke=et[It].split("=");if(1<Ke.length){var xt=Ke[0];Ke=Ke[1];var _t=xt.split("_");he=2<=_t.length&&_t[1]=="type"?he+(xt+"="+Ke+"&"):he+(xt+"=redacted&")}}else he=null;else he=Y;return"XMLHTTP REQ ("+C+") [attempt "+F+"]: "+m+`
`+E+`
`+he})}function Qs(c,m,E,C,F,Y,he){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+F+"]: "+m+`
`+E+`
`+Y+" "+he})}function Qn(c,m,E,C){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+fh(c,E)+(C?" "+C:"")})}function fa(c,m){c.info(function(){return"TIMEOUT: "+m})}ps.prototype.info=function(){};function fh(c,m){if(!c.g)return m;if(!m)return null;try{var E=JSON.parse(m);if(E){for(c=0;c<E.length;c++)if(Array.isArray(E[c])){var C=E[c];if(!(2>C.length)){var F=C[1];if(Array.isArray(F)&&!(1>F.length)){var Y=F[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var he=1;he<F.length;he++)F[he]=""}}}}return mr(E)}catch{return m}}var Zs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zn;function ms(){}P(ms,yr),ms.prototype.g=function(){return new XMLHttpRequest},ms.prototype.i=function(){return{}},Zn=new ms;function Jn(c,m,E,C){this.j=c,this.i=m,this.l=E,this.R=C||1,this.U=new pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ul}function Ul(){this.i=null,this.g="",this.h=!1}var pa={},Js={};function Ys(c,m,E){c.L=1,c.v=wi(En(m)),c.m=E,c.P=!0,ga(c,null)}function ga(c,m){c.F=Date.now(),rt(c),c.A=En(c.v);var E=c.A,C=c.R;Array.isArray(C)||(C=[String(C)]),Ii(E.i,"t",C),c.C=0,E=c.j.J,c.h=new Ul,c.g=nu(c.j,E?m:null,!c.m),0<c.O&&(c.M=new An(I(c.Y,c,c.g),c.O)),m=c.U,E=c.g,C=c.ca;var F="readystatechange";Array.isArray(F)||(F&&(gr[0]=F.toString()),F=gr);for(var Y=0;Y<F.length;Y++){var he=di(E,F[Y],C||m.handleEvent,!1,m.h||m);if(!he)break;m.g[he.key]=he}m=c.H?L(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),xn(),gs(c.i,c.u,c.A,c.l,c.R,c.m)}Jn.prototype.ca=function(c){c=c.target;const m=this.M;m&&on(c)==3?m.j():this.Y(c)},Jn.prototype.Y=function(c){try{if(c==this.g)e:{const _t=on(this.g);var m=this.g.Ba();const On=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||wa(this.g)))){this.J||_t!=4||m==7||(m==8||0>=On?xn(3):xn(2)),vs(this);var E=this.g.Z();this.X=E;t:if(jl(this)){var C=wa(this.g);c="";var F=C.length,Y=on(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),vi(this);var he="";break t}this.h.i=new d.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,c+=this.h.i.decode(C[m],{stream:!(Y&&m==F-1)});C.length=0,this.h.g+=c,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=E==200,Qs(this.i,this.u,this.A,this.l,this.R,_t,E),this.o){if(this.T&&!this.K){t:{if(this.g){var et,It=this.g;if((et=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(et)){var Ke=et;break t}}Ke=null}if(E=Ke)Qn(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ma(this,E);else{this.o=!1,this.s=3,tt(12),bn(this),vi(this);break e}}if(this.P){E=!0;let Sn;for(;!this.J&&this.C<he.length;)if(Sn=ph(this,he),Sn==Js){_t==4&&(this.s=4,tt(14),E=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==pa){this.s=4,tt(15),Qn(this.i,this.l,he,"[Invalid Chunk]"),E=!1;break}else Qn(this.i,this.l,Sn,null),ma(this,Sn);if(jl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||he.length!=0||this.h.h||(this.s=1,tt(16),E=!1),this.o=this.o&&E,!E)Qn(this.i,this.l,he,"[Invalid Chunked Response]"),bn(this),vi(this);else if(0<he.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Ia(xt),xt.M=!0,tt(11))}}else Qn(this.i,this.l,he,null),ma(this,he);_t==4&&bn(this),this.o&&!this.J&&(_t==4?uo(this.j,this):(this.o=!1,rt(this)))}else io(this.g),E==400&&0<he.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),bn(this),vi(this)}}}catch{}finally{}};function jl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ph(c,m){var E=c.C,C=m.indexOf(`
`,E);return C==-1?Js:(E=Number(m.substring(E,C)),isNaN(E)?pa:(C+=1,C+E>m.length?Js:(m=m.slice(C,C+E),c.C=C+E,m)))}Jn.prototype.cancel=function(){this.J=!0,bn(this)};function rt(c){c.S=Date.now()+c.I,Fl(c,c.I)}function Fl(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Kn(I(c.ba,c),m)}function vs(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Jn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(fa(this.i,this.A),this.L!=2&&(xn(),tt(17)),bn(this),this.s=2,vi(this)):Fl(this,this.S-c)};function vi(c){c.j.G==0||c.J||uo(c.j,c)}function bn(c){vs(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,gi(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function ma(c,m){try{var E=c.j;if(E.G!=0&&(E.g==c||Xt(E.h,c))){if(!c.K&&Xt(E.h,c)&&E.G==3){try{var C=E.Da.g.parse(m)}catch{C=null}if(Array.isArray(C)&&C.length==3){var F=C;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<c.F)lo(E),nr(E);else break e;ao(E),tt(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=Kn(I(E.Za,E),6e3));if(1>=zl(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Wr(E,11)}else if((c.K||E.g==c)&&lo(E),!$(m))for(F=E.Da.g.parse(m),m=0;m<F.length;m++){let Ke=F[m];if(E.T=Ke[0],Ke=Ke[1],E.G==2)if(Ke[0]=="c"){E.K=Ke[1],E.ia=Ke[2];const xt=Ke[3];xt!=null&&(E.la=xt,E.j.info("VER="+E.la));const _t=Ke[4];_t!=null&&(E.Aa=_t,E.j.info("SVER="+E.Aa));const On=Ke[5];On!=null&&typeof On=="number"&&0<On&&(C=1.5*On,E.L=C,E.j.info("backChannelRequestTimeoutMs_="+C)),C=E;const Sn=c.g;if(Sn){const Ts=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ts){var Y=C.h;Y.g||Ts.indexOf("spdy")==-1&&Ts.indexOf("quic")==-1&&Ts.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(va(Y,Y.h),Y.h=null))}if(C.D){const ho=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;ho&&(C.ya=ho,nt(C.I,C.D,ho))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-c.F,E.j.info("Handshake RTT: "+E.R+"ms")),C=E;var he=c;if(C.qa=tu(C,C.J?C.ia:null,C.W),he.K){$l(C.h,he);var et=he,It=C.L;It&&(et.I=It),et.B&&(vs(et),rt(et)),C.g=he}else Is(C);0<E.i.length&&Cr(E)}else Ke[0]!="stop"&&Ke[0]!="close"||Wr(E,7);else E.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Wr(E,7):Ut(E):Ke[0]!="noop"&&E.l&&E.l.ta(Ke),E.v=0)}}xn(4)}catch{}}var Bl=class{constructor(c,m){this.g=c,this.map=m}};function ys(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _n(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function zl(c){return c.h?1:c.g?c.g.size:0}function Xt(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function va(c,m){c.g?c.g.add(m):c.h=m}function $l(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}ys.prototype.cancel=function(){if(this.i=Wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Wl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const E of c.g.values())m=m.concat(E.D);return m}return D(c.i)}function Xs(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var m=[],E=c.length,C=0;C<E;C++)m.push(c[C]);return m}m=[],E=0;for(C in c)m[E++]=c[C];return m}function eo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var m=[];c=c.length;for(var E=0;E<c;E++)m.push(E);return m}m=[],E=0;for(const C in c)m[E++]=C;return m}}}function yi(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var E=eo(c),C=Xs(c),F=C.length,Y=0;Y<F;Y++)m.call(void 0,C[Y],E&&E[Y],c)}var _s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gh(c,m){if(c){c=c.split("&");for(var E=0;E<c.length;E++){var C=c[E].indexOf("="),F=null;if(0<=C){var Y=c[E].substring(0,C);F=c[E].substring(C+1)}else Y=c[E];m(Y,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Fr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Fr){this.h=c.h,Es(this,c.j),this.o=c.o,this.g=c.g,_i(this,c.s),this.l=c.l;var m=c.i,E=new Sr;E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),Ei(this,E),this.m=c.m}else c&&(m=String(c).match(_s))?(this.h=!1,Es(this,m[1]||"",!0),this.o=qe(m[2]||""),this.g=qe(m[3]||"",!0),_i(this,m[4]),this.l=qe(m[5]||"",!0),Ei(this,m[6]||"",!0),this.m=qe(m[7]||"")):(this.h=!1,this.i=new Sr(null,this.h))}Fr.prototype.toString=function(){var c=[],m=this.j;m&&c.push(Si(m,to,!0),":");var E=this.g;return(E||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Si(m,to,!0),"@"),c.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&c.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Si(E,E.charAt(0)=="/"?Gl:ql,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Si(E,ya)),c.join("")};function En(c){return new Fr(c)}function Es(c,m,E){c.j=E?qe(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function _i(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Ei(c,m,E){m instanceof Sr?(c.i=m,Ir(c.i,c.h)):(E||(m=Si(m,Kl)),c.i=new Sr(m,c.h))}function nt(c,m,E){c.i.set(m,E)}function wi(c){return nt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function qe(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Si(c,m,E){return typeof c=="string"?(c=encodeURI(c).replace(m,Hl),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Hl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var to=/[#\/\?@]/g,ql=/[#\?:]/g,Gl=/[#\?]/g,Kl=/[#\?@]/g,ya=/#/g;function Sr(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Vt(c){c.g||(c.g=new Map,c.h=0,c.i&&gh(c.i,function(m,E){c.add(decodeURIComponent(m.replace(/\+/g," ")),E)}))}n=Sr.prototype,n.add=function(c,m){Vt(this),this.i=null,c=Mn(this,c);var E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(m),this.h+=1,this};function Yn(c,m){Vt(c),m=Mn(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Xn(c,m){return Vt(c),m=Mn(c,m),c.g.has(m)}n.forEach=function(c,m){Vt(this),this.g.forEach(function(E,C){E.forEach(function(F){c.call(m,F,C,this)},this)},this)},n.na=function(){Vt(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),E=[];for(let C=0;C<m.length;C++){const F=c[C];for(let Y=0;Y<F.length;Y++)E.push(m[C])}return E},n.V=function(c){Vt(this);let m=[];if(typeof c=="string")Xn(this,c)&&(m=m.concat(this.g.get(Mn(this,c))));else{c=Array.from(this.g.values());for(let E=0;E<c.length;E++)m=m.concat(c[E])}return m},n.set=function(c,m){return Vt(this),this.i=null,c=Mn(this,c),Xn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},n.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function Ii(c,m,E){Yn(c,m),0<E.length&&(c.i=null,c.g.set(Mn(c,m),D(E)),c.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var E=0;E<m.length;E++){var C=m[E];const Y=encodeURIComponent(String(C)),he=this.V(C);for(C=0;C<he.length;C++){var F=Y;he[C]!==""&&(F+="="+encodeURIComponent(String(he[C]))),c.push(F)}}return this.i=c.join("&")};function Mn(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Ir(c,m){m&&!c.j&&(Vt(c),c.i=null,c.g.forEach(function(E,C){var F=C.toLowerCase();C!=F&&(Yn(this,C),Ii(this,F,E))},c)),c.j=m}function mh(c,m){const E=new ps;if(d.Image){const C=new Image;C.onload=R(sn,E,"TestLoadImage: loaded",!0,m,C),C.onerror=R(sn,E,"TestLoadImage: error",!1,m,C),C.onabort=R(sn,E,"TestLoadImage: abort",!1,m,C),C.ontimeout=R(sn,E,"TestLoadImage: timeout",!1,m,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else m(!1)}function Ql(c,m){const E=new ps,C=new AbortController,F=setTimeout(()=>{C.abort(),sn(E,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:C.signal}).then(Y=>{clearTimeout(F),Y.ok?sn(E,"TestPingServer: ok",!0,m):sn(E,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),sn(E,"TestPingServer: error",!1,m)})}function sn(c,m,E,C,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),C(E)}catch{}}function vh(){this.g=new vr}function Zl(c,m,E){const C=E||"";try{yi(c,function(F,Y){let he=F;g(F)&&(he=mr(F)),m.push(C+Y+"="+encodeURIComponent(he))})}catch(F){throw m.push(C+"type="+encodeURIComponent("_badmap")),F}}function Br(c){this.l=c.Ub||null,this.j=c.eb||!1}P(Br,yr),Br.prototype.g=function(){return new ws(this.l,this.j)},Br.prototype.i=function(c){return function(){return c}}({});function ws(c,m){pt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(ws,pt),n=ws.prototype,n.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,tr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,er(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,tr(this)),this.g&&(this.readyState=3,tr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?er(this):tr(this),this.readyState==3&&Jl(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,er(this))},n.Qa=function(c){this.g&&(this.response=c,er(this))},n.ga=function(){this.g&&er(this)};function er(c){c.readyState=4,c.l=null,c.j=null,c.v=null,tr(c)}n.setRequestHeader=function(c,m){this.u.append(c,m)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var E=m.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=m.next();return c.join(`\r
`)};function tr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function zr(c){let m="";return Q(c,function(E,C){m+=C,m+=":",m+=E,m+=`\r
`}),m}function Ti(c,m,E){e:{for(C in E){var C=!1;break e}C=!0}C||(E=zr(E),typeof c=="string"?E!=null&&encodeURIComponent(String(E)):nt(c,m,E))}function ut(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(ut,pt);var yh=/^https?$/i,_a=["POST","PUT"];n=ut.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,m,E,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zn.g(),this.v=this.o?qn(this.o):qn(Zn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(Y){Ss(this,Y);return}if(c=E||"",E=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var F in C)E.set(F,C[F]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Y of C.keys())E.set(Y,C.get(Y));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),F=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(_a,m,void 0))||C||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of E)this.g.setRequestHeader(Y,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ro(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){Ss(this,Y)}};function Ss(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,no(c),wn(c)}function no(c){c.A||(c.A=!0,lt(c,"complete"),lt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,lt(this,"complete"),lt(this,"abort"),wn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wn(this,!0)),ut.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ea(this):this.bb())},n.bb=function(){Ea(this)};function Ea(c){if(c.h&&typeof u<"u"&&(!c.v[1]||on(c)!=4||c.Z()!=2)){if(c.u&&on(c)==4)fr(c.Ea,0,c);else if(lt(c,"readystatechange"),on(c)==4){c.h=!1;try{const he=c.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var E;if(!(E=m)){var C;if(C=he===0){var F=String(c.D).match(_s)[1]||null;!F&&d.self&&d.self.location&&(F=d.self.location.protocol.slice(0,-1)),C=!yh.test(F?F.toLowerCase():"")}E=C}if(E)lt(c,"complete"),lt(c,"success");else{c.m=6;try{var Y=2<on(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",no(c)}}finally{wn(c)}}}}function wn(c,m){if(c.g){ro(c);const E=c.g,C=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||lt(c,"ready");try{E.onreadystatechange=C}catch{}}}function ro(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function on(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<on(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),mi(m)}};function wa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function io(c){const m={};c=(c.g&&2<=on(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if($(c[C]))continue;var E=O(c[C]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=m[F]||[];m[F]=Y,Y.push(E)}k(m,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(c,m,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||m}function Sa(c){this.Aa=0,this.i=[],this.j=new ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tr("baseRetryDelayMs",5e3,c),this.cb=Tr("retryDelaySeedMs",1e4,c),this.Wa=Tr("forwardChannelMaxRetries",2,c),this.wa=Tr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ys(c&&c.concurrentRequestLimit),this.Da=new vh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sa.prototype,n.la=8,n.G=1,n.connect=function(c,m,E,C){tt(0),this.W=c,this.H=m||{},E&&C!==void 0&&(this.H.OSID=E,this.H.OAID=C),this.F=this.X,this.I=tu(this,null,this.W),Cr(this)};function Ut(c){if(so(c),c.G==3){var m=c.U++,E=En(c.I);if(nt(E,"SID",c.K),nt(E,"RID",m),nt(E,"TYPE","terminate"),$r(c,E),m=new Jn(c,c.j,m),m.L=2,m.v=wi(En(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=m.v,E=!0),E||(m.g=nu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),rt(m)}eu(c)}function nr(c){c.g&&(Ia(c),c.g.cancel(),c.g=null)}function so(c){nr(c),c.u&&(d.clearTimeout(c.u),c.u=null),lo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Cr(c){if(!_n(c.h)&&!c.s){c.s=!0;var m=c.Ga;Ce||se(),te||(Ce(),te=!0),ce.add(m,c),c.B=0}}function _h(c,m){return zl(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Kn(I(c.Ga,c,m),Xl(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const F=new Jn(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=L(Y),x(Y,this.S)):Y=this.S),this.m!==null||this.O||(F.H=Y,Y=null),this.P)e:{for(var m=0,E=0;E<this.i.length;E++){t:{var C=this.i[E];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(m+=C,4096<m){m=E;break e}if(m===4096||E===this.i.length-1){m=E+1;break e}}m=1e3}else m=1e3;m=Ci(this,F,m),E=En(this.I),nt(E,"RID",c),nt(E,"CVER",22),this.D&&nt(E,"X-HTTP-Session-Id",this.D),$r(this,E),Y&&(this.O?m="headers="+encodeURIComponent(String(zr(Y)))+"&"+m:this.m&&Ti(E,this.m,Y)),va(this.h,F),this.Ua&&nt(E,"TYPE","init"),this.P?(nt(E,"$req",m),nt(E,"SID","null"),F.T=!0,Ys(F,E,null)):Ys(F,E,m),this.G=2}}else this.G==3&&(c?oo(this,c):this.i.length==0||_n(this.h)||oo(this))};function oo(c,m){var E;m?E=m.l:E=c.U++;const C=En(c.I);nt(C,"SID",c.K),nt(C,"RID",E),nt(C,"AID",c.T),$r(c,C),c.m&&c.o&&Ti(C,c.m,c.o),E=new Jn(c,c.j,E,c.B+1),c.m===null&&(E.H=c.o),m&&(c.i=m.D.concat(c.i)),m=Ci(c,E,1e3),E.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),va(c.h,E),Ys(E,C,m)}function $r(c,m){c.H&&Q(c.H,function(E,C){nt(m,C,E)}),c.l&&yi({},function(E,C){nt(m,C,E)})}function Ci(c,m,E){E=Math.min(c.i.length,E);var C=c.l?I(c.l.Na,c.l,c):null;e:{var F=c.i;let Y=-1;for(;;){const he=["count="+E];Y==-1?0<E?(Y=F[0].g,he.push("ofs="+Y)):Y=0:he.push("ofs="+Y);let et=!0;for(let It=0;It<E;It++){let Ke=F[It].g;const xt=F[It].map;if(Ke-=Y,0>Ke)Y=Math.max(0,F[It].g-100),et=!1;else try{Zl(xt,he,"req"+Ke+"_")}catch{C&&C(xt)}}if(et){C=he.join("&");break e}}}return c=c.i.splice(0,E),m.D=c,C}function Is(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Ce||se(),te||(Ce(),te=!0),ce.add(m,c),c.v=0}}function ao(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Kn(I(c.Fa,c),Xl(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Yl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Kn(I(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),nr(this),Yl(this))};function Ia(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Yl(c){c.g=new Jn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=En(c.qa);nt(m,"RID","rpc"),nt(m,"SID",c.K),nt(m,"AID",c.T),nt(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&nt(m,"TO",c.ja),nt(m,"TYPE","xmlhttp"),$r(c,m),c.m&&c.o&&Ti(m,c.m,c.o),c.L&&(c.g.I=c.L);var E=c.g;c=c.ia,E.L=1,E.v=wi(En(m)),E.m=null,E.P=!0,ga(E,c)}n.Za=function(){this.C!=null&&(this.C=null,nr(this),ao(this),tt(19))};function lo(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function uo(c,m){var E=null;if(c.g==m){lo(c),Ia(c),c.g=null;var C=2}else if(Xt(c.h,m))E=m.D,$l(c.h,m),C=1;else return;if(c.G!=0){if(m.o)if(C==1){E=m.m?m.m.length:0,m=Date.now()-m.F;var F=c.B;C=Er(),lt(C,new xe(C,E)),Cr(c)}else Is(c);else if(F=m.s,F==3||F==0&&0<m.X||!(C==1&&_h(c,m)||C==2&&ao(c)))switch(E&&0<E.length&&(m=c.h,m.i=m.i.concat(E)),F){case 1:Wr(c,5);break;case 4:Wr(c,10);break;case 3:Wr(c,6);break;default:Wr(c,2)}}}function Xl(c,m){let E=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(E*=2),E*m}function Wr(c,m){if(c.j.info("Error code "+m),m==2){var E=I(c.fb,c),C=c.Xa;const F=!C;C=new Fr(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Es(C,"https"),wi(C),F?mh(C.toString(),E):Ql(C.toString(),E)}else tt(2);c.G=0,c.l&&c.l.sa(m),eu(c),so(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function eu(c){if(c.G=0,c.ka=[],c.l){const m=Wl(c.h);(m.length!=0||c.i.length!=0)&&(M(c.ka,m),M(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function tu(c,m,E){var C=E instanceof Fr?En(E):new Fr(E);if(C.g!="")m&&(C.g=m+"."+C.g),_i(C,C.s);else{var F=d.location;C=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var Y=new Fr(null);C&&Es(Y,C),m&&(Y.g=m),F&&_i(Y,F),E&&(Y.l=E),C=Y}return E=c.D,m=c.ya,E&&m&&nt(C,E,m),nt(C,"VER",c.la),$r(c,C),C}function nu(c,m,E){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new ut(new Br({eb:E})):new ut(c.pa),m.Ha(c.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ta(){}n=Ta.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function co(){}co.prototype.g=function(c,m){return new en(c,m)};function en(c,m){pt.call(this),this.g=new Sa(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!$(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!$(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Lr(this)}P(en,pt),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Ut(this.g)},en.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.u&&(E={},E.__data__=mr(c),c=E);m.i.push(new Bl(m.Ya++,c)),m.G==3&&Cr(m)},en.prototype.N=function(){this.g.l=null,delete this.j,Ut(this.g),delete this.g,en.aa.N.call(this)};function ru(c){vn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const E in m){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}P(ru,vn);function iu(){Gn.call(this),this.status=1}P(iu,Gn);function Lr(c){this.g=c}P(Lr,Ta),Lr.prototype.ua=function(){lt(this.g,"a")},Lr.prototype.ta=function(c){lt(this.g,new ru(c))},Lr.prototype.sa=function(c){lt(this.g,new iu)},Lr.prototype.ra=function(){lt(this.g,"b")},co.prototype.createWebChannel=co.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,EE=function(){return new co},_E=function(){return Er()},yE=yn,mf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zs.NO_ERROR=0,Zs.TIMEOUT=8,Zs.HTTP_ERROR=6,oc=Zs,Vl.COMPLETE="complete",vE=Vl,jr.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",pt.prototype.listen=pt.prototype.K,el=jr,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,mE=ut}).apply(typeof Yu<"u"?Yu:typeof self<"u"?self:typeof window<"u"?window:{});const wv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new zf("@firebase/firestore");function Mo(){return $s.logLevel}function ge(n,...e){if($s.logLevel<=$e.DEBUG){const t=e.map(Hf);$s.debug(`Firestore (${ia}): ${n}`,...t)}}function si(n,...e){if($s.logLevel<=$e.ERROR){const t=e.map(Hf);$s.error(`Firestore (${ia}): ${n}`,...t)}}function qo(n,...e){if($s.logLevel<=$e.WARN){const t=e.map(Hf);$s.warn(`Firestore (${ia}): ${n}`,...t)}}function Hf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n="Unexpected state"){const e=`FIRESTORE (${ia}) INTERNAL ASSERTION FAILED: `+n;throw si(e),new Error(e)}function Xe(n,e){n||De()}function Ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends hi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}}class M0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class O0{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0);let r=this.i;const o=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ri,e.enqueueRetryable(()=>o(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await o(this.currentUser)})},d=f=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ri)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string"),new wE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new Qt(e)}}class D0{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class N0{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new D0(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U0{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Xe(this.o===void 0);const r=a=>{a.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const o=a=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xe(typeof t.token=="string"),this.R=t.token,new V0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=j0(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%e.length))}return r}}function Ge(n,e){return n<e?-1:n>e?1:0}function Go(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Lt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Lt(0,0))}static max(){return new Ne(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t,r){t===void 0?t=0:t>e.length&&De(),r===void 0?r=e.length-t:r>e.length-t&&De(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=xr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=xr.isNumericId(e),o=xr.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?xr.extractNumericId(e).compare(xr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return es.fromString(e.substring(4,e.length-2))}}class at extends xr{construct(e,t,r){return new at(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new at(t)}static emptyPath(){return new at([])}}const F0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends xr{construct(e,t,r){return new zt(e,t,r)}static isValidIdentifier(e){return F0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(r+=d,o++):(a(),o++)}if(a(),u)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(at.fromString(e))}static fromName(e){return new Pe(at.fromString(e).popFirst(5))}static empty(){return new Pe(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new at(e.slice()))}}function B0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(r===1e9?new Lt(t+1,0):new Lt(t,r));return new rs(o,Pe.empty(),e)}function z0(n){return new rs(n.readTime,n.key,-1)}class rs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new rs(Ne.min(),Pe.empty(),-1)}static max(){return new rs(Ne.max(),Pe.empty(),-1)}}function $0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:Ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==W0)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let o=0,a=0,u=!1;e.forEach(d=>{++o,d.next(()=>{++a,u&&a===o&&t()},f=>r(f))}),u=!0,a===o&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(o=>o?ne.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,a)=>{r.push(t.call(this,o,a))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,o)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const g=f;t(e[g]).next(_=>{u[g]=_,++d,d===a&&r(u)},_=>o(_))}})}static doWhile(e,t){return new ne((r,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):r()};a()})}}function q0(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Gc.oe=-1;function Kc(n){return n==null}function wc(n){return n===0&&1/n==-1/0}function G0(n){return typeof n=="number"&&Number.isInteger(n)&&!wc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sv(e)),e=Q0(n.get(t),e);return Sv(e)}function Q0(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function Sv(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function us(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||Bt.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xu(this.root,e,this.comparator,!0)}}class Xu{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Bt.RED,this.left=o??Bt.EMPTY,this.right=a??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Bt(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Bt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,t,r,o,a){return this}insert(e,t,r){return new Bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tv(this.data.getIterator())}getIteratorFrom(e){return new Tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class Tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new Pn([])}unionWith(e){let t=new Pt(zt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new TE("Invalid base64 string: "+a):a}}(e);return new $t(t)}static fromUint8Array(e){const t=function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a}(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const Z0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(n){if(Xe(!!n),typeof n=="string"){let e=0;const t=Z0.exec(n);if(Xe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ss(n){return typeof n=="string"?$t.fromBase64String(n):$t.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Qc(n){const e=n.mapValue.fields.__previous_value__;return qf(e)?Qc(e):e}function fl(n){const e=is(n.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,t,r,o,a,u,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=g}}class pl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new pl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec={mapValue:{}};function os(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qf(n)?4:X0(n)?9007199254740991:Y0(n)?10:11:De()}function Nr(n,e){if(n===e)return!0;const t=os(n);if(t!==os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fl(n).isEqual(fl(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=is(o.timestampValue),d=is(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return ss(o.bytesValue).isEqual(ss(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return vt(o.geoPointValue.latitude)===vt(a.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return vt(o.integerValue)===vt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=vt(o.doubleValue),d=vt(a.doubleValue);return u===d?wc(u)===wc(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Go(n.arrayValue.values||[],e.arrayValue.values||[],Nr);case 10:case 11:return function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(Iv(u)!==Iv(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Nr(u[f],d[f])))return!1;return!0}(n,e);default:return De()}}function gl(n,e){return(n.values||[]).find(t=>Nr(t,e))!==void 0}function Ko(n,e){if(n===e)return 0;const t=os(n),r=os(e);if(t!==r)return Ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return function(a,u){const d=vt(a.integerValue||a.doubleValue),f=vt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return Cv(n.timestampValue,e.timestampValue);case 4:return Cv(fl(n),fl(e));case 5:return Ge(n.stringValue,e.stringValue);case 6:return function(a,u){const d=ss(a),f=ss(u);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,u){const d=a.split("/"),f=u.split("/");for(let g=0;g<d.length&&g<f.length;g++){const _=Ge(d[g],f[g]);if(_!==0)return _}return Ge(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,u){const d=Ge(vt(a.latitude),vt(u.latitude));return d!==0?d:Ge(vt(a.longitude),vt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Lv(n.arrayValue,e.arrayValue);case 10:return function(a,u){var d,f,g,_;const w=a.fields||{},I=u.fields||{},R=(d=w.value)===null||d===void 0?void 0:d.arrayValue,P=(f=I.value)===null||f===void 0?void 0:f.arrayValue,D=Ge(((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0,((_=P==null?void 0:P.values)===null||_===void 0?void 0:_.length)||0);return D!==0?D:Lv(R,P)}(n.mapValue,e.mapValue);case 11:return function(a,u){if(a===ec.mapValue&&u===ec.mapValue)return 0;if(a===ec.mapValue)return 1;if(u===ec.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),g=u.fields||{},_=Object.keys(g);f.sort(),_.sort();for(let w=0;w<f.length&&w<_.length;++w){const I=Ge(f[w],_[w]);if(I!==0)return I;const R=Ko(d[f[w]],g[_[w]]);if(R!==0)return R}return Ge(f.length,_.length)}(n.mapValue,e.mapValue);default:throw De()}}function Cv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ge(n,e);const t=is(n),r=is(e),o=Ge(t.seconds,r.seconds);return o!==0?o:Ge(t.nanos,r.nanos)}function Lv(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=Ko(t[o],r[o]);if(a)return a}return Ge(t.length,r.length)}function Qo(n){return vf(n)}function vf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=is(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ss(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=vf(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of r)a?a=!1:o+=",",o+=`${u}:${vf(t.fields[u])}`;return o+"}"}(n.mapValue):De()}function ac(n){switch(os(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qc(n);return e?16+ac(e):16;case 5:return 2*n.stringValue.length;case 6:return ss(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,a)=>o+ac(a),0)}(n.arrayValue);case 10:case 11:return function(r){let o=0;return us(r.fields,(a,u)=>{o+=a.length+ac(u)}),o}(n.mapValue);default:throw De()}}function Pv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yf(n){return!!n&&"integerValue"in n}function Gf(n){return!!n&&"arrayValue"in n}function kv(n){return!!n&&"nullValue"in n}function Rv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lc(n){return!!n&&"mapValue"in n}function Y0(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function il(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return us(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=il(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=il(n.arrayValue.values[t]);return e}return Object.assign({},n)}function X0(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=il(t)}setAll(e){let t=zt.emptyPath(),r={},o=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,o),r={},o=[],t=d.popLast()}u?r[d.lastSegment()]=il(u):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());lc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];lc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){us(t,(o,a)=>e[o]=a);for(const o of r)delete e[o]}clone(){return new pn(il(this.value))}}function CE(n){const e=[];return us(n.fields,(t,r)=>{const o=new zt([t]);if(lc(r)){const a=CE(r.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)}),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t,r,o,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Zt(e,0,Ne.min(),Ne.min(),Ne.min(),pn.empty(),0)}static newFoundDocument(e,t,r,o){return new Zt(e,1,t,Ne.min(),r,o,0)}static newNoDocument(e,t){return new Zt(e,2,t,Ne.min(),Ne.min(),pn.empty(),0)}static newUnknownDocument(e,t){return new Zt(e,3,t,Ne.min(),Ne.min(),pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t){this.position=e,this.inclusive=t}}function Av(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?r=Pe.comparator(Pe.fromName(u.referenceValue),t.key):r=Ko(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function xv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function eL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{}class St extends LE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new nL(e,t,r):t==="array-contains"?new sL(e,r):t==="in"?new oL(e,r):t==="not-in"?new aL(e,r):t==="array-contains-any"?new lL(e,r):new St(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new rL(e,r):new iL(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ko(t,this.value)):t!==null&&os(this.value)===os(t)&&this.matchesComparison(Ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends LE{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new hr(e,t)}matches(e){return PE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function PE(n){return n.op==="and"}function kE(n){return tL(n)&&PE(n)}function tL(n){for(const e of n.filters)if(e instanceof hr)return!1;return!0}function _f(n){if(n instanceof St)return n.field.canonicalString()+n.op.toString()+Qo(n.value);if(kE(n))return n.filters.map(e=>_f(e)).join(",");{const e=n.filters.map(t=>_f(t)).join(",");return`${n.op}(${e})`}}function RE(n,e){return n instanceof St?function(r,o){return o instanceof St&&r.op===o.op&&r.field.isEqual(o.field)&&Nr(r.value,o.value)}(n,e):n instanceof hr?function(r,o){return o instanceof hr&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((a,u,d)=>a&&RE(u,o.filters[d]),!0):!1}(n,e):void De()}function AE(n){return n instanceof St?function(t){return`${t.field.canonicalString()} ${t.op} ${Qo(t.value)}`}(n):n instanceof hr?function(t){return t.op.toString()+" {"+t.getFilters().map(AE).join(" ,")+"}"}(n):"Filter"}class nL extends St{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class rL extends St{constructor(e,t){super(e,"in",t),this.keys=xE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iL extends St{constructor(e,t){super(e,"not-in",t),this.keys=xE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class sL extends St{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gf(t)&&gl(t.arrayValue,this.value)}}class oL extends St{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gl(this.value.arrayValue,t)}}class aL extends St{constructor(e,t){super(e,"not-in",t)}matches(e){if(gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!gl(this.value.arrayValue,t)}}class lL extends St{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,t=null,r=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function bv(n,e=null,t=[],r=[],o=null,a=null,u=null){return new uL(n,e,t,r,o,a,u)}function Kf(n){const e=Ve(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_f(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qo(r)).join(",")),e.ue=t}return e.ue}function Qf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!eL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!RE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xv(n.startAt,e.startAt)&&xv(n.endAt,e.endAt)}function Ef(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t=null,r=[],o=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cL(n,e,t,r,o,a,u,d){return new kl(n,e,t,r,o,a,u,d)}function Zf(n){return new kl(n)}function Mv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bE(n){return n.collectionGroup!==null}function sl(n){const e=Ve(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Pt(zt.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Ic(a,r))}),t.has(zt.keyField().canonicalString())||e.ce.push(new Ic(zt.keyField(),r))}return e.ce}function Mr(n){const e=Ve(n);return e.le||(e.le=hL(e,sl(n))),e.le}function hL(n,e){if(n.limitType==="F")return bv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new Ic(o.field,a)});const t=n.endAt?new Sc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Sc(n.startAt.position,n.startAt.inclusive):null;return bv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function wf(n,e){const t=n.filters.concat([e]);return new kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Sf(n,e,t){return new kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zc(n,e){return Qf(Mr(n),Mr(e))&&n.limitType===e.limitType}function ME(n){return`${Kf(Mr(n))}|lt:${n.limitType}`}function Oo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>AE(o)).join(", ")}]`),Kc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Qo(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Qo(o)).join(",")),`Target(${r})`}(Mr(n))}; limitType=${n.limitType})`}function Jc(n,e){return e.isFoundDocument()&&function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Pe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,o){for(const a of sl(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(r,o){return!(r.startAt&&!function(u,d,f){const g=Av(u,d,f);return u.inclusive?g<=0:g<0}(r.startAt,sl(r),o)||r.endAt&&!function(u,d,f){const g=Av(u,d,f);return u.inclusive?g>=0:g>0}(r.endAt,sl(r),o))}(n,e)}function dL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function OE(n){return(e,t)=>{let r=!1;for(const o of sl(n)){const a=fL(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function fL(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(a,u,d){const f=u.data.field(a),g=d.data.field(a);return f!==null&&g!==null?Ko(f,g):De()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,(t,r)=>{for(const[o,a]of r)e(o,a)})}isEmpty(){return IE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=new ft(Pe.comparator);function oi(){return pL}const DE=new ft(Pe.comparator);function tl(...n){let e=DE;for(const t of n)e=e.insert(t.key,t);return e}function NE(n){let e=DE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fs(){return ol()}function VE(){return ol()}function ol(){return new Hs(n=>n.toString(),(n,e)=>n.isEqual(e))}const gL=new ft(Pe.comparator),mL=new Pt(Pe.comparator);function We(...n){let e=mL;for(const t of n)e=e.add(t);return e}const vL=new Pt(Ge);function yL(){return vL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function UE(n){return{integerValue:""+n}}function _L(n,e){return G0(e)?UE(e):Jf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this._=void 0}}function EL(n,e,t){return n instanceof Tc?function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&qf(a)&&(a=Qc(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}}(t,e):n instanceof ml?FE(n,e):n instanceof vl?BE(n,e):function(o,a){const u=jE(o,a),d=Ov(u)+Ov(o.Pe);return yf(u)&&yf(o.Pe)?UE(d):Jf(o.serializer,d)}(n,e)}function wL(n,e,t){return n instanceof ml?FE(n,e):n instanceof vl?BE(n,e):t}function jE(n,e){return n instanceof Cc?function(r){return yf(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Tc extends Yc{}class ml extends Yc{constructor(e){super(),this.elements=e}}function FE(n,e){const t=zE(e);for(const r of n.elements)t.some(o=>Nr(o,r))||t.push(r);return{arrayValue:{values:t}}}class vl extends Yc{constructor(e){super(),this.elements=e}}function BE(n,e){let t=zE(e);for(const r of n.elements)t=t.filter(o=>!Nr(o,r));return{arrayValue:{values:t}}}class Cc extends Yc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ov(n){return vt(n.integerValue||n.doubleValue)}function zE(n){return Gf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function SL(n,e){return n.field.isEqual(e.field)&&function(r,o){return r instanceof ml&&o instanceof ml||r instanceof vl&&o instanceof vl?Go(r.elements,o.elements,Nr):r instanceof Cc&&o instanceof Cc?Nr(r.Pe,o.Pe):r instanceof Tc&&o instanceof Tc}(n.transform,e.transform)}class IL{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xc{}function $E(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yf(n.key,ur.none()):new Rl(n.key,n.data,ur.none());{const t=n.data,r=pn.empty();let o=new Pt(zt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),o=o.add(a)}return new cs(n.key,r,new Pn(o.toArray()),ur.none())}}function TL(n,e,t){n instanceof Rl?function(o,a,u){const d=o.value.clone(),f=Nv(o.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof cs?function(o,a,u){if(!uc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=Nv(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(WE(o)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function al(n,e,t,r){return n instanceof Rl?function(a,u,d,f){if(!uc(a.precondition,u))return d;const g=a.value.clone(),_=Vv(a.fieldTransforms,f,u);return g.setAll(_),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof cs?function(a,u,d,f){if(!uc(a.precondition,u))return d;const g=Vv(a.fieldTransforms,f,u),_=u.data;return _.setAll(WE(a)),_.setAll(g),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(a,u,d){return uc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(n,e,t)}function CL(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=jE(r.transform,o||null);a!=null&&(t===null&&(t=pn.empty()),t.set(r.field,a))}return t||null}function Dv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Go(r,o,(a,u)=>SL(a,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Rl extends Xc{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class cs extends Xc{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function WE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Nv(n,e,t){const r=new Map;Xe(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);r.set(a.field,wL(u,d,t[o]))}return r}function Vv(n,e,t){const r=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);r.set(o.field,EL(a,u,e))}return r}class Yf extends Xc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LL extends Xc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&TL(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=al(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=al(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=VE();return this.mutations.forEach(o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const f=$E(u,d);f!==null&&r.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),We())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(t,r)=>Dv(t,r))&&Go(this.baseMutations,e.baseMutations,(t,r)=>Dv(t,r))}}class Xf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Xe(e.mutations.length===r.length);let o=function(){return gL}();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,r[u].version);return new Xf(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Qe;function AL(n){switch(n){default:return De();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function HE(n){if(n===void 0)return si("GRPC error has no .code"),re.UNKNOWN;switch(n){case wt.OK:return re.OK;case wt.CANCELLED:return re.CANCELLED;case wt.UNKNOWN:return re.UNKNOWN;case wt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case wt.INTERNAL:return re.INTERNAL;case wt.UNAVAILABLE:return re.UNAVAILABLE;case wt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case wt.NOT_FOUND:return re.NOT_FOUND;case wt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case wt.ABORTED:return re.ABORTED;case wt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case wt.DATA_LOSS:return re.DATA_LOSS;default:return De()}}(Qe=wt||(wt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=new es([4294967295,4294967295],0);function Uv(n){const e=xL().encode(n),t=new gE;return t.update(e),new Uint8Array(t.digest())}function jv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new es([t,r],0),new es([o,a],0)]}class ep{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new nl(`Invalid padding: ${t}`);if(r<0)throw new nl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new nl(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=es.fromNumber(this.Te)}de(e,t,r){let o=e.add(t.multiply(es.fromNumber(r)));return o.compare(bL)===1&&(o=new es([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Uv(e),[r,o]=jv(t);for(let a=0;a<this.hashCount;a++){const u=this.de(r,o,a);if(!this.Ee(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new ep(a,o,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(this.Te===0)return;const t=Uv(e),[r,o]=jv(t);for(let a=0;a<this.hashCount;a++){const u=this.de(r,o,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new eh(Ne.min(),o,new ft(Ge),oi(),We())}}class Al{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Al(r,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t,r,o){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=o}}class qE{constructor(e,t){this.targetId=e,this.me=t}}class GE{constructor(e,t,r=$t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Fv{constructor(){this.fe=0,this.ge=Bv(),this.pe=$t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=We(),t=We(),r=We();return this.ge.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:De()}}),new Al(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Bv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ML{constructor(e){this.Be=e,this.Le=new Map,this.ke=oi(),this.qe=tc(),this.Qe=tc(),this.Ke=new ft(Ge)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:De()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((r,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,r=e.me.count,o=this.Ye(t);if(o){const a=o.target;if(Ef(a))if(r===0){const u=new Pe(a.path);this.We(t,u,Zt.newNoDocument(u,Ne.min()))}else Xe(r===1);else{const u=this.Ze(t);if(u!==r){const d=this.Xe(e),f=d?this.et(d,e,u):1;if(f!==0){this.He(t);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,g)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=ss(r).toUint8Array()}catch(f){if(f instanceof TE)return qo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new ep(u,o,a)}catch(f){return qo(f instanceof nl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Te===0?null:d}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Be.getRemoteKeysForTarget(t);let o=0;return r.forEach(a=>{const u=this.Be.nt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.We(t,a,null),o++)}),o}it(e){const t=new Map;this.Le.forEach((a,u)=>{const d=this.Ye(u);if(d){if(a.current&&Ef(d.target)){const f=new Pe(d.target.path);this.st(f).has(u)||this.ot(u,f)||this.We(u,f,Zt.newNoDocument(f,e))}a.be&&(t.set(u,a.ve()),a.Ce())}});let r=We();this.Qe.forEach((a,u)=>{let d=!0;u.forEachWhile(f=>{const g=this.Ye(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.ke.forEach((a,u)=>u.setReadTime(e));const o=new eh(e,t,this.Ke,this.ke,r);return this.ke=oi(),this.qe=tc(),this.Qe=tc(),this.Ke=new ft(Ge),o}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Fv,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Pt(Ge),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Pt(Ge),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Fv),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function tc(){return new ft(Pe.comparator)}function Bv(){return new ft(Pe.comparator)}const OL={asc:"ASCENDING",desc:"DESCENDING"},DL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NL={and:"AND",or:"OR"};class VL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function If(n,e){return n.useProto3Json||Kc(e)?e:{value:e}}function Lc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UL(n,e){return Lc(n,e.toTimestamp())}function Or(n){return Xe(!!n),Ne.fromTimestamp(function(t){const r=is(t);return new Lt(r.seconds,r.nanos)}(n))}function tp(n,e){return Tf(n,e).canonicalString()}function Tf(n,e){const t=function(o){return new at(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function QE(n){const e=at.fromString(n);return Xe(ew(e)),e}function Cf(n,e){return tp(n.databaseId,e.path)}function Zd(n,e){const t=QE(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(JE(t))}function ZE(n,e){return tp(n.databaseId,e)}function jL(n){const e=QE(n);return e.length===4?at.emptyPath():JE(e)}function Lf(n){return new at(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JE(n){return Xe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function zv(n,e,t){return{name:Cf(n,e),fields:t.value.mapValue.fields}}function FL(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(g,_){return g.useProto3Json?(Xe(_===void 0||typeof _=="string"),$t.fromBase64String(_||"")):(Xe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),$t.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(g){const _=g.code===void 0?re.UNKNOWN:HE(g.code);return new ye(_,g.message||"")}(u);t=new GE(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Zd(n,r.document.name),a=Or(r.document.updateTime),u=r.document.createTime?Or(r.document.createTime):Ne.min(),d=new pn({mapValue:{fields:r.document.fields}}),f=Zt.newFoundDocument(o,a,u,d),g=r.targetIds||[],_=r.removedTargetIds||[];t=new cc(g,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Zd(n,r.document),a=r.readTime?Or(r.readTime):Ne.min(),u=Zt.newNoDocument(o,a),d=r.removedTargetIds||[];t=new cc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Zd(n,r.document),a=r.removedTargetIds||[];t=new cc([],a,o,null)}else{if(!("filter"in e))return De();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,u=new RL(o,a),d=r.targetId;t=new qE(d,u)}}return t}function BL(n,e){let t;if(e instanceof Rl)t={update:zv(n,e.key,e.value)};else if(e instanceof Yf)t={delete:Cf(n,e.key)};else if(e instanceof cs)t={update:zv(n,e.key,e.data),updateMask:ZL(e.fieldMask)};else{if(!(e instanceof LL))return De();t={verify:Cf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,u){const d=u.transform;if(d instanceof Tc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ml)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof vl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Cc)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw De()}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:UL(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:De()}(n,e.precondition)),t}function zL(n,e){return n&&n.length>0?(Xe(e!==void 0),n.map(t=>function(o,a){let u=o.updateTime?Or(o.updateTime):Or(a);return u.isEqual(Ne.min())&&(u=Or(a)),new IL(u,o.transformResults||[])}(t,e))):[]}function $L(n,e){return{documents:[ZE(n,e.path)]}}function WL(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ZE(n,o);const a=function(g){if(g.length!==0)return XE(hr.create(g,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(g){if(g.length!==0)return g.map(_=>function(I){return{field:Do(I.field),direction:GL(I.dir)}}(_))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=If(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ct:t,parent:o}}function HL(n){let e=jL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Xe(r===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=function(w){const I=YE(w);return I instanceof hr&&kE(I)?I.getFilters():[I]}(t.where));let u=[];t.orderBy&&(u=function(w){return w.map(I=>function(P){return new Ic(No(P.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(I))}(t.orderBy));let d=null;t.limit&&(d=function(w){let I;return I=typeof w=="object"?w.value:w,Kc(I)?null:I}(t.limit));let f=null;t.startAt&&(f=function(w){const I=!!w.before,R=w.values||[];return new Sc(R,I)}(t.startAt));let g=null;return t.endAt&&(g=function(w){const I=!w.before,R=w.values||[];return new Sc(R,I)}(t.endAt)),cL(e,o,u,a,d,"F",f,g)}function qL(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function YE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=No(t.unaryFilter.field);return St.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=No(t.unaryFilter.field);return St.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=No(t.unaryFilter.field);return St.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=No(t.unaryFilter.field);return St.create(u,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(n):n.fieldFilter!==void 0?function(t){return St.create(No(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return hr.create(t.compositeFilter.filters.map(r=>YE(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return De()}}(t.compositeFilter.op))}(n):De()}function GL(n){return OL[n]}function KL(n){return DL[n]}function QL(n){return NL[n]}function Do(n){return{fieldPath:n.canonicalString()}}function No(n){return zt.fromServerFormat(n.fieldPath)}function XE(n){return n instanceof St?function(t){if(t.op==="=="){if(Rv(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NAN"}};if(kv(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Rv(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NOT_NAN"}};if(kv(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Do(t.field),op:KL(t.op),value:t.value}}}(n):n instanceof hr?function(t){const r=t.getFilters().map(o=>XE(o));return r.length===1?r[0]:{compositeFilter:{op:QL(t.op),filters:r}}}(n):De()}function ZL(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ew(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t,r,o,a=Ne.min(),u=Ne.min(),d=$t.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.ht=e}}function YL(n){const e=HL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Sf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this.ln=new eP}addToCollectionParentIndex(e,t){return this.ln.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(rs.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class eP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Pt(at.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Pt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(41943040,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Zo(0)}static Qn(){return new Zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv([n,e],[t,r]){const o=Ge(n,t);return o===0?Ge(e,r):o}class tP{constructor(e){this.Gn=e,this.buffer=new Pt(Wv),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Wv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){oa(t)?ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await sa(t)}await this.Yn(3e5)})}}class rP{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Gc.oe);const r=new tP(t);return this.Zn.forEachTarget(e,o=>r.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>r.Hn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve($v)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$v):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,o,a,u,d,f,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(r=w,d=Date.now(),this.removeTargets(e,r,t))).next(w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(g=Date.now(),Mo()<=$e.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(g-f)+`ms
Total Duration: ${g-_}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w})))}}function iP(n,e){return new rP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.changes=new Hs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&al(r.mutation,o,Pn.empty(),Lt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,t,r=We()){const o=Fs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(a=>{let u=tl();return a.forEach((d,f)=>{u=u.insert(d,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Fs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,We()))}populateOverlays(e,t,r){const o=[];return r.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,o){let a=oi();const u=ol(),d=function(){return ol()}();return t.forEach((f,g)=>{const _=r.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof cs)?a=a.insert(g.key,g):_!==void 0?(u.set(g.key,_.mutation.getFieldMask()),al(_.mutation,g,_.mutation.getFieldMask(),Lt.now())):u.set(g.key,Pn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((g,_)=>u.set(g,_)),t.forEach((g,_)=>{var w;return d.set(g,new oP(_,(w=u.get(g))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const r=ol();let o=new ft((u,d)=>u-d),a=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(f=>{const g=t.get(f);if(g===null)return;let _=r.get(f)||Pn.empty();_=d.applyToLocalView(g,_),r.set(f,_);const w=(o.get(d.batchId)||We()).add(f);o=o.insert(d.batchId,w)})}).next(()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),g=f.key,_=f.value,w=VE();_.forEach(I=>{if(!a.has(I)){const R=$E(t.get(I),r.get(I));R!==null&&w.set(I,R),a=a.add(I)}}),u.push(this.documentOverlayCache.saveOverlays(e,g,w))}return ne.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(u){return Pe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):ne.resolve(Fs());let d=-1,f=a;return u.next(g=>ne.forEach(g,(_,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(_)?ne.resolve():this.remoteDocumentCache.getEntry(e,_).next(I=>{f=f.insert(_,I)}))).next(()=>this.populateOverlays(e,g,a)).next(()=>this.computeViews(e,f,g,We())).next(_=>({batchId:d,changes:NE(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(r=>{let o=tl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let u=tl();return this.indexManager.getCollectionParents(e,a).next(d=>ne.forEach(d,f=>{const g=function(w,I){return new kl(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,g,r,o).next(_=>{_.forEach((w,I)=>{u=u.insert(w,I)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o))).next(u=>{a.forEach((f,g)=>{const _=g.getKey();u.get(_)===null&&(u=u.insert(_,Zt.newInvalidDocument(_)))});let d=tl();return u.forEach((f,g)=>{const _=a.get(f);_!==void 0&&al(_.mutation,g,Pn.empty(),Lt.now()),Jc(t,g)&&(d=d.insert(f,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return ne.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Or(o.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:YL(o.bundledQuery),readTime:Or(o.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.overlays=new ft(Pe.comparator),this.dr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Fs();return ne.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,a)=>{this.Tt(e,t,a)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.dr.get(r);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.dr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const o=Fs(),a=t.length+1,u=new Pe(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,g=f.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===a&&f.largestBatchId>r&&o.set(f.getKey(),f)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new ft((g,_)=>g-_);const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=a.get(g.largestBatchId);_===null&&(_=Fs(),a=a.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Fs(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,_)=>d.set(g,_)),!(d.size()>=o)););return ne.resolve(d)}Tt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.dr.get(o.largestBatchId).delete(r.key);this.dr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new kL(t,r));let a=this.dr.get(t);a===void 0&&(a=We(),this.dr.set(t,a)),this.dr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.Er=new Pt(Dt.Ar),this.Rr=new Pt(Dt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const r=new Dt(e,t);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Dt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new Pe(new at([])),r=new Dt(t,e),o=new Dt(t,e+1),a=[];return this.Rr.forEachInRange([r,o],u=>{this.gr(u),a.push(u.key)}),a}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Pe(new at([])),r=new Dt(t,e),o=new Dt(t,e+1);let a=We();return this.Rr.forEachInRange([r,o],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Dt(e,0),r=this.Er.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Dt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Pe.comparator(e.key,t.key)||Ge(e.br,t.br)}static Vr(e,t){return Ge(e.br,t.br)||Pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Pt(Dt.Ar)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new PL(a,t,r,o);this.mutationQueue.push(u);for(const d of o)this.vr=this.vr.add(new Dt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ne.resolve(u)}lookupMutationBatch(e,t){return ne.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Fr(r),a=o<0?0:o;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Dt(t,0),o=new Dt(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([r,o],u=>{const d=this.Cr(u.br);a.push(d)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pt(Ge);return t.forEach(o=>{const a=new Dt(o,0),u=new Dt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,u],d=>{r=r.add(d.br)})}),ne.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;Pe.isDocumentKey(a)||(a=a.child(""));const u=new Dt(new Pe(a),0);let d=new Pt(Ge);return this.vr.forEachWhile(f=>{const g=f.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(d=d.add(f.br)),!0)},u),ne.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(r=>{const o=this.Cr(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Xe(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return ne.forEach(t.mutations,o=>{const a=new Dt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,t){const r=new Dt(t,0),o=this.vr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.Nr=e,this.docs=function(){return new ft(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,u=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(t))}getEntries(e,t){let r=oi();return t.forEach(o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():Zt.newInvalidDocument(o))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=oi();const u=t.path,d=new Pe(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:g,value:{document:_}}=f.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||$0(z0(_),r)<=0||(o.has(_.key)||Jc(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,o){De()}Br(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fP(this)}getSize(e){return ne.resolve(this.size)}}class fP extends sP{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.persistence=e,this.Lr=new Hs(t=>Kf(t),Qf),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.kr=0,this.qr=new np,this.targetCount=0,this.Qr=Zo.qn()}forEachTarget(e,t){return this.Lr.forEach((r,o)=>t(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),ne.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Zo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Un(t),ne.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.Lr.forEach((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Lr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),ne.waitFor(a).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Lr.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(u=>{a.push(o.markPotentiallyOrphaned(e,u))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Gc(0),this.Ur=!1,this.Ur=!0,this.Wr=new cP,this.referenceDelegate=e(this),this.Gr=new pP(this),this.indexManager=new XL,this.remoteDocumentCache=function(o){return new dP(o)}(r=>this.referenceDelegate.zr(r)),this.serializer=new JL(t),this.jr=new lP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new hP(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const o=new gP(this.$r.next());return this.referenceDelegate.Hr(),r(o).next(a=>this.referenceDelegate.Jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Yr(e,t){return ne.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class gP extends H0{constructor(e){super(),this.currentSequenceNumber=e}}class rp{constructor(e){this.persistence=e,this.Zr=new np,this.Xr=null}static ei(e){return new rp(e)}get ti(){if(this.Xr)return this.Xr;throw De()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.ti.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ti,r=>{const o=Pe.fromPath(r);return this.ni(e,o).next(a=>{a||t.removeEntry(o,Ne.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return ne.or([()=>ne.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Pc{constructor(e,t){this.persistence=e,this.ri=new Hs(r=>K0(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=iP(this,t)}static ei(e,t){return new Pc(e,t)}Hr(){}Jr(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return ne.forEach(this.ri,(r,o)=>this.ir(e,r,o).next(a=>a?ne.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.Br(e,u=>this.ir(e,u,t).next(d=>{d||(r++,a.removeEntry(u,Ne.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),ne.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ac(e.data.value)),t}ir(e,t,r){return ne.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return ne.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=o}static zi(e,t){let r=We(),o=We();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new ip(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return gC()?8:q0(Jt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.Xi(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.es(e,t,o,r).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new mP;return this.ts(e,t,u).next(d=>{if(a.result=d,this.Hi)return this.ns(e,t,u,d.size)})}).next(()=>a.result)}ns(e,t,r,o){return r.documentReadCount<this.Ji?(Mo()<=$e.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ne.resolve()):(Mo()<=$e.DEBUG&&ge("QueryEngine","Query:",Oo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Yi*o?(Mo()<=$e.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(t))):ne.resolve())}Xi(e,t){if(Mv(t))return ne.resolve(null);let r=Mr(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Sf(t,null,"F"),r=Mr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=We(...a);return this.Zi.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const g=this.rs(t,d);return this.ss(t,g,u,f.readTime)?this.Xi(e,Sf(t,null,"F")):this.os(e,g,t,f)}))})))}es(e,t,r,o){return Mv(t)||o.isEqual(Ne.min())?ne.resolve(null):this.Zi.getDocuments(e,r).next(a=>{const u=this.rs(t,a);return this.ss(t,u,r,o)?ne.resolve(null):(Mo()<=$e.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Oo(t)),this.os(e,u,t,B0(o,-1)).next(d=>d))})}rs(e,t){let r=new Pt(OE(e));return t.forEach((o,a)=>{Jc(e,a)&&(r=r.add(a))}),r}ss(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ts(e,t,r){return Mo()<=$e.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Oo(t)),this.Zi.getDocumentsMatchingQuery(e,t,rs.min(),r)}os(e,t,r,o){return this.Zi.getDocumentsMatchingQuery(e,r,o).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t,r,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new ft(Ge),this.cs=new Hs(a=>Kf(a),Qf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aP(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function _P(n,e,t,r){return new yP(n,e,t,r)}async function nw(n,e){const t=Ve(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(a=>(o=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],d=[];let f=We();for(const g of o){u.push(g.batchId);for(const _ of g.mutations)f=f.add(_.key)}for(const g of a){d.push(g.batchId);for(const _ of g.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next(g=>({Ts:g,removedBatchIds:u,addedBatchIds:d}))})})}function EP(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,f,g,_){const w=g.batch,I=w.keys();let R=ne.resolve();return I.forEach(P=>{R=R.next(()=>_.getEntry(f,P)).next(D=>{const M=g.docVersions.get(P);Xe(M!==null),D.version.compareTo(M)<0&&(w.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),_.addEntry(D)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(f,w))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let f=We();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(f=f.add(d.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function rw(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function wP(n,e){const t=Ve(n),r=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const d=[];e.targetChanges.forEach((_,w)=>{const I=o.get(w);if(!I)return;d.push(t.Gr.removeMatchingKeys(a,_.removedDocuments,w).next(()=>t.Gr.addMatchingKeys(a,_.addedDocuments,w)));let R=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken($t.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),o=o.insert(w,R),function(D,M,q){return D.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,R,_)&&d.push(t.Gr.updateTargetData(a,R))});let f=oi(),g=We();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))}),d.push(SP(a,u,e.documentUpdates).next(_=>{f=_.Is,g=_.ds})),!r.isEqual(Ne.min())){const _=t.Gr.getLastRemoteSnapshotVersion(a).next(w=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(_)}return ne.waitFor(d).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,g)).next(()=>f)}).then(a=>(t.us=o,a))}function SP(n,e,t){let r=We(),o=We();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=oi();return t.forEach((d,f)=>{const g=a.get(d);f.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(Ne.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ge("LocalStore","Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",f.version)}),{Is:u,ds:o}})}function IP(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function TP(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Gr.getTargetData(r,e).next(a=>a?(o=a,ne.resolve(o)):t.Gr.allocateTargetId(r).next(u=>(o=new Ki(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.us.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function Pf(n,e,t){const r=Ve(n),o=r.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,o))}catch(u){if(!oa(u))throw u;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.us=r.us.remove(e),r.cs.delete(o.target)}function Hv(n,e,t){const r=Ve(n);let o=Ne.min(),a=We();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,g,_){const w=Ve(f),I=w.cs.get(_);return I!==void 0?ne.resolve(w.us.get(I)):w.Gr.getTargetData(g,_)}(r,u,Mr(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(u,d.targetId).next(f=>{a=f})}).next(()=>r._s.getDocumentsMatchingQuery(u,e,t?o:Ne.min(),t?a:We())).next(d=>(CP(r,dL(e),d),{documents:d,Es:a})))}function CP(n,e,t){let r=n.ls.get(e)||Ne.min();t.forEach((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ls.set(e,r)}class qv{constructor(){this.activeTargetIds=yL()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LP{constructor(){this._o=new qv,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new qv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc=null;function Jd(){return nc===null?nc=function(){return 268435456+Math.round(2147483648*Math.random())}():nc++,"0x"+nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class AP extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${o}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Oo(t,r,o,a,u){const d=Jd(),f=this.No(t,r.toUriEncodedString());ge("RestConnection",`Sending RPC '${t}' ${d}:`,f,o);const g={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(g,a,u),this.Lo(t,f,g,o).then(_=>(ge("RestConnection",`Received RPC '${t}' ${d}: `,_),_),_=>{throw qo("RestConnection",`RPC '${t}' ${d} failed with error: `,_,"url: ",f,"request:",o),_})}ko(t,r,o,a,u,d){return this.Oo(t,r,o,a,u)}Bo(t,r,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ia}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,u)=>t[u]=a),o&&o.headers.forEach((a,u)=>t[u]=a)}No(t,r){const o=kP[t];return`${this.Fo}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,r,o){const a=Jd();return new Promise((u,d)=>{const f=new mE;f.setWithCredentials(!0),f.listenOnce(vE.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case oc.NO_ERROR:const _=f.getResponseJson();ge(Kt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case oc.TIMEOUT:ge(Kt,`RPC '${e}' ${a} timed out`),d(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:const w=f.getStatus();if(ge(Kt,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);const R=I==null?void 0:I.error;if(R&&R.status&&R.message){const P=function(M){const q=M.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(q)>=0?q:re.UNKNOWN}(R.status);d(new ye(P,R.message))}else d(new ye(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ye(re.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ge(Kt,`RPC '${e}' ${a} completed.`)}});const g=JSON.stringify(o);ge(Kt,`RPC '${e}' ${a} sending request:`,o),f.send(t,"POST",g,r,15)})}qo(e,t,r){const o=Jd(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=EE(),d=_E(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Bo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");ge(Kt,`Creating RPC '${e}' stream ${o}: ${_}`,f);const w=u.createWebChannel(_,f);let I=!1,R=!1;const P=new RP({Eo:M=>{R?ge(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(I||(ge(Kt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),I=!0),ge(Kt,`RPC '${e}' stream ${o} sending:`,M),w.send(M))},Ao:()=>w.close()}),D=(M,q,$)=>{M.listen(q,ee=>{try{$(ee)}catch(W){setTimeout(()=>{throw W},0)}})};return D(w,el.EventType.OPEN,()=>{R||(ge(Kt,`RPC '${e}' stream ${o} transport opened.`),P.So())}),D(w,el.EventType.CLOSE,()=>{R||(R=!0,ge(Kt,`RPC '${e}' stream ${o} transport closed`),P.Do())}),D(w,el.EventType.ERROR,M=>{R||(R=!0,qo(Kt,`RPC '${e}' stream ${o} transport errored:`,M),P.Do(new ye(re.UNAVAILABLE,"The operation could not be completed")))}),D(w,el.EventType.MESSAGE,M=>{var q;if(!R){const $=M.data[0];Xe(!!$);const ee=$,W=(ee==null?void 0:ee.error)||((q=ee[0])===null||q===void 0?void 0:q.error);if(W){ge(Kt,`RPC '${e}' stream ${o} received error:`,W);const H=W.status;let Q=function(T){const x=wt[T];if(x!==void 0)return HE(x)}(H),k=W.message;Q===void 0&&(Q=re.INTERNAL,k="Unknown error status: "+H+" with message "+W.message),R=!0,P.Do(new ye(Q,k)),w.close()}else ge(Kt,`RPC '${e}' stream ${o} received:`,$),P.vo($)}}),D(d,yE.STAT_EVENT,M=>{M.stat===mf.PROXY?ge(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===mf.NOPROXY&&ge(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{P.bo()},0),P}}function Yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(n){return new VL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,t,r=1e3,o=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=o,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-r);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t,r,o,a,u,d,f){this.li=e,this.Yo=r,this.Zo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new iw(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(si(t.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Xo===t&&this.I_(r,o)},r=>{e(()=>{const o=new ye(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(o)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{r(()=>this.d_(o))}),this.stream.onMessage(o=>{r(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xP extends sw{constructor(e,t,r,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=FL(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ne.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ne.min():u.readTime?Or(u.readTime):Ne.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=Lf(this.serializer),t.addTarget=function(a,u){let d;const f=u.target;if(d=Ef(f)?{documents:$L(a,f)}:{query:WL(a,f).ct},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=KE(a,u.resumeToken);const g=If(a,u.expectedCount);g!==null&&(d.expectedCount=g)}else if(u.snapshotVersion.compareTo(Ne.min())>0){d.readTime=Lc(a,u.snapshotVersion.toTimestamp());const g=If(a,u.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const r=qL(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=Lf(this.serializer),t.removeTarget=e,this.c_(t)}}class bP extends sw{constructor(e,t,r,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=zL(e.writeResults,e.commitTime),r=Or(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=Lf(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>BL(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Oo(e,Tf(t,r),o,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(re.UNKNOWN,a.toString())})}ko(e,t,r,o,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.ko(e,Tf(t,r),o,u,d,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(re.UNKNOWN,u.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class OP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(si(t),this.C_=!1):ge("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(u=>{r.enqueueAndForget(async()=>{qs(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),await async function(f){const g=Ve(f);g.k_.add(4),await xl(g),g.K_.set("Unknown"),g.k_.delete(4),await nh(g)}(this))})}),this.K_=new OP(r,o)}}async function nh(n){if(qs(n))for(const e of n.q_)await e(!0)}async function xl(n){for(const e of n.q_)await e(!1)}function ow(n,e){const t=Ve(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),lp(t)?ap(t):aa(t).s_()&&op(t,e))}function sp(n,e){const t=Ve(n),r=aa(t);t.L_.delete(e),r.s_()&&aw(t,e),t.L_.size===0&&(r.s_()?r.a_():qs(t)&&t.K_.set("Unknown"))}function op(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}aa(n).V_(e)}function aw(n,e){n.U_.xe(e),aa(n).m_(e)}function ap(n){n.U_=new ML({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),aa(n).start(),n.K_.F_()}function lp(n){return qs(n)&&!aa(n).i_()&&n.L_.size>0}function qs(n){return Ve(n).k_.size===0}function lw(n){n.U_=void 0}async function NP(n){n.K_.set("Online")}async function VP(n){n.L_.forEach((e,t)=>{op(n,e)})}async function UP(n,e){lw(n),lp(n)?(n.K_.O_(e),ap(n)):n.K_.set("Unknown")}async function jP(n,e,t){if(n.K_.set("Online"),e instanceof GE&&e.state===2&&e.cause)try{await async function(o,a){const u=a.cause;for(const d of a.targetIds)o.L_.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.L_.delete(d),o.U_.removeTarget(d))}(n,e)}catch(r){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kc(n,r)}else if(e instanceof cc?n.U_.$e(e):e instanceof qE?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Ne.min()))try{const r=await rw(n.localStore);t.compareTo(r)>=0&&await function(a,u){const d=a.U_.it(u);return d.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.L_.get(g);_&&a.L_.set(g,_.withResumeToken(f.resumeToken,u))}}),d.targetMismatches.forEach((f,g)=>{const _=a.L_.get(f);if(!_)return;a.L_.set(f,_.withResumeToken($t.EMPTY_BYTE_STRING,_.snapshotVersion)),aw(a,f);const w=new Ki(_.target,f,g,_.sequenceNumber);op(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){ge("RemoteStore","Failed to raise snapshot:",r),await kc(n,r)}}async function kc(n,e,t){if(!oa(e))throw e;n.k_.add(1),await xl(n),n.K_.set("Offline"),t||(t=()=>rw(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await nh(n)})}function uw(n,e){return e().catch(t=>kc(n,t,e))}async function rh(n){const e=Ve(n),t=as(e);let r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;FP(e);)try{const o=await IP(e.localStore,r);if(o===null){e.B_.length===0&&t.a_();break}r=o.batchId,BP(e,o)}catch(o){await kc(e,o)}cw(e)&&hw(e)}function FP(n){return qs(n)&&n.B_.length<10}function BP(n,e){n.B_.push(e);const t=as(n);t.s_()&&t.f_&&t.g_(e.mutations)}function cw(n){return qs(n)&&!as(n).i_()&&n.B_.length>0}function hw(n){as(n).start()}async function zP(n){as(n).w_()}async function $P(n){const e=as(n);for(const t of n.B_)e.g_(t.mutations)}async function WP(n,e,t){const r=n.B_.shift(),o=Xf.from(r,e,t);await uw(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await rh(n)}async function HP(n,e){e&&as(n).f_&&await async function(r,o){if(function(u){return AL(u)&&u!==re.ABORTED}(o.code)){const a=r.B_.shift();as(r).__(),await uw(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o)),await rh(r)}}(n,e),cw(n)&&hw(n)}async function Kv(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const r=qs(t);t.k_.add(3),await xl(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await nh(t)}async function qP(n,e){const t=Ve(n);e?(t.k_.delete(2),await nh(t)):e||(t.k_.add(2),await xl(t),t.K_.set("Unknown"))}function aa(n){return n.W_||(n.W_=function(t,r,o){const a=Ve(t);return a.b_(),new xP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Ro:NP.bind(null,n),mo:VP.bind(null,n),po:UP.bind(null,n),R_:jP.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),lp(n)?ap(n):n.K_.set("Unknown")):(await n.W_.stop(),lw(n))})),n.W_}function as(n){return n.G_||(n.G_=function(t,r,o){const a=Ve(t);return a.b_(),new bP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:zP.bind(null,n),po:HP.bind(null,n),p_:$P.bind(null,n),y_:WP.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await rh(n)):(await n.G_.stop(),n.B_.length>0&&(ge("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const u=Date.now()+r,d=new up(e,t,u,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cp(n,e){if(si("AsyncQueue",`${e}: ${n}`),oa(n))return new ye(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=tl(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.z_=new ft(Pe.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):De():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jo{constructor(e,t,r,o,a,u,d,f,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,o,a){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Jo(e,t,Fo.emptySet(t),u,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class KP{constructor(){this.queries=Zv(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const o=Ve(t),a=o.queries;o.queries=Zv(),a.forEach((u,d)=>{for(const f of d.J_)f.onError(r)})})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function Zv(){return new Hs(n=>ME(n),Zc)}async function dw(n,e){const t=Ve(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.Y_()&&e.Z_()&&(r=2):(a=new GP,r=e.Z_()?0:1);try{switch(r){case 0:a.H_=await t.onListen(o,!0);break;case 1:a.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=cp(u,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&hp(t)}async function fw(n,e){const t=Ve(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const u=a.J_.indexOf(e);u>=0&&(a.J_.splice(u,1),a.J_.length===0?o=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function QP(n,e){const t=Ve(n);let r=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.J_)d.ta(o)&&(r=!0);u.H_=o}}r&&hp(t)}function ZP(n,e,t){const r=Ve(n),o=r.queries.get(e);if(o)for(const a of o.J_)a.onError(t);r.queries.delete(e)}function hp(n){n.X_.forEach(e=>{e.next()})}var kf,Jv;(Jv=kf||(kf={})).na="default",Jv.Cache="cache";class pw{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Jo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e){this.key=e}}class mw{constructor(e){this.key=e}}class JP{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=We(),this.mutatedKeys=We(),this.Va=OE(e),this.ma=new Fo(this.Va)}get fa(){return this.Ea}ga(e,t){const r=t?t.pa:new Qv,o=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,w)=>{const I=o.get(_),R=Jc(this.query,w)?w:null,P=!!I&&this.mutatedKeys.has(I.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let M=!1;I&&R?I.data.isEqual(R.data)?P!==D&&(r.track({type:3,doc:R}),M=!0):this.ya(I,R)||(r.track({type:2,doc:R}),M=!0,(f&&this.Va(R,f)>0||g&&this.Va(R,g)<0)&&(d=!0)):!I&&R?(r.track({type:0,doc:R}),M=!0):I&&!R&&(r.track({type:1,doc:I}),M=!0,(f||g)&&(d=!0)),M&&(R?(u=u.add(R),a=D?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{ma:u,pa:r,ss:d,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const u=e.pa.j_();u.sort((_,w)=>function(R,P){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return D(R)-D(P)}(_.type,w.type)||this.Va(_.doc,w.doc)),this.wa(r),o=o!=null&&o;const d=t&&!o?this.Sa():[],f=this.Ra.size===0&&this.current&&!o?1:0,g=f!==this.Aa;return this.Aa=f,u.length!==0||g?{snapshot:new Jo(this.query,e.ma,a,u,e.mutatedKeys,f===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Qv,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=We(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new mw(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new gw(r))}),t}va(e){this.Ea=e.Es,this.Ra=We();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Jo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class YP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class XP{constructor(e){this.key=e,this.Fa=!1}}class ek{constructor(e,t,r,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ma={},this.xa=new Hs(d=>ME(d),Zc),this.Oa=new Map,this.Na=new Set,this.Ba=new ft(Pe.comparator),this.La=new Map,this.ka=new np,this.qa={},this.Qa=new Map,this.Ka=Zo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function tk(n,e,t=!0){const r=Sw(n);let o;const a=r.xa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Ca()):o=await vw(r,e,t,!0),o}async function nk(n,e){const t=Sw(n);await vw(t,e,!0,!1)}async function vw(n,e,t,r){const o=await TP(n.localStore,Mr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await rk(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&ow(n.remoteStore,o),d}async function rk(n,e,t,r,o){n.Ua=(w,I,R)=>async function(D,M,q,$){let ee=M.view.ga(q);ee.ss&&(ee=await Hv(D.localStore,M.query,!1).then(({documents:k})=>M.view.ga(k,ee)));const W=$&&$.targetChanges.get(M.targetId),H=$&&$.targetMismatches.get(M.targetId)!=null,Q=M.view.applyChanges(ee,D.isPrimaryClient,W,H);return Xv(D,M.targetId,Q.ba),Q.snapshot}(n,w,I,R);const a=await Hv(n.localStore,e,!0),u=new JP(e,a.Es),d=u.ga(a.documents),f=Al.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),g=u.applyChanges(d,n.isPrimaryClient,f);Xv(n,t,g.ba);const _=new YP(e,t,u);return n.xa.set(e,_),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),g.snapshot}async function ik(n,e,t){const r=Ve(n),o=r.xa.get(e),a=r.Oa.get(o.targetId);if(a.length>1)return r.Oa.set(o.targetId,a.filter(u=>!Zc(u,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Pf(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&sp(r.remoteStore,o.targetId),Rf(r,o.targetId)}).catch(sa)):(Rf(r,o.targetId),await Pf(r.localStore,o.targetId,!0))}async function sk(n,e){const t=Ve(n),r=t.xa.get(e),o=t.Oa.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),sp(t.remoteStore,r.targetId))}async function ok(n,e,t){const r=fk(n);try{const o=await function(u,d){const f=Ve(u),g=Lt.now(),_=d.reduce((R,P)=>R.add(P.key),We());let w,I;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let P=oi(),D=We();return f.hs.getEntries(R,_).next(M=>{P=M,P.forEach((q,$)=>{$.isValidDocument()||(D=D.add(q))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,P)).next(M=>{w=M;const q=[];for(const $ of d){const ee=CL($,w.get($.key).overlayedDocument);ee!=null&&q.push(new cs($.key,ee,CE(ee.value.mapValue),ur.exists(!0)))}return f.mutationQueue.addMutationBatch(R,g,q,d)}).next(M=>{I=M;const q=M.applyToLocalDocumentSet(w,D);return f.documentOverlayCache.saveOverlays(R,M.batchId,q)})}).then(()=>({batchId:I.batchId,changes:NE(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,f){let g=u.qa[u.currentUser.toKey()];g||(g=new ft(Ge)),g=g.insert(d,f),u.qa[u.currentUser.toKey()]=g}(r,o.batchId,t),await bl(r,o.changes),await rh(r.remoteStore)}catch(o){const a=cp(o,"Failed to persist write");t.reject(a)}}async function yw(n,e){const t=Ve(n);try{const r=await wP(t.localStore,e);e.targetChanges.forEach((o,a)=>{const u=t.La.get(a);u&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.Fa=!0:o.modifiedDocuments.size>0?Xe(u.Fa):o.removedDocuments.size>0&&(Xe(u.Fa),u.Fa=!1))}),await bl(t,r,e)}catch(r){await sa(r)}}function Yv(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.xa.forEach((a,u)=>{const d=u.view.ea(e);d.snapshot&&o.push(d.snapshot)}),function(u,d){const f=Ve(u);f.onlineState=d;let g=!1;f.queries.forEach((_,w)=>{for(const I of w.J_)I.ea(d)&&(g=!0)}),g&&hp(f)}(r.eventManager,e),o.length&&r.Ma.R_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ak(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.La.get(e),a=o&&o.key;if(a){let u=new ft(Pe.comparator);u=u.insert(a,Zt.newNoDocument(a,Ne.min()));const d=We().add(a),f=new eh(Ne.min(),new Map,new ft(Ge),u,d);await yw(r,f),r.Ba=r.Ba.remove(a),r.La.delete(e),dp(r)}else await Pf(r.localStore,e,!1).then(()=>Rf(r,e,t)).catch(sa)}async function lk(n,e){const t=Ve(n),r=e.batch.batchId;try{const o=await EP(t.localStore,e);Ew(t,r,null),_w(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bl(t,o)}catch(o){await sa(o)}}async function uk(n,e,t){const r=Ve(n);try{const o=await function(u,d){const f=Ve(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return f.mutationQueue.lookupMutationBatch(g,d).next(w=>(Xe(w!==null),_=w.keys(),f.mutationQueue.removeMutationBatch(g,w))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,_,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>f.localDocuments.getDocuments(g,_))})}(r.localStore,e);Ew(r,e,t),_w(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bl(r,o)}catch(o){await sa(o)}}function _w(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function Ew(n,e,t){const r=Ve(n);let o=r.qa[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.qa[r.currentUser.toKey()]=o}}function Rf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||ww(n,r)})}function ww(n,e){n.Na.delete(e.path.canonicalString());const t=n.Ba.get(e);t!==null&&(sp(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),dp(n))}function Xv(n,e,t){for(const r of t)r instanceof gw?(n.ka.addReference(r.key,e),ck(n,r)):r instanceof mw?(ge("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||ww(n,r.key)):De()}function ck(n,e){const t=e.key,r=t.path.canonicalString();n.Ba.get(t)||n.Na.has(r)||(ge("SyncEngine","New document in limbo: "+t),n.Na.add(r),dp(n))}function dp(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new Pe(at.fromString(e)),r=n.Ka.next();n.La.set(r,new XP(t)),n.Ba=n.Ba.insert(t,r),ow(n.remoteStore,new Ki(Mr(Zf(t.path)),r,"TargetPurposeLimboResolution",Gc.oe))}}async function bl(n,e,t){const r=Ve(n),o=[],a=[],u=[];r.xa.isEmpty()||(r.xa.forEach((d,f)=>{u.push(r.Ua(f,e,t).then(g=>{var _;if((g||t)&&r.isPrimaryClient){const w=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(g){o.push(g);const w=ip.zi(f.targetId,g);a.push(w)}}))}),await Promise.all(u),r.Ma.R_(o),await async function(f,g){const _=Ve(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ne.forEach(g,I=>ne.forEach(I.Wi,R=>_.persistence.referenceDelegate.addReference(w,I.targetId,R)).next(()=>ne.forEach(I.Gi,R=>_.persistence.referenceDelegate.removeReference(w,I.targetId,R)))))}catch(w){if(!oa(w))throw w;ge("LocalStore","Failed to update sequence numbers: "+w)}for(const w of g){const I=w.targetId;if(!w.fromCache){const R=_.us.get(I),P=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(P);_.us=_.us.insert(I,D)}}}(r.localStore,a))}async function hk(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const r=await nw(t.localStore,e);t.currentUser=e,function(a,u){a.Qa.forEach(d=>{d.forEach(f=>{f.reject(new ye(re.CANCELLED,u))})}),a.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bl(t,r.Ts)}}function dk(n,e){const t=Ve(n),r=t.La.get(e);if(r&&r.Fa)return We().add(r.key);{let o=We();const a=t.Oa.get(e);if(!a)return o;for(const u of a){const d=t.xa.get(u);o=o.unionWith(d.view.fa)}return o}}function Sw(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ak.bind(null,e),e.Ma.R_=QP.bind(null,e.eventManager),e.Ma.Wa=ZP.bind(null,e.eventManager),e}function fk(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uk.bind(null,e),e}class Rc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=th(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return _P(this.persistence,new vP,e.initialUser,this.serializer)}ja(e){return new tw(rp.ei,this.serializer)}za(e){return new LP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rc.provider={build:()=>new Rc};class pk extends Rc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Xe(this.persistence.referenceDelegate instanceof Pc);const r=this.persistence.referenceDelegate.garbageCollector;return new nP(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new tw(r=>Pc.ei(r,t),this.serializer)}}class Af{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hk.bind(null,this.syncEngine),await qP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KP}()}createDatastore(e){const t=th(e.databaseInfo.databaseId),r=function(a){return new AP(a)}(e.databaseInfo);return function(a,u,d,f){return new MP(a,u,d,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,a,u,d){return new DP(r,o,a,u,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Yv(this.syncEngine,t,0),function(){return Gv.p()?new Gv:new PP}())}createSyncEngine(e,t){return function(o,a,u,d,f,g,_){const w=new ek(o,a,u,d,f,g);return _&&(w.$a=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Ve(o);ge("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await xl(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Af.provider={build:()=>new Af};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):si("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=SE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async u=>{ge("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(ge("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=cp(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xd(n,e){n.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async o=>{r.isEqual(o)||(await nw(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ey(n,e){n.asyncQueue.verifyOperationInProgress();const t=await mk(n);ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Kv(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>Kv(e.remoteStore,o)),n._onlineComponents=e}async function mk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;qo("Error using user provided cache. Falling back to memory cache: "+t),await Xd(n,new Rc)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),await Xd(n,new pk(void 0));return n._offlineComponents}async function Tw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),await ey(n,n._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),await ey(n,new Af))),n._onlineComponents}function vk(n){return Tw(n).then(e=>e.syncEngine)}async function Cw(n){const e=await Tw(n),t=e.eventManager;return t.onListen=tk.bind(null,e.syncEngine),t.onUnlisten=ik.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sk.bind(null,e.syncEngine),t}function yk(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,g){const _=new Iw({next:I=>{_.eu(),u.enqueueAndForget(()=>fw(a,w));const R=I.docs.has(d);!R&&I.fromCache?g.reject(new ye(re.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&I.fromCache&&f&&f.source==="server"?g.reject(new ye(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new pw(Zf(d.path),_,{includeMetadataChanges:!0,ua:!0});return dw(a,w)}(await Cw(n),n.asyncQueue,e,t,r)),r.promise}function _k(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,g){const _=new Iw({next:I=>{_.eu(),u.enqueueAndForget(()=>fw(a,w)),I.fromCache&&f.source==="server"?g.reject(new ye(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new pw(d,_,{includeMetadataChanges:!0,ua:!0});return dw(a,w)}(await Cw(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(n,e,t){if(!t)throw new ye(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ek(n,e,t,r){if(e===!0&&r===!0)throw new ye(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ny(n){if(!Pe.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ry(n){if(Pe.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ih(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De()}function ai(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ih(n);throw new ye(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ek("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sh{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new b0;switch(r.type){case"firstParty":return new N0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ty.get(t);r&&(ge("ComponentProvider","Removing Datastore"),ty.delete(t),r.terminate())}(this),Promise.resolve()}}function wk(n,e,t,r={}){var o;const a=(n=ai(n,sh))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=Qt.MOCK_USER;else{d=lC(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ye(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Qt(g)}n._authCredentials=new M0(new wE(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new la(this.firestore,e,this._query)}}class gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class ts extends la{constructor(e,t,r){super(e,t,Zf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new Pe(e))}withConverter(e){return new ts(this.firestore,e,this._path)}}function yl(n,e,...t){if(n=Nt(n),Pw("collection","path",e),n instanceof sh){const r=at.fromString(e,...t);return ry(r),new ts(n,null,r)}{if(!(n instanceof gn||n instanceof ts))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return ry(r),new ts(n.firestore,null,r)}}function _l(n,e,...t){if(n=Nt(n),arguments.length===1&&(e=SE.newId()),Pw("doc","path",e),n instanceof sh){const r=at.fromString(e,...t);return ny(r),new gn(n,null,new Pe(r))}{if(!(n instanceof gn||n instanceof ts))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return ny(r),new gn(n.firestore,n instanceof ts?n.converter:null,new Pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new iw(this,"async_queue_retry"),this.fu=()=>{const r=Yd();r&&ge("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Yd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=Yd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new ri;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!oa(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const o=function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d}(r);throw si("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=up.createAndSchedule(this,e,t,r,a=>this.Su(a));return this.Eu.push(o),o}pu(){this.Au&&De()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}class ua extends sh{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new sy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sy(e),this._firestoreClient=void 0,await e}}}function Sk(n,e){const t=typeof n=="object"?n:dE(),r=typeof n=="string"?n:"(default)",o=Wf(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=oC("firestore");a&&wk(o,...a)}return o}function fp(n){if(n._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ik(n),n._firestoreClient}function Ik(n){var e,t,r;const o=n._freezeSettings(),a=function(d,f,g,_){return new J0(d,f,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Lw(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new gk(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yo($t.fromBase64String(e))}catch(t){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yo($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=/^__.*__$/;class Ck{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rl(e,this.data,t,this.fieldTransforms)}}class kw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class vp{constructor(e,t,r,o,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new vp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:r,Nu:!1});return o.Bu(e),o}Lu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:r,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Ac(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Rw(this.Mu)&&Tk.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Lk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||th(e)}$u(e,t,r,o=!1){return new vp({Mu:e,methodName:t,Ku:r,path:zt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yp(n){const e=n._freezeSettings(),t=th(n._databaseId);return new Lk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Pk(n,e,t,r,o,a={}){const u=n.$u(a.merge||a.mergeFields?2:0,e,t,o);_p("Data must be an object, but it was:",u,r);const d=Aw(r,u);let f,g;if(a.merge)f=new Pn(u.fieldMask),g=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const w of a.mergeFields){const I=xf(e,w,t);if(!u.contains(I))throw new ye(re.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);bw(_,I)||_.push(I)}f=new Pn(_),g=u.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,g=u.fieldTransforms;return new Ck(new pn(d),f,g)}class ah extends pp{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ah}}function kk(n,e,t,r){const o=n.$u(1,e,t);_p("Data must be an object, but it was:",o,r);const a=[],u=pn.empty();us(r,(f,g)=>{const _=Ep(e,f,t);g=Nt(g);const w=o.Lu(_);if(g instanceof ah)a.push(_);else{const I=Ml(g,w);I!=null&&(a.push(_),u.set(_,I))}});const d=new Pn(a);return new kw(u,d,o.fieldTransforms)}function Rk(n,e,t,r,o,a){const u=n.$u(1,e,t),d=[xf(e,r,t)],f=[o];if(a.length%2!=0)throw new ye(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<a.length;I+=2)d.push(xf(e,a[I])),f.push(a[I+1]);const g=[],_=pn.empty();for(let I=d.length-1;I>=0;--I)if(!bw(g,d[I])){const R=d[I];let P=f[I];P=Nt(P);const D=u.Lu(R);if(P instanceof ah)g.push(R);else{const M=Ml(P,D);M!=null&&(g.push(R),_.set(R,M))}}const w=new Pn(g);return new kw(_,w,u.fieldTransforms)}function Ak(n,e,t,r=!1){return Ml(t,n.$u(r?4:3,e))}function Ml(n,e){if(xw(n=Nt(n)))return _p("Unsupported field value:",e,n),Aw(n,e);if(n instanceof pp)return function(r,o){if(!Rw(o.Mu))throw o.qu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,o){const a=[];let u=0;for(const d of r){let f=Ml(d,o.ku(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(n,e)}return function(r,o){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _L(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Lt.fromDate(r);return{timestampValue:Lc(o.serializer,a)}}if(r instanceof Lt){const a=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(o.serializer,a)}}if(r instanceof gp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yo)return{bytesValue:KE(o.serializer,r._byteString)};if(r instanceof gn){const a=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw o.qu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:tp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof mp)return function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map(f=>{if(typeof f!="number")throw d.qu("VectorValues must only contain numeric values.");return Jf(d.serializer,f)})}}}}}}(r,o);throw o.qu(`Unsupported field value: ${ih(r)}`)}(n,e)}function Aw(n,e){const t={};return IE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(n,(r,o)=>{const a=Ml(o,e.Ou(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function xw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof gp||n instanceof Yo||n instanceof gn||n instanceof pp||n instanceof mp)}function _p(n,e,t){if(!xw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=ih(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function xf(n,e,t){if((e=Nt(e))instanceof oh)return e._internalPath;if(typeof e=="string")return Ep(n,e);throw Ac("Field path arguments must be of type string or ",n,!1,void 0,t)}const xk=new RegExp("[~\\*/\\[\\]]");function Ep(n,e,t){if(e.search(xk)>=0)throw Ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oh(...e.split("."))._internalPath}catch{throw Ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ac(n,e,t,r,o){const a=r&&!r.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${o}`),f+=")"),new ye(re.INVALID_ARGUMENT,d+n+f)}function bw(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class bk extends Mw{data(){return super.data()}}function wp(n,e){return typeof e=="string"?Ep(n,e):e instanceof oh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sp{}class Ok extends Sp{}function Dk(n,e,...t){let r=[];e instanceof Sp&&r.push(e),r=r.concat(t),function(a){const u=a.filter(f=>f instanceof Ip).length,d=a.filter(f=>f instanceof lh).length;if(u>1||u>0&&d>0)throw new ye(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class lh extends Ok{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new lh(e,t,r)}_apply(e){const t=this._parse(e);return Ow(e._query,t),new la(e.firestore,e.converter,wf(e._query,t))}_parse(e){const t=yp(e.firestore);return function(a,u,d,f,g,_,w){let I;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ye(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){ay(w,_);const R=[];for(const P of w)R.push(oy(f,a,P));I={arrayValue:{values:R}}}else I=oy(f,a,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||ay(w,_),I=Ak(d,u,w,_==="in"||_==="not-in");return St.create(g,_,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Nk(n,e,t){const r=e,o=wp("where",n);return lh._create(o,r,t)}class Ip extends Sp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ip(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:hr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let u=o;const d=a.getFlattenedFilters();for(const f of d)Ow(u,f),u=wf(u,f)}(e._query,t),new la(e.firestore,e.converter,wf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function oy(n,e,t){if(typeof(t=Nt(t))=="string"){if(t==="")throw new ye(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bE(e)&&t.indexOf("/")!==-1)throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(at.fromString(t));if(!Pe.isDocumentKey(r))throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pv(n,new Pe(r))}if(t instanceof gn)return Pv(n,t._key);throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ih(t)}.`)}function ay(n,e){if(!Array.isArray(n)||n.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ow(n,e){const t=function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Vk{convertValue(e,t="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return us(e,(o,a)=>{r[o]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(u=>vt(u.doubleValue));return new mp(a)}convertGeoPoint(e){return new gp(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Qc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const t=is(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=at.fromString(e);Xe(ew(r));const o=new pl(r.get(1),r.get(3)),a=new Pe(r.popFirst(5));return o.isEqual(t)||si(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dw extends Mw{constructor(e,t,r,o,a,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hc extends Dw{data(e={}){return super.data(e)}}class jk{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new rl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hc(this._firestore,this._userDataWriter,r.key,r,new rl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map(d=>{const f=new hc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new rl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new hc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new rl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return d.type!==0&&(g=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:Fk(d.type),doc:f,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Fk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(n){n=ai(n,gn);const e=ai(n.firestore,ua);return yk(fp(e),n._key).then(t=>$k(e,n,t))}class Nw extends Vk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}function Tp(n){n=ai(n,la);const e=ai(n.firestore,ua),t=fp(e),r=new Nw(e);return Mk(n._query),_k(t,n._query).then(o=>new jk(e,r,n,o))}function zk(n,e,t,...r){n=ai(n,gn);const o=ai(n.firestore,ua),a=yp(o);let u;return u=typeof(e=Nt(e))=="string"||e instanceof oh?Rk(a,"updateDoc",n._key,e,t,r):kk(a,"updateDoc",n._key,e),Cp(o,[u.toMutation(n._key,ur.exists(!0))])}function Vw(n){return Cp(ai(n.firestore,ua),[new Yf(n._key,ur.none())])}function Uw(n,e){const t=ai(n.firestore,ua),r=_l(n),o=Uk(n.converter,e);return Cp(t,[Pk(yp(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,ur.exists(!1))]).then(()=>r)}function Cp(n,e){return function(r,o){const a=new ri;return r.asyncQueue.enqueueAndForget(async()=>ok(await vk(r),o,a)),a.promise}(fp(n),e)}function $k(n,e,t){const r=t.docs.get(e._key),o=new Nw(n);return new Dw(n,o,e._key,r,new rl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ia=o})(ra),Ho(new zs("firestore",(r,{instanceIdentifier:o,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new ua(new O0(r.getProvider("auth-internal")),new U0(r.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(g.options.projectId,_)}(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Xi(wv,"4.7.6",e),Xi(wv,"4.7.6","esm2017")})();var Wk="firebase",Hk="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(Wk,Hk,"app");function Lp(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function jw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qk=jw,Fw=new Ll("auth","Firebase",jw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new zf("@firebase/auth");function Gk(n,...e){xc.logLevel<=$e.WARN&&xc.warn(`Auth (${ra}): ${n}`,...e)}function dc(n,...e){xc.logLevel<=$e.ERROR&&xc.error(`Auth (${ra}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(n,...e){throw kp(n,...e)}function cr(n,...e){return kp(n,...e)}function Pp(n,e,t){const r=Object.assign(Object.assign({},qk()),{[e]:t});return new Ll("auth","Firebase",r).create(e,{appName:n.name})}function ns(n){return Pp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kk(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&zn(n,"argument-error"),Pp(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kp(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Fw.create(n,...e)}function be(n,e,...t){if(!n)throw kp(e,...t)}function ei(n){const e="INTERNAL ASSERTION FAILED: "+n;throw dc(e),new Error(e)}function li(n,e){n||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Qk(){return ly()==="http:"||ly()==="https:"}function ly(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Qk()||dC()||"connection"in navigator)?navigator.onLine:!0}function Jk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t){this.shortDelay=e,this.longDelay=t,li(t>e,"Short delay should be less than long delay!"),this.isMobile=uC()||fC()}get(){return Zk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(n,e){li(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new Ol(3e4,6e4);function Gs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function hs(n,e,t,r,o={}){return zw(n,o,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=Pl(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:f},a);return hC()||(g.referrerPolicy="no-referrer"),Bw.fetch()($w(n,n.config.apiHost,t,d),g)})}async function zw(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Yk),e);try{const o=new tR(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw rc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,g]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw rc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw rc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw rc(n,"user-disabled",u);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Pp(n,_,g);zn(n,_)}}catch(o){if(o instanceof hi)throw o;zn(n,"network-request-failed",{message:String(o)})}}async function uh(n,e,t,r,o={}){const a=await hs(n,e,t,r,o);return"mfaPendingCredential"in a&&zn(n,"multi-factor-auth-required",{_serverResponse:a}),a}function $w(n,e,t,r){const o=`${e}${t}?${r}`;return n.config.emulator?Rp(n.config,o):`${n.config.apiScheme}://${o}`}function eR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(cr(this.auth,"network-request-failed")),Xk.get())})}}function rc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=cr(n,e,r);return o.customData._tokenResponse=t,o}function uy(n){return n!==void 0&&n.enterprise!==void 0}class nR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return eR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rR(n,e){return hs(n,"GET","/v2/recaptchaConfig",Gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(n,e){return hs(n,"POST","/v1/accounts:delete",e)}async function Ww(n,e){return hs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sR(n,e=!1){const t=Nt(n),r=await t.getIdToken(e),o=Ap(r);be(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:r,authTime:ll(ef(o.auth_time)),issuedAtTime:ll(ef(o.iat)),expirationTime:ll(ef(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function ef(n){return Number(n)*1e3}function Ap(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return dc("JWT malformed, contained fewer than 3 sections"),null;try{const o=sE(t);return o?JSON.parse(o):(dc("Failed to decode base64 JWT payload"),null)}catch(o){return dc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function cy(n){const e=Ap(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof hi&&oR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function oR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(n){var e;const t=n.auth,r=await n.getIdToken(),o=await El(n,Ww(t,{idToken:r}));be(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Hw(a.providerUserInfo):[],d=uR(n.providerData,u),f=n.isAnonymous,g=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),_=f?g:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Mf(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,w)}async function lR(n){const e=Nt(n);await bc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uR(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Hw(n){return n.map(e=>{var{providerId:t}=e,r=Lp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(n,e){const t=await zw(n,{},async()=>{const r=Pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=$w(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",Bw.fetch()(u,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hR(n,e){return hs(n,"POST","/v2/accounts:revokeToken",Gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=cy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await cR(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,u=new Bo;return r&&(be(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(be(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(be(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ti{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=Lp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Mf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await El(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sR(this,e)}reload(){return lR(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await bc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(br(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await El(this,iR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,u,d,f,g,_;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,P=(u=t.photoURL)!==null&&u!==void 0?u:void 0,D=(d=t.tenantId)!==null&&d!==void 0?d:void 0,M=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,q=(g=t.createdAt)!==null&&g!==void 0?g:void 0,$=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ee,emailVerified:W,isAnonymous:H,providerData:Q,stsTokenManager:k}=t;be(ee&&k,e,"internal-error");const L=Bo.fromJSON(this.name,k);be(typeof ee=="string",e,"internal-error"),Fi(w,e.name),Fi(I,e.name),be(typeof W=="boolean",e,"internal-error"),be(typeof H=="boolean",e,"internal-error"),Fi(R,e.name),Fi(P,e.name),Fi(D,e.name),Fi(M,e.name),Fi(q,e.name),Fi($,e.name);const T=new ti({uid:ee,auth:e,email:I,emailVerified:W,displayName:w,isAnonymous:H,photoURL:P,phoneNumber:R,tenantId:D,stsTokenManager:L,createdAt:q,lastLoginAt:$});return Q&&Array.isArray(Q)&&(T.providerData=Q.map(x=>Object.assign({},x))),M&&(T._redirectEventId=M),T}static async _fromIdTokenResponse(e,t,r=!1){const o=new Bo;o.updateFromServerResponse(t);const a=new ti({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await bc(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];be(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?Hw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Bo;d.updateFromIdToken(r);const f=new ti({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Mf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,g),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map;function ni(n){li(n instanceof Function,"Expected a class definition");let e=hy.get(n);return e?(li(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qw.type="NONE";const dy=qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(n,e,t){return`firebase:${n}:${e}:${t}`}class zo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=fc(this.userKey,o.apiKey,a),this.fullPersistenceKey=fc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new zo(ni(dy),e,r);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let a=o[0]||ni(dy);const u=fc(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(u);if(_){const w=ti._fromJSON(e,_);g!==a&&(d=w),a=g;break}}catch{}const f=o.filter(g=>g._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new zo(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==a)try{await g._remove(u)}catch{}})),new zo(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yw(e))return"Blackberry";if(Xw(e))return"Webos";if(Kw(e))return"Safari";if((e.includes("chrome/")||Qw(e))&&!e.includes("edge/"))return"Chrome";if(Jw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Gw(n=Jt()){return/firefox\//i.test(n)}function Kw(n=Jt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qw(n=Jt()){return/crios\//i.test(n)}function Zw(n=Jt()){return/iemobile/i.test(n)}function Jw(n=Jt()){return/android/i.test(n)}function Yw(n=Jt()){return/blackberry/i.test(n)}function Xw(n=Jt()){return/webos/i.test(n)}function xp(n=Jt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dR(n=Jt()){var e;return xp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fR(){return pC()&&document.documentMode===10}function eS(n=Jt()){return xp(n)||Jw(n)||Xw(n)||Yw(n)||/windows phone/i.test(n)||Zw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(n,e=[]){let t;switch(n){case"Browser":t=fy(Jt());break;case"Worker":t=`${fy(Jt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ra}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(n,e={}){return hs(n,"GET","/v2/passwordPolicy",Gs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=6;class vR{constructor(e){var t,r,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:mR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new py(this),this.idTokenSubscription=new py(this),this.beforeStateQueue=new pR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ni(t)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ww(this,{idToken:e}),r=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(br(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Jk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(br(this.app))return Promise.reject(ns(this));const t=e?Nt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return br(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return br(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gR(this),t=new vR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ll("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await hR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ni(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[ni(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,o);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Gk(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ks(n){return Nt(n)}class py{constructor(e){this.auth=e,this.observer=null,this.addObserver=SC(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _R(n){ch=n}function nS(n){return ch.loadJS(n)}function ER(){return ch.recaptchaEnterpriseScript}function wR(){return ch.gapiScript}function SR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class IR{constructor(){this.enterprise=new TR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class TR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const CR="recaptcha-enterprise",rS="NO_RECAPTCHA";class LR{constructor(e){this.type=CR,this.auth=Ks(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{rR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new nR(f);return a.tenantId==null?a._agentRecaptchaConfig=g:a._tenantRecaptchaConfigs[a.tenantId]=g,u(g.siteKey)}}).catch(f=>{d(f)})})}function o(a,u,d){const f=window.grecaptcha;uy(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(g=>{u(g)}).catch(()=>{u(rS)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IR().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{r(this.auth).then(d=>{if(!t&&uy(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=ER();f.length!==0&&(f+=d),nS(f).then(()=>{o(d,a,u)}).catch(g=>{u(g)})}}).catch(d=>{u(d)})})}}async function gy(n,e,t,r=!1,o=!1){const a=new LR(n);let u;if(o)u=rS;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function my(n,e,t,r,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await gy(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await gy(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(n,e){const t=Wf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(_c(a,e??{}))return o;zn(o,"already-initialized")}return t.initialize({options:e})}function kR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ni);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RR(n,e,t){const r=Ks(n);be(r._canInitEmulator,r,"emulator-config-failed"),be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=iS(e),{host:u,port:d}=AR(e),f=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${u}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),xR()}function iS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AR(n){const e=iS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:vy(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:vy(u)}}}function vy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,t){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function bR(n,e){return hs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(n,e){return uh(n,"POST","/v1/accounts:signInWithPassword",Gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(n,e){return uh(n,"POST","/v1/accounts:signInWithEmailLink",Gs(n,e))}async function DR(n,e){return uh(n,"POST","/v1/accounts:signInWithEmailLink",Gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends bp{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new wl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new wl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return my(e,t,"signInWithPassword",MR);case"emailLink":return OR(e,{email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return my(e,r,"signUpPassword",bR);case"emailLink":return DR(e,{idToken:t,email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(n,e){return uh(n,"POST","/v1/accounts:signInWithIdp",Gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="http://localhost";class Ws extends bp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=Lp(t,["providerId","signInMethod"]);if(!r||!o)return null;const u=new Ws(r,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,$o(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){const e={requestUri:NR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UR(n){const e=Ya(Xa(n)).link,t=e?Ya(Xa(e)).deep_link_id:null,r=Ya(Xa(n)).deep_link_id;return(r?Ya(Xa(r)).link:null)||r||t||e||n}class Mp{constructor(e){var t,r,o,a,u,d;const f=Ya(Xa(e)),g=(t=f.apiKey)!==null&&t!==void 0?t:null,_=(r=f.oobCode)!==null&&r!==void 0?r:null,w=VR((o=f.mode)!==null&&o!==void 0?o:null);be(g&&_&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=_,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=UR(e);try{return new Mp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.providerId=ca.PROVIDER_ID}static credential(e,t){return wl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Mp.parseLink(t);return be(r,"argument-error"),wl._fromEmailAndCode(e,r.code,r.tenantId)}}ca.PROVIDER_ID="password";ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends Op{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Dl{constructor(){super("facebook.com")}static credential(e){return Ws._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ws._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Xr.credential(t,r)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Dl{constructor(){super("github.com")}static credential(e){return Ws._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.GITHUB_SIGN_IN_METHOD="github.com";Hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Dl{constructor(){super("twitter.com")}static credential(e,t){return Ws._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qi.credential(t,r)}catch{return null}}}qi.TWITTER_SIGN_IN_METHOD="twitter.com";qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await ti._fromIdTokenResponse(e,r,o),u=yy(r);return new Xo({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=yy(r);return new Xo({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function yy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends hi{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Mc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new Mc(e,t,r,o)}}function sS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Mc._fromErrorAndOperation(n,a,e,r):a})}async function jR(n,e,t=!1){const r=await El(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Xo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(n,e,t=!1){const{auth:r}=n;if(br(r.app))return Promise.reject(ns(r));const o="reauthenticate";try{const a=await El(n,sS(r,o,e,n),t);be(a.idToken,r,"internal-error");const u=Ap(a.idToken);be(u,r,"internal-error");const{sub:d}=u;return be(n.uid===d,r,"user-mismatch"),Xo._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&zn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(n,e,t=!1){if(br(n.app))return Promise.reject(ns(n));const r="signIn",o=await sS(n,r,e),a=await Xo._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(a.user),a}async function BR(n,e){return oS(Ks(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(n){const e=Ks(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function $R(n,e,t){return br(n.app)?Promise.reject(ns(n)):BR(Nt(n),ca.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&zR(n),r})}function WR(n,e,t,r){return Nt(n).onIdTokenChanged(e,t,r)}function HR(n,e,t){return Nt(n).beforeAuthStateChanged(e,t)}function aS(n,e,t,r){return Nt(n).onAuthStateChanged(e,t,r)}function qR(n){return Nt(n).signOut()}const Oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Oc,"1"),this.storage.removeItem(Oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=1e3,KR=10;class uS extends lS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);fR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,KR):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},GR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}uS.type="LOCAL";const QR=uS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS extends lS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cS.type="SESSION";const hS=cS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new hh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(u).map(async g=>g(t.origin,a)),f=await ZR(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const g=Dp("",20);o.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(w){const I=w;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(I.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return window}function YR(n){Dr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}async function XR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eA(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function tA(){return dS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="firebaseLocalStorageDb",nA=1,Dc="firebaseLocalStorage",pS="fbase_key";class Nl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function dh(n,e){return n.transaction([Dc],e?"readwrite":"readonly").objectStore(Dc)}function rA(){const n=indexedDB.deleteDatabase(fS);return new Nl(n).toPromise()}function Of(){const n=indexedDB.open(fS,nA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Dc,{keyPath:pS})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Dc)?e(r):(r.close(),await rA(),e(await Of()))})})}async function _y(n,e,t){const r=dh(n,!0).put({[pS]:e,value:t});return new Nl(r).toPromise()}async function iA(n,e){const t=dh(n,!1).get(e),r=await new Nl(t).toPromise();return r===void 0?null:r.value}function Ey(n,e){const t=dh(n,!0).delete(e);return new Nl(t).toPromise()}const sA=800,oA=3;class gS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Of(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>oA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hh._getInstance(tA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await XR(),!this.activeServiceWorker)return;this.sender=new JR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Of();return await _y(e,Oc,"1"),await Ey(e,Oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>_y(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>iA(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ey(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=dh(o,!1).getAll();return new Nl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gS.type="LOCAL";const aA=gS;new Ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(n,e){return e?ni(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends bp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lA(n){return oS(n.auth,new Np(n),n.bypassAuthState)}function uA(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),FR(t,new Np(n),n.bypassAuthState)}async function cA(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),jR(t,new Np(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lA;case"linkViaPopup":case"linkViaRedirect":return cA;case"reauthViaPopup":case"reauthViaRedirect":return uA;default:zn(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new Ol(2e3,1e4);async function dA(n,e,t){if(br(n.app))return Promise.reject(cr(n,"operation-not-supported-in-this-environment"));const r=Ks(n);Kk(n,e,Op);const o=mS(r,t);return new Bs(r,"signInViaPopup",e,o).executeNotNull()}class Bs extends vS{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,Bs.currentPopupAction&&Bs.currentPopupAction.cancel(),Bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");const e=Dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hA.get())};e()}}Bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="pendingRedirect",pc=new Map;class pA extends vS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=pc.get(this.auth._key());if(!e){try{const r=await gA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}pc.set(this.auth._key(),e)}return this.bypassAuthState||pc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gA(n,e){const t=yA(e),r=vA(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function mA(n,e){pc.set(n._key(),e)}function vA(n){return ni(n._redirectPersistence)}function yA(n){return fc(fA,n.config.apiKey,n.name)}async function _A(n,e,t=!1){if(br(n.app))return Promise.reject(ns(n));const r=Ks(n),o=mS(r,e),u=await new pA(r,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=10*60*1e3;class wA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!yS(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(cr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EA&&this.cachedEventUids.clear(),this.cachedEventUids.has(wy(e))}saveEventToCache(e){this.cachedEventUids.add(wy(e)),this.lastProcessedEventTime=Date.now()}}function wy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function yS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(n,e={}){return hs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CA=/^https?/;async function LA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await IA(n);for(const t of e)try{if(PA(t))return}catch{}zn(n,"unauthorized-domain")}function PA(n){const e=bf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!CA.test(t))return!1;if(TA.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Ol(3e4,6e4);function Sy(){const n=Dr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function RA(n){return new Promise((e,t)=>{var r,o,a;function u(){Sy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sy(),t(cr(n,"network-request-failed"))},timeout:kA.get()})}if(!((o=(r=Dr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Dr().gapi)===null||a===void 0)&&a.load)u();else{const d=SR("iframefcb");return Dr()[d]=()=>{gapi.load?u():t(cr(n,"network-request-failed"))},nS(`${wR()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw gc=null,e})}let gc=null;function AA(n){return gc=gc||RA(n),gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new Ol(5e3,15e3),bA="__/auth/iframe",MA="emulator/auth/iframe",OA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NA(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Rp(e,MA):`https://${n.config.authDomain}/${bA}`,r={apiKey:e.apiKey,appName:n.name,v:ra},o=DA.get(n.config.apiHost);o&&(r.eid=o);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Pl(r).slice(1)}`}async function VA(n){const e=await AA(n),t=Dr().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:NA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OA,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const u=cr(n,"network-request-failed"),d=Dr().setTimeout(()=>{a(u)},xA.get());function f(){Dr().clearTimeout(d),o(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jA=500,FA=600,BA="_blank",zA="http://localhost";class Iy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $A(n,e,t,r=jA,o=FA){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},UA),{width:r.toString(),height:o.toString(),top:a,left:u}),g=Jt().toLowerCase();t&&(d=Qw(g)?BA:t),Gw(g)&&(e=e||zA,f.scrollbars="yes");const _=Object.entries(f).reduce((I,[R,P])=>`${I}${R}=${P},`,"");if(dR(g)&&d!=="_self")return WA(e||"",d),new Iy(null);const w=window.open(e||"",d,_);be(w,n,"popup-blocked");try{w.focus()}catch{}return new Iy(w)}function WA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="__/auth/handler",qA="emulator/auth/handler",GA=encodeURIComponent("fac");async function Ty(n,e,t,r,o,a){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ra,eventId:o};if(e instanceof Op){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",wC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))u[_]=w}if(e instanceof Dl){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),g=f?`#${GA}=${encodeURIComponent(f)}`:"";return`${KA(n)}?${Pl(d).slice(1)}${g}`}function KA({config:n}){return n.emulator?Rp(n,qA):`https://${n.authDomain}/${HA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="webStorageSupport";class QA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hS,this._completeRedirectFn=_A,this._overrideRedirectResult=mA}async _openPopup(e,t,r,o){var a;li((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await Ty(e,t,r,bf(),o);return $A(e,u,Dp())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await Ty(e,t,r,bf(),o);return YR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(li(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await VA(e),r=new wA(e);return t.register("authEvent",o=>(be(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tf,{type:tf},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[tf];u!==void 0&&t(!!u),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eS()||Kw()||xp()}}const ZA=QA;var Cy="@firebase/auth",Ly="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XA(n){Ho(new zs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;be(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tS(n)},g=new yR(r,o,a,f);return kR(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ho(new zs("auth-internal",e=>{const t=Ks(e.getProvider("auth").getImmediate());return(r=>new JA(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(Cy,Ly,YA(n)),Xi(Cy,Ly,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=5*60,tx=lE("authIdTokenMaxAge")||ex;let Py=null;const nx=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>tx)return;const o=t==null?void 0:t.token;Py!==o&&(Py=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function rx(n=dE()){const e=Wf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=PR(n,{popupRedirectResolver:ZA,persistence:[aA,QR,hS]}),r=lE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=nx(a.toString());HR(t,u,()=>u(t.currentUser)),WR(t,d=>u(d))}}const o=oE("auth");return o&&RR(t,`http://${o}`),t}function ix(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}_R({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const a=cr("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",ix().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XA("Browser");const sx={apiKey:"AIzaSyDkuORkd8sA-p8D8S1-xw6dUptjPH3pULM",authDomain:"airbnb-clone-915c4.firebaseapp.com",projectId:"airbnb-clone-915c4",storageBucket:"airbnb-clone-915c4.firebasestorage.app",messagingSenderId:"474894328567",appId:"1:474894328567:web:32a22923d2802da6f8e9f2"},_S=hE(sx),Vr=rx(_S),ox=new Xr,ui=Sk(_S);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ax(n,e,t,r){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function d(_){try{g(r.next(_))}catch(w){u(w)}}function f(_){try{g(r.throw(_))}catch(w){u(w)}}function g(_){_.done?a(_.value):o(_.value).then(d,f)}g((r=r.apply(n,[])).next())})}function lx(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(g){return function(_){return f([g,_])}}function f(g){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(a=g[0]&2?o.return:g[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,g[1])).done)return a;switch(o=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,o=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){t.label=g[1];break}if(g[0]===6&&t.label<a[1]){t.label=a[1],a=g;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(g);break}a[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(_){g=[6,_],o=0}finally{r=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Uo=function(){return Uo=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Uo.apply(this,arguments)},ES=function(n){return{loading:n==null,value:n}},ux=function(){return function(n,e){switch(e.type){case"error":return Uo(Uo({},n),{error:e.error,loading:!1,value:void 0});case"reset":return ES(e.defaultValue);case"value":return Uo(Uo({},n),{error:void 0,loading:!1,value:e.value});default:return n}}},cx=function(n){var e=n?n():void 0,t=y.useReducer(ux(),ES(e)),r=t[0],o=t[1],a=y.useCallback(function(){var f=n?n():void 0;o({type:"reset",defaultValue:f})},[n]),u=y.useCallback(function(f){o({type:"error",error:f})},[]),d=y.useCallback(function(f){o({type:"value",value:f})},[]);return y.useMemo(function(){return{error:r.error,loading:r.loading,reset:a,setError:u,setValue:d,value:r.value}},[r.error,r.loading,a,u,d,r.value])},ha=function(n,e){var t=cx(function(){return n.currentUser}),r=t.error,o=t.loading,a=t.setError,u=t.setValue,d=t.value;return y.useEffect(function(){var f=aS(n,function(g){return ax(void 0,void 0,void 0,function(){var _;return lx(this,function(w){switch(w.label){case 0:return[3,4];case 1:return w.trys.push([1,3,,4]),[4,e.onUserChanged(g)];case 2:return w.sent(),[3,4];case 3:return _=w.sent(),a(_),[3,4];case 4:return u(g),[2]}})})},a);return function(){f()}},[n]),[d,o,r]};const wS=({id:n,title:e,image:t,price:r,location:o,userId:a})=>{const[u,d]=y.useState(!1),[f]=ha(Vr);y.useEffect(()=>{const w=JSON.parse(localStorage.getItem("favorites")||"[]");d(w.includes(n))},[n]);const g=()=>{let w=JSON.parse(localStorage.getItem("favorites")||"[]");u?w=w.filter(I=>I!==n):w.push(n),localStorage.setItem("favorites",JSON.stringify(w)),d(!u)},_=async()=>{if(window.confirm("Voulez-vous vraiment supprimer cette annonce ?")){if(!f||f.uid!==a){alert("Vous n'avez pas l'autorisation de supprimer cette annonce !");return}try{await Vw(_l(ui,"listings",n)),alert("Annonce supprimée avec succès !"),window.location.reload()}catch(w){console.error("Erreur lors de la suppression :",w),alert("Erreur lors de la suppression !")}}};return Z.jsxs("div",{className:"glass border rounded-lg shadow-lg overflow-hidden transition-transform hover:scale-105 duration-300",children:[Z.jsx("img",{src:t,alt:e,className:"w-full h-48 object-cover rounded-t-lg"}),Z.jsxs("div",{className:"p-4",children:[Z.jsx("h2",{className:"text-lg font-bold text-gray-900",children:e}),Z.jsx("p",{className:"text-gray-700 font-medium",children:o}),Z.jsxs("p",{className:"text-gray-800 font-semibold",children:[r,"€ / nuit"]}),Z.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[Z.jsx(Vo,{to:`/listing/${n}`,className:"bg-blue-500 text-white px-4 py-2 rounded-lg text-center hover:bg-blue-600",children:"Voir Plus"}),Z.jsx("button",{onClick:g,className:`px-4 py-2 text-white rounded-lg w-full ${u?"bg-red-500":"bg-gray-500 hover:bg-gray-700"}`,children:u?"❤️ Retirer des favoris":"🤍 Ajouter aux favoris"}),f&&f.uid===a&&Z.jsxs(Z.Fragment,{children:[Z.jsx(Vo,{to:`/edit-listing/${n}`,className:"bg-yellow-500 text-white px-4 py-2 rounded-lg text-center hover:bg-yellow-600",children:"Modifier"}),Z.jsx("button",{onClick:_,className:"bg-red-600 text-white px-4 py-2 rounded-lg w-full hover:bg-red-700",children:"Supprimer"})]})]})]})]})},ky=[{id:1,title:"Appartement cosy à Paris",image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6",price:120,location:"Paris, France"},{id:2,title:"Villa avec piscine à Nice",image:"https://images.unsplash.com/photo-1600585154340-be6161a56a0c",price:250,location:"Nice, France"},{id:3,title:"Chalet en montagne à Chamonix",image:"https://images.unsplash.com/photo-1502672023488-70e25813eb80",price:180,location:"Chamonix, France"},{id:4,title:"Loft moderne à Lyon",image:"https://images.unsplash.com/photo-1571055107559-3e67626f86f2",price:140,location:"Lyon, France"},{id:5,title:"Maison de campagne en Provence",image:"https://images.unsplash.com/photo-1600596542815-ffad4c1539a9",price:200,location:"Provence, France"},{id:6,title:"Appartement avec terrasse à Bordeaux",image:"https://images.unsplash.com/photo-1560185007-a5ef5b951a04",price:160,location:"Bordeaux, France"},{id:7,title:"Penthouse à Marseille",image:"https://images.unsplash.com/photo-1600596542815-ffad4c1539a9",price:300,location:"Marseille, France"},{id:8,title:"Studio économique à Toulouse",image:"https://images.unsplash.com/photo-1598928636135-d6ddca51f3d8",price:90,location:"Toulouse, France"}],hx=()=>{const[n,e]=y.useState([]),[t,r]=y.useState("");y.useEffect(()=>{(async()=>{try{const d=(await Tp(yl(ui,"listings"))).docs.map(f=>({id:f.id,...f.data()}));e([...ky,...d])}catch(u){console.error("Erreur lors de la récupération des annonces:",u),e(ky)}})()},[]);const o=n.filter(a=>a.title.toLowerCase().includes(t.toLowerCase())||a.location.toLowerCase().includes(t.toLowerCase()));return Z.jsxs("div",{className:"container mx-auto mt-20 p-6",children:[Z.jsx("h1",{className:"text-4xl font-bold text-center text-white drop-shadow-lg",children:"🏡 Découvrez nos logements"}),Z.jsx("div",{className:"mt-6 flex justify-center",children:Z.jsx("input",{type:"text",placeholder:"Rechercher un logement...",value:t,onChange:a=>r(a.target.value),className:"p-2 border rounded-md w-1/2"})}),Z.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mt-8",children:o.length>0?o.map(a=>Z.jsx("div",{className:"glass",children:Z.jsx(wS,{...a})},a.id)):Z.jsx("p",{className:"text-center text-gray-500 col-span-3",children:"Aucun logement trouvé."})})]})};function Sl(n){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sl(n)}function dx(n,e){if(Sl(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Sl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fx(n){var e=dx(n,"string");return Sl(e)=="symbol"?e:e+""}function X(n,e,t){return(e=fx(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var nf,Ry;function px(){if(Ry)return nf;Ry=1;var n=function(t,r,o,a,u,d,f,g){if(!t){var _;if(r===void 0)_=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var w=[o,a,u,d,f,g],I=0;_=new Error(r.replace(/%s/g,function(){return w[I++]})),_.name="Invariant Violation"}throw _.framesToPop=1,_}};return nf=n,nf}var gx=px(),kt=SS(gx),je=y.createContext(null);function mx(){kt(!!y.useContext,"useGoogleMap is React hook and requires React version 16.8+");var n=y.useContext(je);return kt(!!n,"useGoogleMap needs a GoogleMap available up in the tree"),n}function vx(n,e,t){return Object.keys(n).reduce(function(o,a){return e(o,n[a],a)},t)}function yx(n,e){Object.keys(n).forEach(t=>e(n[t],t))}function _x(n,e,t,r){var o={},a=(u,d)=>{var f=t[d];f!==e[d]&&(o[d]=f,u(r,f))};return yx(n,a),o}function Ex(n,e,t){var r=vx(t,function(a,u,d){return typeof n[d]=="function"&&a.push(google.maps.event.addListener(e,u,n[d])),a},[]);return r}function wx(n){google.maps.event.removeListener(n)}function ze(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];n.forEach(wx)}function Be(n){var{updaterMap:e,eventMap:t,prevProps:r,nextProps:o,instance:a}=n,u=Ex(o,a,t);return _x(e,r,o,a),u}var Ay={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},xy={extraMapTypes(n,e){e.forEach(function(r,o){n.mapTypes.set(String(o),r)})},center(n,e){n.setCenter(e)},clickableIcons(n,e){n.setClickableIcons(e)},heading(n,e){n.setHeading(e)},mapTypeId(n,e){n.setMapTypeId(e)},options(n,e){n.setOptions(e)},streetView(n,e){n.setStreetView(e)},tilt(n,e){n.setTilt(e)},zoom(n,e){n.setZoom(e)}};function Sx(n){var{children:e,options:t,id:r,mapContainerStyle:o,mapContainerClassName:a,center:u,onClick:d,onDblClick:f,onDrag:g,onDragEnd:_,onDragStart:w,onMouseMove:I,onMouseOut:R,onMouseOver:P,onMouseDown:D,onMouseUp:M,onRightClick:q,onCenterChanged:$,onLoad:ee,onUnmount:W}=n,[H,Q]=y.useState(null),k=y.useRef(null),[L,T]=y.useState(null),[x,O]=y.useState(null),[N,A]=y.useState(null),[_e,Ie]=y.useState(null),[Ae,Ce]=y.useState(null),[te,ce]=y.useState(null),[se,U]=y.useState(null),[J,ie]=y.useState(null),[pe,G]=y.useState(null),[Te,Le]=y.useState(null),[de,Me]=y.useState(null),[me,Ue]=y.useState(null);return y.useEffect(()=>{t&&H!==null&&H.setOptions(t)},[H,t]),y.useEffect(()=>{H!==null&&typeof u<"u"&&H.setCenter(u)},[H,u]),y.useEffect(()=>{H&&f&&(x!==null&&google.maps.event.removeListener(x),O(google.maps.event.addListener(H,"dblclick",f)))},[f]),y.useEffect(()=>{H&&_&&(N!==null&&google.maps.event.removeListener(N),A(google.maps.event.addListener(H,"dragend",_)))},[_]),y.useEffect(()=>{H&&w&&(_e!==null&&google.maps.event.removeListener(_e),Ie(google.maps.event.addListener(H,"dragstart",w)))},[w]),y.useEffect(()=>{H&&D&&(Ae!==null&&google.maps.event.removeListener(Ae),Ce(google.maps.event.addListener(H,"mousedown",D)))},[D]),y.useEffect(()=>{H&&I&&(te!==null&&google.maps.event.removeListener(te),ce(google.maps.event.addListener(H,"mousemove",I)))},[I]),y.useEffect(()=>{H&&R&&(se!==null&&google.maps.event.removeListener(se),U(google.maps.event.addListener(H,"mouseout",R)))},[R]),y.useEffect(()=>{H&&P&&(J!==null&&google.maps.event.removeListener(J),ie(google.maps.event.addListener(H,"mouseover",P)))},[P]),y.useEffect(()=>{H&&M&&(pe!==null&&google.maps.event.removeListener(pe),G(google.maps.event.addListener(H,"mouseup",M)))},[M]),y.useEffect(()=>{H&&q&&(Te!==null&&google.maps.event.removeListener(Te),Le(google.maps.event.addListener(H,"rightclick",q)))},[q]),y.useEffect(()=>{H&&d&&(de!==null&&google.maps.event.removeListener(de),Me(google.maps.event.addListener(H,"click",d)))},[d]),y.useEffect(()=>{H&&g&&(me!==null&&google.maps.event.removeListener(me),Ue(google.maps.event.addListener(H,"drag",g)))},[g]),y.useEffect(()=>{H&&$&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener(H,"center_changed",$)))},[d]),y.useEffect(()=>{var Rt=k.current===null?null:new google.maps.Map(k.current,t);return Q(Rt),Rt!==null&&ee&&ee(Rt),()=>{Rt!==null&&W&&W(Rt)}},[]),Z.jsx("div",{id:r,ref:k,style:o,className:a,children:Z.jsx(je.Provider,{value:H,children:H!==null?e:null})})}y.memo(Sx);class Ix extends y.PureComponent{constructor(){super(...arguments),X(this,"state",{map:null}),X(this,"registeredEvents",[]),X(this,"mapRef",null),X(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),X(this,"panTo",e=>{var t=this.getInstance();t&&t.panTo(e)}),X(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),X(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=Be({updaterMap:xy,eventMap:Ay,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:xy,eventMap:Ay,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),ze(this.registeredEvents))}render(){return Z.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:Z.jsx(je.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function by(n,e,t,r,o,a,u){try{var d=n[a](u),f=d.value}catch(g){return void t(g)}d.done?e(f):Promise.resolve(f).then(r,o)}function IS(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function u(f){by(a,r,o,u,d,"next",f)}function d(f){by(a,r,o,u,d,"throw",f)}u(void 0)})}}function TS(n){var{googleMapsApiKey:e,googleMapsClientId:t,version:r="weekly",language:o,region:a,libraries:u,channel:d,mapIds:f,authReferrerPolicy:g}=n,_=[];return kt(e&&t||!(e&&t),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?_.push("key=".concat(e)):t&&_.push("client=".concat(t)),r&&_.push("v=".concat(r)),o&&_.push("language=".concat(o)),a&&_.push("region=".concat(a)),u&&u.length&&_.push("libraries=".concat(u.sort().join(","))),d&&_.push("channel=".concat(d)),f&&f.length&&_.push("map_ids=".concat(f.join(","))),g&&_.push("auth_referrer_policy=".concat(g)),_.push("loading=async"),_.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(_.join("&"))}var Qi=typeof document<"u";function CS(n){var{url:e,id:t,nonce:r}=n;return Qi?new Promise(function(a,u){var d=document.getElementById(t),f=window;if(d){var g=d.getAttribute("data-state");if(d.src===e&&g!=="error"){if(g==="ready")return a(t);var _=f.initMap,w=d.onerror;f.initMap=function(){_&&_(),a(t)},d.onerror=function(R){w&&w(R),u(R)};return}else d.remove()}var I=document.createElement("script");I.type="text/javascript",I.src=e,I.id=t,I.async=!0,I.nonce=r||"",I.onerror=function(P){I.setAttribute("data-state","error"),u(P)},f.initMap=function(){I.setAttribute("data-state","ready"),a(t)},document.head.appendChild(I)}).catch(o=>{throw console.error("injectScript error: ",o),o}):Promise.reject(new Error("document is undefined"))}function My(n){var e=n.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:n.tagName.toLowerCase()==="style"&&n.styleSheet&&n.styleSheet.cssText&&n.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(n.styleSheet.cssText="",!0):n.tagName.toLowerCase()==="style"&&n.innerHTML&&n.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(n.innerHTML="",!0):n.tagName.toLowerCase()==="style"&&!n.styleSheet&&!n.innerHTML}function Vp(){var n=document.getElementsByTagName("head")[0];if(n){var e=n.insertBefore.bind(n);n.insertBefore=function(o,a){return My(o)||Reflect.apply(e,n,[o,a]),o};var t=n.appendChild.bind(n);n.appendChild=function(o){return My(o)||Reflect.apply(t,n,[o]),o}}}var Qa=!1;function LS(){return Z.jsx("div",{children:"Loading..."})}var Il={id:"script-loader",version:"weekly"};class Tx extends y.PureComponent{constructor(){super(...arguments),X(this,"check",y.createRef()),X(this,"state",{loaded:!1}),X(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),X(this,"isCleaningUp",IS(function*(){function e(t){if(!Qa)t();else if(Qi)var r=window.setInterval(function(){Qa||(window.clearInterval(r),t())},1)}return new Promise(e)})),X(this,"cleanup",()=>{Qa=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(r){return typeof r.src=="string"&&r.src.includes("maps.googleapis")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(r){return r.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(r){return r.innerText!==void 0&&r.innerText.length>0&&r.innerText.includes(".gm-")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)})}),X(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&Vp(),kt(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:TS(this.props)};CS(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(t=>{this.props.onError&&this.props.onError(t),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})})}componentDidMount(){if(Qi){if(window.google&&window.google.maps&&!Qa){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(t){console.error("Error at injecting script after cleaning up: ",t)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Qi&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Qi){this.cleanup();var e=()=>{this.check.current||(delete window.google,Qa=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{ref:this.check}),this.state.loaded?this.props.children:this.props.loadingElement||Z.jsx(LS,{})]})}}X(Tx,"defaultProps",Il);function Cx(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function Up(n,e){if(n==null)return{};var t,r,o=Cx(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}var Oy;function Lx(n){var{id:e=Il.id,version:t=Il.version,nonce:r,googleMapsApiKey:o,googleMapsClientId:a,language:u,region:d,libraries:f,preventGoogleFontsLoading:g,channel:_,mapIds:w,authReferrerPolicy:I}=n,R=y.useRef(!1),[P,D]=y.useState(!1),[M,q]=y.useState(void 0);y.useEffect(function(){return R.current=!0,()=>{R.current=!1}},[]),y.useEffect(function(){Qi&&g&&Vp()},[g]),y.useEffect(function(){P&&kt(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[P]);var $=TS({version:t,googleMapsApiKey:o,googleMapsClientId:a,language:u,region:d,libraries:f,channel:_,mapIds:w,authReferrerPolicy:I});y.useEffect(function(){if(!Qi)return;function H(){R.current&&(D(!0),Oy=$)}if(window.google&&window.google.maps&&Oy===$){H();return}CS({id:e,url:$,nonce:r}).then(H).catch(function(k){R.current&&q(k),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(o||"-",") or Client ID (").concat(a||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(k)})},[e,$,r]);var ee=y.useRef();return y.useEffect(function(){ee.current&&f!==ee.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),ee.current=f},[f]),{isLoaded:P,loadError:M,url:$}}var Px=["loadingElement","onLoad","onError","onUnmount","children"],kx=Z.jsx(LS,{});function Rx(n){var{loadingElement:e,onLoad:t,onError:r,onUnmount:o,children:a}=n,u=Up(n,Px),{isLoaded:d,loadError:f}=Lx(u);return y.useEffect(function(){d&&typeof t=="function"&&t()},[d,t]),y.useEffect(function(){f&&typeof r=="function"&&r(f)},[f,r]),y.useEffect(function(){return()=>{o&&o()}},[o]),d?a:e||kx}y.memo(Rx);function Ax(n,e,t,r){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function d(_){try{g(r.next(_))}catch(w){u(w)}}function f(_){try{g(r.throw(_))}catch(w){u(w)}}function g(_){_.done?a(_.value):o(_.value).then(d,f)}g((r=r.apply(n,[])).next())})}function xx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bx=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,o,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(!n(e[o],t[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[o]))return!1;for(o=r;o--!==0;){var u=a[o];if(!n(e[u],t[u]))return!1}return!0}return e!==e&&t!==t},Mx=xx(bx),Dy="__googleMapsScriptId",jo;(function(n){n[n.INITIALIZED=0]="INITIALIZED",n[n.LOADING=1]="LOADING",n[n.SUCCESS=2]="SUCCESS",n[n.FAILURE=3]="FAILURE"})(jo||(jo={}));class js{constructor(e){var{apiKey:t,authReferrerPolicy:r,channel:o,client:a,id:u=Dy,language:d,libraries:f=[],mapIds:g,nonce:_,region:w,retries:I=3,url:R="https://maps.googleapis.com/maps/api/js",version:P}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=o,this.client=a,this.id=u||Dy,this.language=d,this.libraries=f,this.mapIds=g,this.nonce=_,this.region=w,this.retries=I,this.url=R,this.version=P,js.instance){if(!Mx(this.options,js.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(js.instance.options)));return js.instance}js.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?jo.FAILURE:this.done?jo.SUCCESS:this.loading?jo.LOADING:jo.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(r=>{r?t(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}var r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(a=>!r[a]&&delete r[a]),!((t=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(a=>{var u,d,f,g="The Google Maps JavaScript API",_="google",w="importLibrary",I="__ib__",R=document,P=window;P=P[_]||(P[_]={});var D=P.maps||(P.maps={}),M=new Set,q=new URLSearchParams,$=()=>u||(u=new Promise((ee,W)=>Ax(this,void 0,void 0,function*(){var H;yield d=R.createElement("script"),d.id=this.id,q.set("libraries",[...M]+"");for(f in a)q.set(f.replace(/[A-Z]/g,Q=>"_"+Q[0].toLowerCase()),a[f]);q.set("callback",_+".maps."+I),d.src=this.url+"?"+q,D[I]=ee,d.onerror=()=>u=W(Error(g+" could not load.")),d.nonce=this.nonce||((H=R.querySelector("script[nonce]"))===null||H===void 0?void 0:H.nonce)||"",R.head.append(d)})));D[w]?console.warn(g+" only loads once. Ignoring:",a):D[w]=function(ee){for(var W=arguments.length,H=new Array(W>1?W-1:0),Q=1;Q<W;Q++)H[Q-1]=arguments[Q];return M.add(ee)&&$().then(()=>D[w](ee,...H))}})(r);var o=this.libraries.map(a=>this.importLibrary(a));o.length||o.push(this.importLibrary("core")),Promise.all(o).then(()=>this.callback(),a=>{var u=new ErrorEvent("error",{error:a});this.loadErrorCallback(u)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var t=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(t," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var Ox=["maps"];function Dx(n){var{id:e=Il.id,version:t=Il.version,nonce:r,googleMapsApiKey:o,language:a,region:u,libraries:d=Ox,preventGoogleFontsLoading:f,mapIds:g,authReferrerPolicy:_}=n,w=y.useRef(!1),[I,R]=y.useState(!1),[P,D]=y.useState(void 0);y.useEffect(function(){return w.current=!0,()=>{w.current=!1}},[]);var M=y.useMemo(()=>new js({id:e,apiKey:o,version:t,libraries:d,language:a||"en",region:u||"US",mapIds:g||[],nonce:r||"",authReferrerPolicy:_||"origin"}),[e,o,t,d,a,u,g,r,_]);y.useEffect(function(){I||M.load().then(()=>{w.current&&R(!0)}).catch(ee=>{D(ee)})},[]),y.useEffect(()=>{Qi&&f&&Vp()},[f]);var q=y.useRef();return y.useEffect(()=>{q.current&&d!==q.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),q.current=d},[d]),{isLoaded:I,loadError:P}}function Ny(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Nc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ny(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ny(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Vy={},Uy={options(n,e){n.setOptions(e)}};function Nx(n){var{options:e,onLoad:t,onUnmount:r}=n,o=y.useContext(je),[a,u]=y.useState(null);return y.useEffect(()=>{a!==null&&a.setMap(o)},[o]),y.useEffect(()=>{e&&a!==null&&a.setOptions(e)},[a,e]),y.useEffect(()=>{var d=new google.maps.TrafficLayer(Nc(Nc({},e),{},{map:o}));return u(d),t&&t(d),()=>{a!==null&&(r&&r(a),a.setMap(null))}},[]),null}y.memo(Nx);class Vx extends y.PureComponent{constructor(){super(...arguments),X(this,"state",{trafficLayer:null}),X(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),X(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(Nc(Nc({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:Uy,eventMap:Vy,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Uy,eventMap:Vy,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),ze(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}X(Vx,"contextType",je);function Ux(n){var{onLoad:e,onUnmount:t}=n,r=y.useContext(je),[o,a]=y.useState(null);return y.useEffect(()=>{o!==null&&o.setMap(r)},[r]),y.useEffect(()=>{var u=new google.maps.BicyclingLayer;return a(u),u.setMap(r),e&&e(u),()=>{u!==null&&(t&&t(u),u.setMap(null))}},[]),null}y.memo(Ux);class jx extends y.PureComponent{constructor(){super(...arguments),X(this,"state",{bicyclingLayer:null}),X(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}X(jx,"contextType",je);function Fx(n){var{onLoad:e,onUnmount:t}=n,r=y.useContext(je),[o,a]=y.useState(null);return y.useEffect(()=>{o!==null&&o.setMap(r)},[r]),y.useEffect(()=>{var u=new google.maps.TransitLayer;return a(u),u.setMap(r),e&&e(u),()=>{o!==null&&(t&&t(o),o.setMap(null))}},[]),null}y.memo(Fx);class Bx extends y.PureComponent{constructor(){super(...arguments),X(this,"state",{transitLayer:null}),X(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}X(Bx,"contextType",je);function jy(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Vc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jy(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jy(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Fy={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},By={drawingMode(n,e){n.setDrawingMode(e)},options(n,e){n.setOptions(e)}};function zx(n){var{options:e,drawingMode:t,onCircleComplete:r,onMarkerComplete:o,onOverlayComplete:a,onPolygonComplete:u,onPolylineComplete:d,onRectangleComplete:f,onLoad:g,onUnmount:_}=n,w=y.useContext(je),[I,R]=y.useState(null),[P,D]=y.useState(null),[M,q]=y.useState(null),[$,ee]=y.useState(null),[W,H]=y.useState(null),[Q,k]=y.useState(null),[L,T]=y.useState(null);return y.useEffect(()=>{I!==null&&I.setMap(w)},[w]),y.useEffect(()=>{e&&I!==null&&I.setOptions(e)},[I,e]),y.useEffect(()=>{I!==null&&I.setDrawingMode(t??null)},[I,t]),y.useEffect(()=>{I&&r&&(P!==null&&google.maps.event.removeListener(P),D(google.maps.event.addListener(I,"circlecomplete",r)))},[I,r]),y.useEffect(()=>{I&&o&&(M!==null&&google.maps.event.removeListener(M),q(google.maps.event.addListener(I,"markercomplete",o)))},[I,o]),y.useEffect(()=>{I&&a&&($!==null&&google.maps.event.removeListener($),ee(google.maps.event.addListener(I,"overlaycomplete",a)))},[I,a]),y.useEffect(()=>{I&&u&&(W!==null&&google.maps.event.removeListener(W),H(google.maps.event.addListener(I,"polygoncomplete",u)))},[I,u]),y.useEffect(()=>{I&&d&&(Q!==null&&google.maps.event.removeListener(Q),k(google.maps.event.addListener(I,"polylinecomplete",d)))},[I,d]),y.useEffect(()=>{I&&f&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener(I,"rectanglecomplete",f)))},[I,f]),y.useEffect(()=>{kt(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var x=new google.maps.drawing.DrawingManager(Vc(Vc({},e),{},{map:w}));return t&&x.setDrawingMode(t),r&&D(google.maps.event.addListener(x,"circlecomplete",r)),o&&q(google.maps.event.addListener(x,"markercomplete",o)),a&&ee(google.maps.event.addListener(x,"overlaycomplete",a)),u&&H(google.maps.event.addListener(x,"polygoncomplete",u)),d&&k(google.maps.event.addListener(x,"polylinecomplete",d)),f&&T(google.maps.event.addListener(x,"rectanglecomplete",f)),R(x),g&&g(x),()=>{I!==null&&(P&&google.maps.event.removeListener(P),M&&google.maps.event.removeListener(M),$&&google.maps.event.removeListener($),W&&google.maps.event.removeListener(W),Q&&google.maps.event.removeListener(Q),L&&google.maps.event.removeListener(L),_&&_(I),I.setMap(null))}},[]),null}y.memo(zx);class $x extends y.PureComponent{constructor(e){super(e),X(this,"registeredEvents",[]),X(this,"state",{drawingManager:null}),X(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),kt(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(Vc(Vc({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:By,eventMap:Fy,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:By,eventMap:Fy,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),ze(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}X($x,"contextType",je);function zy(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Wo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zy(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zy(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var $y={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Wy={animation(n,e){n.setAnimation(e)},clickable(n,e){n.setClickable(e)},cursor(n,e){n.setCursor(e)},draggable(n,e){n.setDraggable(e)},icon(n,e){n.setIcon(e)},label(n,e){n.setLabel(e)},map(n,e){n.setMap(e)},opacity(n,e){n.setOpacity(e)},options(n,e){n.setOptions(e)},position(n,e){n.setPosition(e)},shape(n,e){n.setShape(e)},title(n,e){n.setTitle(e)},visible(n,e){n.setVisible(e)},zIndex(n,e){n.setZIndex(e)}},Uc={};function Wx(n){var{position:e,options:t,clusterer:r,noClustererRedraw:o,children:a,draggable:u,visible:d,animation:f,clickable:g,cursor:_,icon:w,label:I,opacity:R,shape:P,title:D,zIndex:M,onClick:q,onDblClick:$,onDrag:ee,onDragEnd:W,onDragStart:H,onMouseOut:Q,onMouseOver:k,onMouseUp:L,onMouseDown:T,onRightClick:x,onClickableChanged:O,onCursorChanged:N,onAnimationChanged:A,onDraggableChanged:_e,onFlatChanged:Ie,onIconChanged:Ae,onPositionChanged:Ce,onShapeChanged:te,onTitleChanged:ce,onVisibleChanged:se,onZindexChanged:U,onLoad:J,onUnmount:ie}=n,pe=y.useContext(je),[G,Te]=y.useState(null),[Le,de]=y.useState(null),[Me,me]=y.useState(null),[Ue,Rt]=y.useState(null),[At,mn]=y.useState(null),[He,di]=y.useState(null),[dr,ds]=y.useState(null),[$n,kn]=y.useState(null),[rn,fi]=y.useState(null),[Wn,Ur]=y.useState(null),[pi,pt]=y.useState(null),[lt,Rn]=y.useState(null),[fr,Hn]=y.useState(null),[An,pr]=y.useState(null),[gr,gi]=y.useState(null),[mr,mi]=y.useState(null),[vr,yr]=y.useState(null),[qn,jr]=y.useState(null),[Yt,vn]=y.useState(null),[Gn,yn]=y.useState(null),[_r,Er]=y.useState(null),[wr,xn]=y.useState(null);y.useEffect(()=>{G!==null&&G.setMap(pe)},[pe]),y.useEffect(()=>{typeof t<"u"&&G!==null&&G.setOptions(t)},[G,t]),y.useEffect(()=>{typeof u<"u"&&G!==null&&G.setDraggable(u)},[G,u]),y.useEffect(()=>{e&&G!==null&&G.setPosition(e)},[G,e]),y.useEffect(()=>{typeof d<"u"&&G!==null&&G.setVisible(d)},[G,d]),y.useEffect(()=>{G==null||G.setAnimation(f)},[G,f]),y.useEffect(()=>{G&&g!==void 0&&G.setClickable(g)},[G,g]),y.useEffect(()=>{G&&_!==void 0&&G.setCursor(_)},[G,_]),y.useEffect(()=>{G&&w!==void 0&&G.setIcon(w)},[G,w]),y.useEffect(()=>{G&&I!==void 0&&G.setLabel(I)},[G,I]),y.useEffect(()=>{G&&R!==void 0&&G.setOpacity(R)},[G,R]),y.useEffect(()=>{G&&P!==void 0&&G.setShape(P)},[G,P]),y.useEffect(()=>{G&&D!==void 0&&G.setTitle(D)},[G,D]),y.useEffect(()=>{G&&M!==void 0&&G.setZIndex(M)},[G,M]),y.useEffect(()=>{G&&$&&(Le!==null&&google.maps.event.removeListener(Le),de(google.maps.event.addListener(G,"dblclick",$)))},[$]),y.useEffect(()=>{G&&W&&(Me!==null&&google.maps.event.removeListener(Me),me(google.maps.event.addListener(G,"dragend",W)))},[W]),y.useEffect(()=>{G&&H&&(Ue!==null&&google.maps.event.removeListener(Ue),Rt(google.maps.event.addListener(G,"dragstart",H)))},[H]),y.useEffect(()=>{G&&T&&(At!==null&&google.maps.event.removeListener(At),mn(google.maps.event.addListener(G,"mousedown",T)))},[T]),y.useEffect(()=>{G&&Q&&(He!==null&&google.maps.event.removeListener(He),di(google.maps.event.addListener(G,"mouseout",Q)))},[Q]),y.useEffect(()=>{G&&k&&(dr!==null&&google.maps.event.removeListener(dr),ds(google.maps.event.addListener(G,"mouseover",k)))},[k]),y.useEffect(()=>{G&&L&&($n!==null&&google.maps.event.removeListener($n),kn(google.maps.event.addListener(G,"mouseup",L)))},[L]),y.useEffect(()=>{G&&x&&(rn!==null&&google.maps.event.removeListener(rn),fi(google.maps.event.addListener(G,"rightclick",x)))},[x]),y.useEffect(()=>{G&&q&&(Wn!==null&&google.maps.event.removeListener(Wn),Ur(google.maps.event.addListener(G,"click",q)))},[q]),y.useEffect(()=>{G&&ee&&(pi!==null&&google.maps.event.removeListener(pi),pt(google.maps.event.addListener(G,"drag",ee)))},[ee]),y.useEffect(()=>{G&&O&&(lt!==null&&google.maps.event.removeListener(lt),Rn(google.maps.event.addListener(G,"clickable_changed",O)))},[O]),y.useEffect(()=>{G&&N&&(fr!==null&&google.maps.event.removeListener(fr),Hn(google.maps.event.addListener(G,"cursor_changed",N)))},[N]),y.useEffect(()=>{G&&A&&(An!==null&&google.maps.event.removeListener(An),pr(google.maps.event.addListener(G,"animation_changed",A)))},[A]),y.useEffect(()=>{G&&_e&&(gr!==null&&google.maps.event.removeListener(gr),gi(google.maps.event.addListener(G,"draggable_changed",_e)))},[_e]),y.useEffect(()=>{G&&Ie&&(mr!==null&&google.maps.event.removeListener(mr),mi(google.maps.event.addListener(G,"flat_changed",Ie)))},[Ie]),y.useEffect(()=>{G&&Ae&&(vr!==null&&google.maps.event.removeListener(vr),yr(google.maps.event.addListener(G,"icon_changed",Ae)))},[Ae]),y.useEffect(()=>{G&&Ce&&(qn!==null&&google.maps.event.removeListener(qn),jr(google.maps.event.addListener(G,"position_changed",Ce)))},[Ce]),y.useEffect(()=>{G&&te&&(Yt!==null&&google.maps.event.removeListener(Yt),vn(google.maps.event.addListener(G,"shape_changed",te)))},[te]),y.useEffect(()=>{G&&ce&&(Gn!==null&&google.maps.event.removeListener(Gn),yn(google.maps.event.addListener(G,"title_changed",ce)))},[ce]),y.useEffect(()=>{G&&se&&(_r!==null&&google.maps.event.removeListener(_r),Er(google.maps.event.addListener(G,"visible_changed",se)))},[se]),y.useEffect(()=>{G&&U&&(wr!==null&&google.maps.event.removeListener(wr),xn(google.maps.event.addListener(G,"zindex_changed",U)))},[U]),y.useEffect(()=>{var tt=Wo(Wo(Wo({},t||Uc),r?Uc:{map:pe}),{},{position:e}),xe=new google.maps.Marker(tt);return r?r.addMarker(xe,!!o):xe.setMap(pe),e&&xe.setPosition(e),typeof d<"u"&&xe.setVisible(d),typeof u<"u"&&xe.setDraggable(u),typeof g<"u"&&xe.setClickable(g),typeof _=="string"&&xe.setCursor(_),w&&xe.setIcon(w),typeof I<"u"&&xe.setLabel(I),typeof R<"u"&&xe.setOpacity(R),P&&xe.setShape(P),typeof D=="string"&&xe.setTitle(D),typeof M=="number"&&xe.setZIndex(M),$&&de(google.maps.event.addListener(xe,"dblclick",$)),W&&me(google.maps.event.addListener(xe,"dragend",W)),H&&Rt(google.maps.event.addListener(xe,"dragstart",H)),T&&mn(google.maps.event.addListener(xe,"mousedown",T)),Q&&di(google.maps.event.addListener(xe,"mouseout",Q)),k&&ds(google.maps.event.addListener(xe,"mouseover",k)),L&&kn(google.maps.event.addListener(xe,"mouseup",L)),x&&fi(google.maps.event.addListener(xe,"rightclick",x)),q&&Ur(google.maps.event.addListener(xe,"click",q)),ee&&pt(google.maps.event.addListener(xe,"drag",ee)),O&&Rn(google.maps.event.addListener(xe,"clickable_changed",O)),N&&Hn(google.maps.event.addListener(xe,"cursor_changed",N)),A&&pr(google.maps.event.addListener(xe,"animation_changed",A)),_e&&gi(google.maps.event.addListener(xe,"draggable_changed",_e)),Ie&&mi(google.maps.event.addListener(xe,"flat_changed",Ie)),Ae&&yr(google.maps.event.addListener(xe,"icon_changed",Ae)),Ce&&jr(google.maps.event.addListener(xe,"position_changed",Ce)),te&&vn(google.maps.event.addListener(xe,"shape_changed",te)),ce&&yn(google.maps.event.addListener(xe,"title_changed",ce)),se&&Er(google.maps.event.addListener(xe,"visible_changed",se)),U&&xn(google.maps.event.addListener(xe,"zindex_changed",U)),Te(xe),J&&J(xe),()=>{Le!==null&&google.maps.event.removeListener(Le),Me!==null&&google.maps.event.removeListener(Me),Ue!==null&&google.maps.event.removeListener(Ue),At!==null&&google.maps.event.removeListener(At),He!==null&&google.maps.event.removeListener(He),dr!==null&&google.maps.event.removeListener(dr),$n!==null&&google.maps.event.removeListener($n),rn!==null&&google.maps.event.removeListener(rn),Wn!==null&&google.maps.event.removeListener(Wn),lt!==null&&google.maps.event.removeListener(lt),fr!==null&&google.maps.event.removeListener(fr),An!==null&&google.maps.event.removeListener(An),gr!==null&&google.maps.event.removeListener(gr),mr!==null&&google.maps.event.removeListener(mr),vr!==null&&google.maps.event.removeListener(vr),qn!==null&&google.maps.event.removeListener(qn),Gn!==null&&google.maps.event.removeListener(Gn),_r!==null&&google.maps.event.removeListener(_r),wr!==null&&google.maps.event.removeListener(wr),ie&&ie(xe),r?r.removeMarker(xe,!!o):xe&&xe.setMap(null)}},[]);var fs=y.useMemo(()=>a?y.Children.map(a,tt=>{if(!y.isValidElement(tt))return tt;var xe=tt;return y.cloneElement(xe,{anchor:G})}):null,[a,G]);return Z.jsx(Z.Fragment,{children:fs})||null}var Hx=y.memo(Wx);class qx extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[])}componentDidMount(){var e=this;return IS(function*(){var t=Wo(Wo(Wo({},e.props.options||Uc),e.props.clusterer?Uc:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(t),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=Be({updaterMap:Wy,eventMap:$y,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Wy,eventMap:$y,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),ze(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?y.Children.map(this.props.children,t=>{if(!y.isValidElement(t))return t;var r=t;return y.cloneElement(r,{anchor:this.marker})}):null;return e||null}}X(qx,"contextType",je);var Gx=function(){function n(e,t){e.getClusterer().extend(n,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=t,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return n.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},n.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},n.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var r=t.getMaxZoom(),o=this.cluster.getBounds(),a=t.getMap();a!==null&&"fitBounds"in a&&a.fitBounds(o),this.timeOut=window.setTimeout(function(){var u=t.getMap();if(u!==null){"fitBounds"in u&&u.fitBounds(o);var d=u.getZoom()||0;r!==null&&d>r&&u.setZoom(r+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},n.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},n.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},n.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();t!==null&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},n.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},n.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},n.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},n.prototype.show=function(){var e,t,r,o,a,u;if(this.div&&this.center){var d=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,f=this.backgroundPosition.split(" "),g=parseInt(((e=f[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),_=parseInt(((t=f[1])===null||t===void 0?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),w=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(w!==null?"".concat(w.y,"px"):"0","; left: ").concat(w!==null?"".concat(w.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var I=document.createElement("img");I.alt=d,I.src=this.url,I.width=this.width,I.height=this.height,I.setAttribute("style","position: absolute; top: ".concat(_,"px; left: ").concat(g,"px")),this.cluster.getClusterer().enableRetinaIcons||(I.style.clip="rect(-".concat(_,"px, -").concat(g+this.width,"px, -").concat(_+this.height,", -").concat(g,")"));var R=document.createElement("div");R.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((r=this.sums)===null||r===void 0)&&r.text&&(R.innerText="".concat((o=this.sums)===null||o===void 0?void 0:o.text)),!((a=this.sums)===null||a===void 0)&&a.html&&(R.innerHTML="".concat((u=this.sums)===null||u===void 0?void 0:u.html)),this.div.innerHTML="",this.div.appendChild(I),this.div.appendChild(R),this.div.title=d,this.div.style.display=""}this.visible=!0},n.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),r=t[Math.min(t.length-1,Math.max(0,e.index-1))];r&&(this.url=r.url,this.height=r.height,this.width=r.width,r.className&&(this.className="".concat(this.clusterClassName," ").concat(r.className)),this.anchorText=r.anchorText||[0,0],this.anchorIcon=r.anchorIcon||[this.height/2,this.width/2],this.textColor=r.textColor||"black",this.textSize=r.textSize||11,this.textDecoration=r.textDecoration||"none",this.fontWeight=r.fontWeight||"bold",this.fontStyle=r.fontStyle||"normal",this.fontFamily=r.fontFamily||"Arial,sans-serif",this.backgroundPosition=r.backgroundPosition||"0 0")},n.prototype.setCenter=function(e){this.center=e},n.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t!==null&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},n}(),Kx=function(){function n(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new Gx(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return n.prototype.getSize=function(){return this.markers.length},n.prototype.getMarkers=function(){return this.markers},n.prototype.getCenter=function(){return this.center},n.prototype.getMap=function(){return this.map},n.prototype.getClusterer=function(){return this.markerClusterer},n.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=this.getMarkers(),r=0,o=t;r<o.length;r++){var a=o[r],u=a.getPosition();u&&e.extend(u)}return e},n.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},n.prototype.addMarker=function(e){var t;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var r=e.getPosition();if(r){var o=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(o-1)+r.lat())/o,(this.center.lng()*(o-1)+r.lng())/o),this.calculateBounds()}}}else{var r=e.getPosition();r&&(this.center=r,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var a=this.markers.length,u=this.markerClusterer.getMaxZoom(),d=(t=this.map)===null||t===void 0?void 0:t.getZoom();if(u!==null&&typeof d<"u"&&d>u)e.getMap()!==this.map&&e.setMap(this.map);else if(a<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(a===this.minClusterSize)for(var f=0,g=this.markers;f<g.length;f++){var _=g[f];_.setMap(null)}else e.setMap(null);return!0},n.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},n.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},n.prototype.updateIcon=function(){var e,t=this.markers.length,r=this.markerClusterer.getMaxZoom(),o=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(r!==null&&typeof o<"u"&&o>r){this.clusterIcon.hide();return}if(t<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},n.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},n}();function Qx(n,e){var t=n.length,r=t.toString().length,o=Math.min(r,e);return{text:t.toString(),index:o,title:""}}var Zx=2e3,Jx=500,Yx="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",Xx="png",eb=[53,56,66,78,90],tb="cluster",PS=function(){function n(e,t,r){t===void 0&&(t=[]),r===void 0&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(n,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,r.zoomOnClick!==void 0&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,r.averageCenter!==void 0&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,r.ignoreHidden!==void 0&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,r.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||Yx,this.imageExtension=r.imageExtension||Xx,this.imageSizes=r.imageSizes||eb,this.calculator=r.calculator||Qx,this.batchSize=r.batchSize||Zx,this.batchSizeIE=r.batchSizeIE||Jx,this.clusterClass=r.clusterClass||tb,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(t,!0),this.setMap(e)}return n.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((t=this.getMap())===null||t===void 0?void 0:t.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},n.prototype.onIdle=function(){this.redraw()},n.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},n.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var r=t[e];r.getMap()!==this.activeMap&&r.setMap(this.activeMap)}for(var o=0,a=this.clusters;o<a.length;o++){var u=a[o];u.remove()}this.clusters=[];for(var d=0,f=this.listeners;d<f.length;d++){var g=f[d];google.maps.event.removeListener(g)}this.listeners=[],this.activeMap=null,this.ready=!1},n.prototype.draw=function(){},n.prototype.getMap=function(){return null},n.prototype.getPanes=function(){return null},n.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},n.prototype.setMap=function(){},n.prototype.addListener=function(){return{remove:function(){}}},n.prototype.bindTo=function(){},n.prototype.get=function(){},n.prototype.notify=function(){},n.prototype.set=function(){},n.prototype.setValues=function(){},n.prototype.unbind=function(){},n.prototype.unbindAll=function(){},n.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},n.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,r=0,o=e;r<o.length;r++){var a=o[r],u=a.getPosition();u&&t.extend(u)}var d=this.getMap();d!==null&&"fitBounds"in d&&d.fitBounds(t)},n.prototype.getGridSize=function(){return this.gridSize},n.prototype.setGridSize=function(e){this.gridSize=e},n.prototype.getMinimumClusterSize=function(){return this.minClusterSize},n.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},n.prototype.getMaxZoom=function(){return this.maxZoom},n.prototype.setMaxZoom=function(e){this.maxZoom=e},n.prototype.getStyles=function(){return this.styles},n.prototype.setStyles=function(e){this.styles=e},n.prototype.getTitle=function(){return this.title},n.prototype.setTitle=function(e){this.title=e},n.prototype.getZoomOnClick=function(){return this.zoomOnClick},n.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},n.prototype.getAverageCenter=function(){return this.averageCenter},n.prototype.setAverageCenter=function(e){this.averageCenter=e},n.prototype.getIgnoreHidden=function(){return this.ignoreHidden},n.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},n.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},n.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},n.prototype.getImageExtension=function(){return this.imageExtension},n.prototype.setImageExtension=function(e){this.imageExtension=e},n.prototype.getImagePath=function(){return this.imagePath},n.prototype.setImagePath=function(e){this.imagePath=e},n.prototype.getImageSizes=function(){return this.imageSizes},n.prototype.setImageSizes=function(e){this.imageSizes=e},n.prototype.getCalculator=function(){return this.calculator},n.prototype.setCalculator=function(e){this.calculator=e},n.prototype.getBatchSizeIE=function(){return this.batchSizeIE},n.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},n.prototype.getClusterClass=function(){return this.clusterClass},n.prototype.setClusterClass=function(e){this.clusterClass=e},n.prototype.getMarkers=function(){return this.markers},n.prototype.getTotalMarkers=function(){return this.markers.length},n.prototype.getClusters=function(){return this.clusters},n.prototype.getTotalClusters=function(){return this.clusters.length},n.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},n.prototype.addMarkers=function(e,t){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=e[r];o&&this.pushMarkerTo(o)}t||this.redraw()},n.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){t.ready&&(e.isAdded=!1,t.repaint())}),e.isAdded=!1,this.markers.push(e)},n.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var r=0;r<this.markers.length;r++)if(e===this.markers[r]){t=r;break}return t===-1?!1:(e.setMap(null),this.markers.splice(t,1),!0)},n.prototype.removeMarker=function(e,t){var r=this.removeMarker_(e);return!t&&r&&this.repaint(),r},n.prototype.removeMarkers=function(e,t){for(var r=!1,o=0,a=e;o<a.length;o++){var u=a[o];r=r||this.removeMarker_(u)}return!t&&r&&this.repaint(),r},n.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},n.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var r=0,o=e;r<o.length;r++){var a=o[r];a.remove()}},0)},n.prototype.getExtendedBounds=function(e){var t=this.getProjection(),r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));r!==null&&(r.x+=this.gridSize,r.y-=this.gridSize);var o=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(o!==null&&(o.x-=this.gridSize,o.y+=this.gridSize),r!==null){var a=t.fromDivPixelToLatLng(r);a!==null&&e.extend(a)}if(o!==null){var u=t.fromDivPixelToLatLng(o);u!==null&&e.extend(u)}return e},n.prototype.redraw=function(){this.createClusters(0)},n.prototype.resetViewport=function(e){for(var t=0,r=this.clusters;t<r.length;t++){var o=r[t];o.remove()}this.clusters=[];for(var a=0,u=this.markers;a<u.length;a++){var d=u[a];d.isAdded=!1,e&&d.setMap(null)}},n.prototype.distanceBetweenPoints=function(e,t){var r=6371,o=(t.lat()-e.lat())*Math.PI/180,a=(t.lng()-e.lng())*Math.PI/180,u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return r*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))},n.prototype.isMarkerInBounds=function(e,t){var r=e.getPosition();return r?t.contains(r):!1},n.prototype.addToClosestCluster=function(e){for(var t,r=4e4,o=null,a=0,u=this.clusters;a<u.length;a++){var d=u[a];t=d;var f=t.getCenter(),g=e.getPosition();if(f&&g){var _=this.distanceBetweenPoints(f,g);_<r&&(r=_,o=t)}}o&&o.isMarkerInClusterBounds(e)?o.addMarker(e):(t=new Kx(this),t.addMarker(e),this.clusters.push(t))},n.prototype.createClusters=function(e){var t=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var r=this.getMap(),o=r!==null&&("getBounds"in r)?r.getBounds():null,a=(r==null?void 0:r.getZoom())||0,u=a>3?new google.maps.LatLngBounds(o==null?void 0:o.getSouthWest(),o==null?void 0:o.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),d=this.getExtendedBounds(u),f=Math.min(e+this.batchSize,this.markers.length),g=e;g<f;g++){var _=this.markers[g];_&&!_.isAdded&&this.isMarkerInBounds(_,d)&&(!this.ignoreHidden||this.ignoreHidden&&_.getVisible())&&this.addToClosestCluster(_)}if(f<this.markers.length)this.timerRefStatic=window.setTimeout(function(){t.createClusters(f)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var w=0,I=this.clusters;w<I.length;w++){var R=I[w];R.updateIcon()}}}},n.prototype.extend=function(e,t){return(function(o){for(var a in o.prototype){var u=a;this.prototype[u]=o.prototype[u]}return this}).apply(e,[t])},n}();function Hy(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function nb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hy(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hy(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Bn={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Ye={averageCenter(n,e){n.setAverageCenter(e)},batchSizeIE(n,e){n.setBatchSizeIE(e)},calculator(n,e){n.setCalculator(e)},clusterClass(n,e){n.setClusterClass(e)},enableRetinaIcons(n,e){n.setEnableRetinaIcons(e)},gridSize(n,e){n.setGridSize(e)},ignoreHidden(n,e){n.setIgnoreHidden(e)},imageExtension(n,e){n.setImageExtension(e)},imagePath(n,e){n.setImagePath(e)},imageSizes(n,e){n.setImageSizes(e)},maxZoom(n,e){n.setMaxZoom(e)},minimumClusterSize(n,e){n.setMinimumClusterSize(e)},styles(n,e){n.setStyles(e)},title(n,e){n.setTitle(e)},zoomOnClick(n,e){n.setZoomOnClick(e)}},rb={};function ib(n){var{children:e,options:t,averageCenter:r,batchSizeIE:o,calculator:a,clusterClass:u,enableRetinaIcons:d,gridSize:f,ignoreHidden:g,imageExtension:_,imagePath:w,imageSizes:I,maxZoom:R,minimumClusterSize:P,styles:D,title:M,zoomOnClick:q,onClick:$,onClusteringBegin:ee,onClusteringEnd:W,onMouseOver:H,onMouseOut:Q,onLoad:k,onUnmount:L}=n,[T,x]=y.useState(null),O=y.useContext(je),[N,A]=y.useState(null),[_e,Ie]=y.useState(null),[Ae,Ce]=y.useState(null),[te,ce]=y.useState(null),[se,U]=y.useState(null);return y.useEffect(()=>{T&&Q&&(te!==null&&google.maps.event.removeListener(te),ce(google.maps.event.addListener(T,Bn.onMouseOut,Q)))},[Q]),y.useEffect(()=>{T&&H&&(se!==null&&google.maps.event.removeListener(se),U(google.maps.event.addListener(T,Bn.onMouseOver,H)))},[H]),y.useEffect(()=>{T&&$&&(N!==null&&google.maps.event.removeListener(N),A(google.maps.event.addListener(T,Bn.onClick,$)))},[$]),y.useEffect(()=>{T&&ee&&(_e!==null&&google.maps.event.removeListener(_e),Ie(google.maps.event.addListener(T,Bn.onClusteringBegin,ee)))},[ee]),y.useEffect(()=>{T&&W&&(Ae!==null&&google.maps.event.removeListener(Ae),Ie(google.maps.event.addListener(T,Bn.onClusteringEnd,W)))},[W]),y.useEffect(()=>{typeof r<"u"&&T!==null&&Ye.averageCenter(T,r)},[T,r]),y.useEffect(()=>{typeof o<"u"&&T!==null&&Ye.batchSizeIE(T,o)},[T,o]),y.useEffect(()=>{typeof a<"u"&&T!==null&&Ye.calculator(T,a)},[T,a]),y.useEffect(()=>{typeof u<"u"&&T!==null&&Ye.clusterClass(T,u)},[T,u]),y.useEffect(()=>{typeof d<"u"&&T!==null&&Ye.enableRetinaIcons(T,d)},[T,d]),y.useEffect(()=>{typeof f<"u"&&T!==null&&Ye.gridSize(T,f)},[T,f]),y.useEffect(()=>{typeof g<"u"&&T!==null&&Ye.ignoreHidden(T,g)},[T,g]),y.useEffect(()=>{typeof _<"u"&&T!==null&&Ye.imageExtension(T,_)},[T,_]),y.useEffect(()=>{typeof w<"u"&&T!==null&&Ye.imagePath(T,w)},[T,w]),y.useEffect(()=>{typeof I<"u"&&T!==null&&Ye.imageSizes(T,I)},[T,I]),y.useEffect(()=>{typeof R<"u"&&T!==null&&Ye.maxZoom(T,R)},[T,R]),y.useEffect(()=>{typeof P<"u"&&T!==null&&Ye.minimumClusterSize(T,P)},[T,P]),y.useEffect(()=>{typeof D<"u"&&T!==null&&Ye.styles(T,D)},[T,D]),y.useEffect(()=>{typeof M<"u"&&T!==null&&Ye.title(T,M)},[T,M]),y.useEffect(()=>{typeof q<"u"&&T!==null&&Ye.zoomOnClick(T,q)},[T,q]),y.useEffect(()=>{if(O){var J=nb({},t||rb),ie=new PS(O,[],J);return r&&Ye.averageCenter(ie,r),o&&Ye.batchSizeIE(ie,o),a&&Ye.calculator(ie,a),u&&Ye.clusterClass(ie,u),d&&Ye.enableRetinaIcons(ie,d),f&&Ye.gridSize(ie,f),g&&Ye.ignoreHidden(ie,g),_&&Ye.imageExtension(ie,_),w&&Ye.imagePath(ie,w),I&&Ye.imageSizes(ie,I),R&&Ye.maxZoom(ie,R),P&&Ye.minimumClusterSize(ie,P),D&&Ye.styles(ie,D),M&&Ye.title(ie,M),q&&Ye.zoomOnClick(ie,q),Q&&ce(google.maps.event.addListener(ie,Bn.onMouseOut,Q)),H&&U(google.maps.event.addListener(ie,Bn.onMouseOver,H)),$&&A(google.maps.event.addListener(ie,Bn.onClick,$)),ee&&Ie(google.maps.event.addListener(ie,Bn.onClusteringBegin,ee)),W&&Ce(google.maps.event.addListener(ie,Bn.onClusteringEnd,W)),x(ie),k&&k(ie),()=>{te!==null&&google.maps.event.removeListener(te),se!==null&&google.maps.event.removeListener(se),N!==null&&google.maps.event.removeListener(N),_e!==null&&google.maps.event.removeListener(_e),Ae!==null&&google.maps.event.removeListener(Ae),L&&L(ie)}}},[]),T!==null&&e(T)||null}y.memo(ib);class sb extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{markerClusterer:null}),X(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new PS(this.context,[],this.props.options);this.registeredEvents=Be({updaterMap:Ye,eventMap:Bn,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Ye,eventMap:Bn,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),ze(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}X(sb,"contextType",je);function qy(n){n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()}var kS=function(){function n(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(n,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return n.prototype.createInfoBoxDiv=function(){var e=this,t=function(_){_.returnValue=!1,_.preventDefault&&_.preventDefault(),e.enableEventPropagation||qy(_)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var r=this.getPanes();if(r!==null&&r[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var o=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-o.left-o.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var a=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],u=0,d=a;u<d.length;u++){var f=d[u];this.eventListeners.push(google.maps.event.addListener(this.div,f,qy))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",t),google.maps.event.trigger(this,"domready")}},n.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},n.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},n.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},n.prototype.getCloseClickHandler=function(){return this.closeClickHandler},n.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var r=0,o=0,a=t.getBounds();a&&!a.contains(this.position)&&t.setCenter(this.position);var u=t.getDiv(),d=u.offsetWidth,f=u.offsetHeight,g=this.pixelOffset.width,_=this.pixelOffset.height,w=this.div.offsetWidth,I=this.div.offsetHeight,R=this.infoBoxClearance.width,P=this.infoBoxClearance.height,D=this.getProjection(),M=D.fromLatLngToContainerPixel(this.position);M!==null&&(M.x<-g+R?r=M.x+g-R:M.x+w+g+R>d&&(r=M.x+w+g+R-d),this.alignBottom?M.y<-_+P+I?o=M.y+_-P-I:M.y+_+P>f&&(o=M.y+_+P-f):M.y<-_+P?o=M.y+_-P:M.y+I+_+P>f&&(o=M.y+I+_+P-f)),r===0&&o===0||t.panBy(r,o)}}},n.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var r=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+r*100+')"',this.div.style.filter="alpha(opacity="+r*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},n.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,r=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var o=this.div.currentStyle;o&&(e.top=parseInt(o.borderTopWidth||"",10)||0,e.bottom=parseInt(o.borderBottomWidth||"",10)||0,e.left=parseInt(o.borderLeftWidth||"",10)||0,e.right=parseInt(o.borderRightWidth||"",10)||0)}return e},n.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},n.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.position);t!==null&&(this.div.style.left=t.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(t.y+this.pixelOffset.height)+"px":this.div.style.top=t.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},n.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},n.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},n.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},n.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},n.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},n.prototype.getContent=function(){return this.content},n.prototype.getPosition=function(){return this.position},n.prototype.getZIndex=function(){return this.zIndex},n.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},n.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},n.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},n.prototype.open=function(e,t){var r=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",function(){var o=t.getPosition();r.setPosition(o)}),this.mapListener=google.maps.event.addListener(t,"map_changed",function(){r.setMap(t.map)})),this.setMap(e),this.div&&this.panBox()},n.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var r=t[e];google.maps.event.removeListener(r)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},n.prototype.extend=function(e,t){return(function(o){for(var a in o.prototype)Object.prototype.hasOwnProperty.call(this,a)||(this.prototype[a]=o.prototype[a]);return this}).apply(e,[t])},n}(),ob=["position"],ab=["position"];function Gy(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function jc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Gy(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Gy(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Ky={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Qy={options(n,e){n.setOptions(e)},position(n,e){e instanceof google.maps.LatLng?n.setPosition(e):n.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(n,e){n.setVisible(e)},zIndex(n,e){n.setZIndex(e)}},lb={};function ub(n){var{children:e,anchor:t,options:r,position:o,zIndex:a,onCloseClick:u,onDomReady:d,onContentChanged:f,onPositionChanged:g,onZindexChanged:_,onLoad:w,onUnmount:I}=n,R=y.useContext(je),[P,D]=y.useState(null),[M,q]=y.useState(null),[$,ee]=y.useState(null),[W,H]=y.useState(null),[Q,k]=y.useState(null),[L,T]=y.useState(null),x=y.useRef(null);return y.useEffect(()=>{R&&P!==null&&(P.close(),t?P.open(R,t):P.getPosition()&&P.open(R))},[R,P,t]),y.useEffect(()=>{r&&P!==null&&P.setOptions(r)},[P,r]),y.useEffect(()=>{if(o&&P!==null){var O=o instanceof google.maps.LatLng?o:new google.maps.LatLng(o.lat,o.lng);P.setPosition(O)}},[o]),y.useEffect(()=>{typeof a=="number"&&P!==null&&P.setZIndex(a)},[a]),y.useEffect(()=>{P&&u&&(M!==null&&google.maps.event.removeListener(M),q(google.maps.event.addListener(P,"closeclick",u)))},[u]),y.useEffect(()=>{P&&d&&($!==null&&google.maps.event.removeListener($),ee(google.maps.event.addListener(P,"domready",d)))},[d]),y.useEffect(()=>{P&&f&&(W!==null&&google.maps.event.removeListener(W),H(google.maps.event.addListener(P,"content_changed",f)))},[f]),y.useEffect(()=>{P&&g&&(Q!==null&&google.maps.event.removeListener(Q),k(google.maps.event.addListener(P,"position_changed",g)))},[g]),y.useEffect(()=>{P&&_&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener(P,"zindex_changed",_)))},[_]),y.useEffect(()=>{if(R){var O=r||lb,{position:N}=O,A=Up(O,ob),_e;N&&!(N instanceof google.maps.LatLng)&&(_e=new google.maps.LatLng(N.lat,N.lng));var Ie=new kS(jc(jc({},A),_e?{position:_e}:{}));x.current=document.createElement("div"),D(Ie),u&&q(google.maps.event.addListener(Ie,"closeclick",u)),d&&ee(google.maps.event.addListener(Ie,"domready",d)),f&&H(google.maps.event.addListener(Ie,"content_changed",f)),g&&k(google.maps.event.addListener(Ie,"position_changed",g)),_&&T(google.maps.event.addListener(Ie,"zindex_changed",_)),Ie.setContent(x.current),t?Ie.open(R,t):Ie.getPosition()?Ie.open(R):kt(!1,"You must provide either an anchor or a position prop for <InfoBox>."),w&&w(Ie)}return()=>{P!==null&&(M&&google.maps.event.removeListener(M),W&&google.maps.event.removeListener(W),$&&google.maps.event.removeListener($),Q&&google.maps.event.removeListener(Q),L&&google.maps.event.removeListener(L),I&&I(P),P.close())}},[]),x.current?ea.createPortal(y.Children.only(e),x.current):null}y.memo(ub);class cb extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"containerElement",null),X(this,"state",{infoBox:null}),X(this,"open",(e,t)=>{t?this.context!==null&&e.open(this.context,t):e.getPosition()?this.context!==null&&e.open(this.context):kt(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),X(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:t}=e,r=Up(e,ab),o;t&&!(t instanceof google.maps.LatLng)&&(o=new google.maps.LatLng(t.lat,t.lng));var a=new kS(jc(jc({},r),o?{position:o}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Be({updaterMap:Qy,eventMap:Ky,prevProps:{},nextProps:this.props,instance:a}),this.setState({infoBox:a},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:t}=this.state;t!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:Qy,eventMap:Ky,prevProps:e,nextProps:this.props,instance:t}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:t}=this.state;t!==null&&(e&&e(t),ze(this.registeredEvents),t.close())}render(){return this.containerElement?ea.createPortal(y.Children.only(this.props.children),this.containerElement):null}}X(cb,"contextType",je);var rf,Zy;function hb(){return Zy||(Zy=1,rf=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,o,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(!n(e[o],t[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[o]))return!1;for(o=r;o--!==0;){var u=a[o];if(!n(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}),rf}var db=hb(),Jy=SS(db),Yy=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],sf=1,Za=8;class jp{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[t,r]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");var o=r>>4;if(o!==sf)throw new Error("Got v".concat(o," data when expected v").concat(sf,"."));var a=Yy[r&15];if(!a)throw new Error("Unrecognized array type.");var[u]=new Uint16Array(e,2,1),[d]=new Uint32Array(e,4,1);return new jp(d,u,a,e)}constructor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,o=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var a=Yy.indexOf(this.ArrayType),u=e*2*this.ArrayType.BYTES_PER_ELEMENT,d=e*this.IndexArrayType.BYTES_PER_ELEMENT,f=(8-d%8)%8;if(a<0)throw new Error("Unexpected typed array class: ".concat(r,"."));o&&o instanceof ArrayBuffer?(this.data=o,this.ids=new this.IndexArrayType(this.data,Za,e),this.coords=new this.ArrayType(this.data,Za+d+f,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Za+u+d+f),this.ids=new this.IndexArrayType(this.data,Za,e),this.coords=new this.ArrayType(this.data,Za+d+f,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(sf<<4)+a]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Df(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:a,coords:u,nodeSize:d}=this,f=[0,a.length-1,0],g=[];f.length;){var _=f.pop()||0,w=f.pop()||0,I=f.pop()||0;if(w-I<=d){for(var R=I;R<=w;R++){var P=u[2*R],D=u[2*R+1];P>=e&&P<=r&&D>=t&&D<=o&&g.push(a[R])}continue}var M=I+w>>1,q=u[2*M],$=u[2*M+1];q>=e&&q<=r&&$>=t&&$<=o&&g.push(a[M]),(_===0?e<=q:t<=$)&&(f.push(I),f.push(M-1),f.push(1-_)),(_===0?r>=q:o>=$)&&(f.push(M+1),f.push(w),f.push(1-_))}return g}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:o,coords:a,nodeSize:u}=this,d=[0,o.length-1,0],f=[],g=r*r;d.length;){var _=d.pop()||0,w=d.pop()||0,I=d.pop()||0;if(w-I<=u){for(var R=I;R<=w;R++)Xy(a[2*R],a[2*R+1],e,t)<=g&&f.push(o[R]);continue}var P=I+w>>1,D=a[2*P],M=a[2*P+1];Xy(D,M,e,t)<=g&&f.push(o[P]),(_===0?e-r<=D:t-r<=M)&&(d.push(I),d.push(P-1),d.push(1-_)),(_===0?e+r>=D:t+r>=M)&&(d.push(P+1),d.push(w),d.push(1-_))}return f}}function Df(n,e,t,r,o,a){if(!(o-r<=t)){var u=r+o>>1;RS(n,e,u,r,o,a),Df(n,e,t,r,u-1,1-a),Df(n,e,t,u+1,o,1-a)}}function RS(n,e,t,r,o,a){for(;o>r;){if(o-r>600){var u=o-r+1,d=t-r+1,f=Math.log(u),g=.5*Math.exp(2*f/3),_=.5*Math.sqrt(f*g*(u-g)/u)*(d-u/2<0?-1:1),w=Math.max(r,Math.floor(t-d*g/u+_)),I=Math.min(o,Math.floor(t+(u-d)*g/u+_));RS(n,e,t,w,I,a)}var R=e[2*t+a],P=r,D=o;for(Ja(n,e,r,t),e[2*o+a]>R&&Ja(n,e,r,o);P<D;){for(Ja(n,e,P,D),P++,D--;e[2*P+a]<R;)P++;for(;e[2*D+a]>R;)D--}e[2*r+a]===R?Ja(n,e,r,D):(D++,Ja(n,e,D,o)),D<=t&&(r=D+1),t<=D&&(o=D-1)}}function Ja(n,e,t,r){of(n,t,r),of(e,2*t,2*r),of(e,2*t+1,2*r+1)}function of(n,e,t){var r=n[e];n[e]=n[t],n[t]=r}function Xy(n,e,t,r){var o=n-t,a=e-r;return o*o+a*a}var fb={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:n=>n},e_=Math.fround||(n=>e=>(n[0]=+e,n[0]))(new Float32Array(1)),Vs=2,$i=3,af=4,zi=5,AS=6;class pb{constructor(e){this.options=Object.assign(Object.create(fb),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:t,minZoom:r,maxZoom:o}=this.options;t&&console.time("total time");var a="prepare ".concat(e.length," points");t&&console.time(a),this.points=e;for(var u=[],d=0;d<e.length;d++){var f=e[d];if(f.geometry){var[g,_]=f.geometry.coordinates,w=e_(ic(g)),I=e_(sc(_));u.push(w,I,1/0,d,-1,1),this.options.reduce&&u.push(0)}}var R=this.trees[o+1]=this._createTree(u);t&&console.timeEnd(a);for(var P=o;P>=r;P--){var D=+Date.now();R=this.trees[P]=this._createTree(this._cluster(R,P)),t&&console.log("z%d: %d clusters in %dms",P,R.numItems,+Date.now()-D)}return t&&console.timeEnd("total time"),this}getClusters(e,t){var r=((e[0]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[1])),a=e[2]===180?180:((e[2]+180)%360+360)%360-180,u=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,a=180;else if(r>a){var d=this.getClusters([r,o,180,u],t),f=this.getClusters([-180,o,a,u],t);return d.concat(f)}var g=this.trees[this._limitZoom(t)],_=g.range(ic(r),sc(u),ic(a),sc(o)),w=g.data,I=[];for(var R of _){var P=this.stride*R;I.push(w[P+zi]>1?t_(w,P,this.clusterProps):this.points[w[P+$i]])}return I}getChildren(e){var t=this._getOriginId(e),r=this._getOriginZoom(e),o="No cluster with the specified id.",a=this.trees[r];if(!a)throw new Error(o);var u=a.data;if(t*this.stride>=u.length)throw new Error(o);var d=this.options.radius/(this.options.extent*Math.pow(2,r-1)),f=u[t*this.stride],g=u[t*this.stride+1],_=a.within(f,g,d),w=[];for(var I of _){var R=I*this.stride;u[R+af]===e&&w.push(u[R+zi]>1?t_(u,R,this.clusterProps):this.points[u[R+$i]])}if(w.length===0)throw new Error(o);return w}getLeaves(e,t,r){t=t||10,r=r||0;var o=[];return this._appendLeaves(o,e,t,r,0),o}getTile(e,t,r){var o=this.trees[this._limitZoom(e)],a=Math.pow(2,e),{extent:u,radius:d}=this.options,f=d/u,g=(r-f)/a,_=(r+1+f)/a,w={features:[]};return this._addTileFeatures(o.range((t-f)/a,g,(t+1+f)/a,_),o.data,t,r,a,w),t===0&&this._addTileFeatures(o.range(1-f/a,g,1,_),o.data,a,r,a,w),t===a-1&&this._addTileFeatures(o.range(0,g,f/a,_),o.data,-1,r,a,w),w.features.length?w:null}getClusterExpansionZoom(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var r=this.getChildren(e);if(t++,r.length!==1)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,o,a){var u=this.getChildren(t);for(var d of u){var f=d.properties;if(f&&f.cluster?a+f.point_count<=o?a+=f.point_count:a=this._appendLeaves(e,f.cluster_id,r,o,a):a<o?a++:e.push(d),e.length===r)break}return a}_createTree(e){for(var t=new jp(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)t.add(e[r],e[r+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,r,o,a,u){for(var d of e){var f=d*this.stride,g=t[f+zi]>1,_=void 0,w=void 0,I=void 0;if(g)_=xS(t,f,this.clusterProps),w=t[f],I=t[f+1];else{var R=this.points[t[f+$i]];_=R.properties;var[P,D]=R.geometry.coordinates;w=ic(P),I=sc(D)}var M={type:1,geometry:[[Math.round(this.options.extent*(w*a-r)),Math.round(this.options.extent*(I*a-o))]],tags:_},q=void 0;g||this.options.generateId?q=t[f+$i]:q=this.points[t[f+$i]].id,q!==void 0&&(M.id=q),u.features.push(M)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){for(var{radius:r,extent:o,reduce:a,minPoints:u}=this.options,d=r/(o*Math.pow(2,t)),f=e.data,g=[],_=this.stride,w=0;w<f.length;w+=_)if(!(f[w+Vs]<=t)){f[w+Vs]=t;var I=f[w],R=f[w+1],P=e.within(f[w],f[w+1],d),D=f[w+zi],M=D;for(var q of P){var $=q*_;f[$+Vs]>t&&(M+=f[$+zi])}if(M>D&&M>=u){var ee=I*D,W=R*D,H=void 0,Q=-1,k=((w/_|0)<<5)+(t+1)+this.points.length;for(var L of P){var T=L*_;if(!(f[T+Vs]<=t)){f[T+Vs]=t;var x=f[T+zi];ee+=f[T]*x,W+=f[T+1]*x,f[T+af]=k,a&&(H||(H=this._map(f,w,!0),Q=this.clusterProps.length,this.clusterProps.push(H)),a(H,this._map(f,T)))}}f[w+af]=k,g.push(ee/M,W/M,1/0,k,-1,M),a&&g.push(Q)}else{for(var O=0;O<_;O++)g.push(f[w+O]);if(M>1)for(var N of P){var A=N*_;if(!(f[A+Vs]<=t)){f[A+Vs]=t;for(var _e=0;_e<_;_e++)g.push(f[A+_e])}}}}return g}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,r){if(e[t+zi]>1){var o=this.clusterProps[e[t+AS]];return r?Object.assign({},o):o}var a=this.points[e[t+$i]].properties,u=this.options.map(a);return r&&u===a?Object.assign({},u):u}}function t_(n,e,t){return{type:"Feature",id:n[e+$i],properties:xS(n,e,t),geometry:{type:"Point",coordinates:[gb(n[e]),mb(n[e+1])]}}}function xS(n,e,t){var r=n[e+zi],o=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,a=n[e+AS],u=a===-1?{}:Object.assign({},t[a]);return Object.assign(u,{cluster:!0,cluster_id:n[e+$i],point_count:r,point_count_abbreviated:o})}function ic(n){return n/360+.5}function sc(n){var e=Math.sin(n*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function gb(n){return(n-.5)*360}function mb(n){var e=(180-n*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function vb(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}class Ln{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class Nf{constructor(e){var{markers:t,position:r}=e;this.markers=t,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var t of this.markers)e.extend(Ln.getPosition(t));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>Ln.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(Ln.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class yb{constructor(e){var{maxZoom:t=16}=e;this.maxZoom=t}noop(e){var{markers:t}=e;return _b(t)}}var _b=n=>{var e=n.map(t=>new Nf({position:Ln.getPosition(t),markers:[t]}));return e};class Eb extends yb{constructor(e){var{maxZoom:t,radius:r=60}=e,o=vb(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new pb(Object.assign({maxZoom:this.maxZoom,radius:r},o))}calculate(e){var t=!1,r={zoom:e.map.getZoom()};if(!Jy(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var o=this.markers.map(a=>{var u=Ln.getPosition(a),d=[u.lng(),u.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:d},properties:{marker:a}}});this.superCluster.load(o)}return t||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(t=!Jy(this.state,r)),this.state=r,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){var{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(r=>this.transformCluster(r))}transformCluster(e){var{geometry:{coordinates:[t,r]},properties:o}=e;if(o.cluster)return new Nf({markers:this.superCluster.getLeaves(o.cluster_id,1/0).map(u=>u.properties.marker),position:{lat:r,lng:t}});var a=o.marker;return new Nf({markers:[a],position:Ln.getPosition(a)})}}class wb{constructor(e,t){this.markers={sum:e.length};var r=t.map(a=>a.count),o=r.reduce((a,u)=>a+u,0);this.clusters={count:t.length,markers:{mean:o/t.length,sum:o,min:Math.min(...r),max:Math.max(...r)}}}}class Sb{render(e,t,r){var{count:o,position:a}=e,u=o>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",d='<svg fill="'.concat(u,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(o,`</text>
</svg>`),f="Cluster of ".concat(o," markers"),g=Number(google.maps.Marker.MAX_ZINDEX)+o;if(Ln.isAdvancedMarkerAvailable(r)){var _=new DOMParser,w=_.parseFromString(d,"image/svg+xml").documentElement;w.setAttribute("transform","translate(0 25)");var I={map:r,position:a,zIndex:g,title:f,content:w};return new google.maps.marker.AdvancedMarkerElement(I)}var R={position:a,zIndex:g,title:f,icon:{url:"data:image/svg+xml;base64,".concat(btoa(d)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(R)}}function Ib(n,e){for(var t in e.prototype)n.prototype[t]=e.prototype[t]}class Fp{constructor(){Ib(Fp,google.maps.OverlayView)}}var ul;(function(n){n.CLUSTERING_BEGIN="clusteringbegin",n.CLUSTERING_END="clusteringend",n.CLUSTER_CLICK="click"})(ul||(ul={}));var Tb=(n,e,t)=>{t.fitBounds(e.bounds)};class Cb extends Fp{constructor(e){var{map:t,markers:r=[],algorithmOptions:o={},algorithm:a=new Eb(o),renderer:u=new Sb,onClusterClick:d=Tb}=e;super(),this.markers=[...r],this.clusters=[],this.algorithm=a,this.renderer=u,this.onClusterClick=d,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(r=>{this.addMarker(r,!0)}),t||this.render()}removeMarker(e,t){var r=this.markers.indexOf(e);return r===-1?!1:(Ln.setMap(e,null),this.markers.splice(r,1),t||this.render(),!0)}removeMarkers(e,t){var r=!1;return e.forEach(o=>{r=this.removeMarker(o,!0)||r}),r&&!t&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,ul.CLUSTERING_BEGIN,this);var{clusters:t,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){var o=new Set;for(var a of t)a.markers.length==1&&o.add(a.markers[0]);var u=[];for(var d of this.clusters)d.marker!=null&&(d.markers.length==1?o.has(d.marker)||Ln.setMap(d.marker,null):u.push(d.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame(()=>u.forEach(f=>Ln.setMap(f,null)))}google.maps.event.trigger(this,ul.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>Ln.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new wb(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,t),r.markers.forEach(o=>Ln.setMap(o,null)),this.onClusterClick&&r.marker.addListener("click",o=>{google.maps.event.trigger(this,ul.CLUSTER_CLICK,r),this.onClusterClick(o,r,t)})),Ln.setMap(r.marker,t)})}}function n_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function r_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?n_(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):n_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Lb(n){var e=mx(),[t,r]=y.useState(null);return y.useEffect(()=>{if(e&&t===null){var o=new Cb(r_(r_({},n),{},{map:e}));r(o)}},[e]),t}function Pb(n){var{children:e,options:t}=n,r=Lb(t);return r!==null?e(r):null}y.memo(Pb);var i_={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},s_={options(n,e){n.setOptions(e)},position(n,e){n.setPosition(e)},zIndex(n,e){n.setZIndex(e)}};function kb(n){var{children:e,anchor:t,options:r,position:o,zIndex:a,onCloseClick:u,onDomReady:d,onContentChanged:f,onPositionChanged:g,onZindexChanged:_,onLoad:w,onUnmount:I}=n,R=y.useContext(je),[P,D]=y.useState(null),[M,q]=y.useState(null),[$,ee]=y.useState(null),[W,H]=y.useState(null),[Q,k]=y.useState(null),[L,T]=y.useState(null),x=y.useRef(null);return y.useEffect(()=>{P!==null&&(P.close(),t?P.open(R,t):P.getPosition()&&P.open(R))},[R,P,t]),y.useEffect(()=>{r&&P!==null&&P.setOptions(r)},[P,r]),y.useEffect(()=>{o&&P!==null&&P.setPosition(o)},[o]),y.useEffect(()=>{typeof a=="number"&&P!==null&&P.setZIndex(a)},[a]),y.useEffect(()=>{P&&u&&(M!==null&&google.maps.event.removeListener(M),q(google.maps.event.addListener(P,"closeclick",u)))},[u]),y.useEffect(()=>{P&&d&&($!==null&&google.maps.event.removeListener($),ee(google.maps.event.addListener(P,"domready",d)))},[d]),y.useEffect(()=>{P&&f&&(W!==null&&google.maps.event.removeListener(W),H(google.maps.event.addListener(P,"content_changed",f)))},[f]),y.useEffect(()=>{P&&g&&(Q!==null&&google.maps.event.removeListener(Q),k(google.maps.event.addListener(P,"position_changed",g)))},[g]),y.useEffect(()=>{P&&_&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener(P,"zindex_changed",_)))},[_]),y.useEffect(()=>{var O=new google.maps.InfoWindow(r);return D(O),x.current=document.createElement("div"),u&&q(google.maps.event.addListener(O,"closeclick",u)),d&&ee(google.maps.event.addListener(O,"domready",d)),f&&H(google.maps.event.addListener(O,"content_changed",f)),g&&k(google.maps.event.addListener(O,"position_changed",g)),_&&T(google.maps.event.addListener(O,"zindex_changed",_)),O.setContent(x.current),o&&O.setPosition(o),a&&O.setZIndex(a),t?O.open(R,t):O.getPosition()?O.open(R):kt(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),w&&w(O),()=>{M&&google.maps.event.removeListener(M),W&&google.maps.event.removeListener(W),$&&google.maps.event.removeListener($),Q&&google.maps.event.removeListener(Q),L&&google.maps.event.removeListener(L),I&&I(O),O.close()}},[]),x.current?ea.createPortal(y.Children.only(e),x.current):null}y.memo(kb);class Rb extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"containerElement",null),X(this,"state",{infoWindow:null}),X(this,"open",(e,t)=>{t?e.open(this.context,t):e.getPosition()?e.open(this.context):kt(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),X(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=Be({updaterMap:s_,eventMap:i_,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:s_,eventMap:i_,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(ze(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?ea.createPortal(y.Children.only(this.props.children),this.containerElement):null}}X(Rb,"contextType",je);function o_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Fc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?o_(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var a_={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},l_={draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},path(n,e){n.setPath(e)},visible(n,e){n.setVisible(e)}},Ab={};function xb(n){var{options:e,draggable:t,editable:r,visible:o,path:a,onDblClick:u,onDragEnd:d,onDragStart:f,onMouseDown:g,onMouseMove:_,onMouseOut:w,onMouseOver:I,onMouseUp:R,onRightClick:P,onClick:D,onDrag:M,onLoad:q,onUnmount:$}=n,ee=y.useContext(je),[W,H]=y.useState(null),[Q,k]=y.useState(null),[L,T]=y.useState(null),[x,O]=y.useState(null),[N,A]=y.useState(null),[_e,Ie]=y.useState(null),[Ae,Ce]=y.useState(null),[te,ce]=y.useState(null),[se,U]=y.useState(null),[J,ie]=y.useState(null),[pe,G]=y.useState(null),[Te,Le]=y.useState(null);return y.useEffect(()=>{W!==null&&W.setMap(ee)},[ee]),y.useEffect(()=>{typeof e<"u"&&W!==null&&W.setOptions(e)},[W,e]),y.useEffect(()=>{typeof t<"u"&&W!==null&&W.setDraggable(t)},[W,t]),y.useEffect(()=>{typeof r<"u"&&W!==null&&W.setEditable(r)},[W,r]),y.useEffect(()=>{typeof o<"u"&&W!==null&&W.setVisible(o)},[W,o]),y.useEffect(()=>{typeof a<"u"&&W!==null&&W.setPath(a)},[W,a]),y.useEffect(()=>{W&&u&&(Q!==null&&google.maps.event.removeListener(Q),k(google.maps.event.addListener(W,"dblclick",u)))},[u]),y.useEffect(()=>{W&&d&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener(W,"dragend",d)))},[d]),y.useEffect(()=>{W&&f&&(x!==null&&google.maps.event.removeListener(x),O(google.maps.event.addListener(W,"dragstart",f)))},[f]),y.useEffect(()=>{W&&g&&(N!==null&&google.maps.event.removeListener(N),A(google.maps.event.addListener(W,"mousedown",g)))},[g]),y.useEffect(()=>{W&&_&&(_e!==null&&google.maps.event.removeListener(_e),Ie(google.maps.event.addListener(W,"mousemove",_)))},[_]),y.useEffect(()=>{W&&w&&(Ae!==null&&google.maps.event.removeListener(Ae),Ce(google.maps.event.addListener(W,"mouseout",w)))},[w]),y.useEffect(()=>{W&&I&&(te!==null&&google.maps.event.removeListener(te),ce(google.maps.event.addListener(W,"mouseover",I)))},[I]),y.useEffect(()=>{W&&R&&(se!==null&&google.maps.event.removeListener(se),U(google.maps.event.addListener(W,"mouseup",R)))},[R]),y.useEffect(()=>{W&&P&&(J!==null&&google.maps.event.removeListener(J),ie(google.maps.event.addListener(W,"rightclick",P)))},[P]),y.useEffect(()=>{W&&D&&(pe!==null&&google.maps.event.removeListener(pe),G(google.maps.event.addListener(W,"click",D)))},[D]),y.useEffect(()=>{W&&M&&(Te!==null&&google.maps.event.removeListener(Te),Le(google.maps.event.addListener(W,"drag",M)))},[M]),y.useEffect(()=>{var de=new google.maps.Polyline(Fc(Fc({},e||Ab),{},{map:ee}));return a&&de.setPath(a),typeof o<"u"&&de.setVisible(o),typeof r<"u"&&de.setEditable(r),typeof t<"u"&&de.setDraggable(t),u&&k(google.maps.event.addListener(de,"dblclick",u)),d&&T(google.maps.event.addListener(de,"dragend",d)),f&&O(google.maps.event.addListener(de,"dragstart",f)),g&&A(google.maps.event.addListener(de,"mousedown",g)),_&&Ie(google.maps.event.addListener(de,"mousemove",_)),w&&Ce(google.maps.event.addListener(de,"mouseout",w)),I&&ce(google.maps.event.addListener(de,"mouseover",I)),R&&U(google.maps.event.addListener(de,"mouseup",R)),P&&ie(google.maps.event.addListener(de,"rightclick",P)),D&&G(google.maps.event.addListener(de,"click",D)),M&&Le(google.maps.event.addListener(de,"drag",M)),H(de),q&&q(de),()=>{Q!==null&&google.maps.event.removeListener(Q),L!==null&&google.maps.event.removeListener(L),x!==null&&google.maps.event.removeListener(x),N!==null&&google.maps.event.removeListener(N),_e!==null&&google.maps.event.removeListener(_e),Ae!==null&&google.maps.event.removeListener(Ae),te!==null&&google.maps.event.removeListener(te),se!==null&&google.maps.event.removeListener(se),J!==null&&google.maps.event.removeListener(J),pe!==null&&google.maps.event.removeListener(pe),$&&$(de),de.setMap(null)}},[]),null}y.memo(xb);class bb extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{polyline:null}),X(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(Fc(Fc({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:l_,eventMap:a_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:l_,eventMap:a_,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),ze(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}X(bb,"contextType",je);function u_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function c_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u_(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):u_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var h_={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},d_={draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},path(n,e){n.setPath(e)},paths(n,e){n.setPaths(e)},visible(n,e){n.setVisible(e)}};function Mb(n){var{options:e,draggable:t,editable:r,visible:o,path:a,paths:u,onDblClick:d,onDragEnd:f,onDragStart:g,onMouseDown:_,onMouseMove:w,onMouseOut:I,onMouseOver:R,onMouseUp:P,onRightClick:D,onClick:M,onDrag:q,onLoad:$,onUnmount:ee,onEdit:W}=n,H=y.useContext(je),[Q,k]=y.useState(null),[L,T]=y.useState(null),[x,O]=y.useState(null),[N,A]=y.useState(null),[_e,Ie]=y.useState(null),[Ae,Ce]=y.useState(null),[te,ce]=y.useState(null),[se,U]=y.useState(null),[J,ie]=y.useState(null),[pe,G]=y.useState(null),[Te,Le]=y.useState(null),[de,Me]=y.useState(null);return y.useEffect(()=>{Q!==null&&Q.setMap(H)},[H]),y.useEffect(()=>{typeof e<"u"&&Q!==null&&Q.setOptions(e)},[Q,e]),y.useEffect(()=>{typeof t<"u"&&Q!==null&&Q.setDraggable(t)},[Q,t]),y.useEffect(()=>{typeof r<"u"&&Q!==null&&Q.setEditable(r)},[Q,r]),y.useEffect(()=>{typeof o<"u"&&Q!==null&&Q.setVisible(o)},[Q,o]),y.useEffect(()=>{typeof a<"u"&&Q!==null&&Q.setPath(a)},[Q,a]),y.useEffect(()=>{typeof u<"u"&&Q!==null&&Q.setPaths(u)},[Q,u]),y.useEffect(()=>{Q&&typeof d=="function"&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener(Q,"dblclick",d)))},[d]),y.useEffect(()=>{Q&&(google.maps.event.addListener(Q.getPath(),"insert_at",()=>{W==null||W(Q)}),google.maps.event.addListener(Q.getPath(),"set_at",()=>{W==null||W(Q)}),google.maps.event.addListener(Q.getPath(),"remove_at",()=>{W==null||W(Q)}))},[Q,W]),y.useEffect(()=>{Q&&typeof f=="function"&&(x!==null&&google.maps.event.removeListener(x),O(google.maps.event.addListener(Q,"dragend",f)))},[f]),y.useEffect(()=>{Q&&typeof g=="function"&&(N!==null&&google.maps.event.removeListener(N),A(google.maps.event.addListener(Q,"dragstart",g)))},[g]),y.useEffect(()=>{Q&&typeof _=="function"&&(_e!==null&&google.maps.event.removeListener(_e),Ie(google.maps.event.addListener(Q,"mousedown",_)))},[_]),y.useEffect(()=>{Q&&typeof w=="function"&&(Ae!==null&&google.maps.event.removeListener(Ae),Ce(google.maps.event.addListener(Q,"mousemove",w)))},[w]),y.useEffect(()=>{Q&&typeof I=="function"&&(te!==null&&google.maps.event.removeListener(te),ce(google.maps.event.addListener(Q,"mouseout",I)))},[I]),y.useEffect(()=>{Q&&typeof R=="function"&&(se!==null&&google.maps.event.removeListener(se),U(google.maps.event.addListener(Q,"mouseover",R)))},[R]),y.useEffect(()=>{Q&&typeof P=="function"&&(J!==null&&google.maps.event.removeListener(J),ie(google.maps.event.addListener(Q,"mouseup",P)))},[P]),y.useEffect(()=>{Q&&typeof D=="function"&&(pe!==null&&google.maps.event.removeListener(pe),G(google.maps.event.addListener(Q,"rightclick",D)))},[D]),y.useEffect(()=>{Q&&typeof M=="function"&&(Te!==null&&google.maps.event.removeListener(Te),Le(google.maps.event.addListener(Q,"click",M)))},[M]),y.useEffect(()=>{Q&&typeof q=="function"&&(de!==null&&google.maps.event.removeListener(de),Me(google.maps.event.addListener(Q,"drag",q)))},[q]),y.useEffect(()=>{var me=new google.maps.Polygon(c_(c_({},e),{},{map:H}));return a&&me.setPath(a),u&&me.setPaths(u),typeof o<"u"&&me.setVisible(o),typeof r<"u"&&me.setEditable(r),typeof t<"u"&&me.setDraggable(t),d&&T(google.maps.event.addListener(me,"dblclick",d)),f&&O(google.maps.event.addListener(me,"dragend",f)),g&&A(google.maps.event.addListener(me,"dragstart",g)),_&&Ie(google.maps.event.addListener(me,"mousedown",_)),w&&Ce(google.maps.event.addListener(me,"mousemove",w)),I&&ce(google.maps.event.addListener(me,"mouseout",I)),R&&U(google.maps.event.addListener(me,"mouseover",R)),P&&ie(google.maps.event.addListener(me,"mouseup",P)),D&&G(google.maps.event.addListener(me,"rightclick",D)),M&&Le(google.maps.event.addListener(me,"click",M)),q&&Me(google.maps.event.addListener(me,"drag",q)),k(me),$&&$(me),()=>{L!==null&&google.maps.event.removeListener(L),x!==null&&google.maps.event.removeListener(x),N!==null&&google.maps.event.removeListener(N),_e!==null&&google.maps.event.removeListener(_e),Ae!==null&&google.maps.event.removeListener(Ae),te!==null&&google.maps.event.removeListener(te),se!==null&&google.maps.event.removeListener(se),J!==null&&google.maps.event.removeListener(J),pe!==null&&google.maps.event.removeListener(pe),Te!==null&&google.maps.event.removeListener(Te),ee&&ee(me),me.setMap(null)}},[]),null}y.memo(Mb);class Ob extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=Be({updaterMap:d_,eventMap:h_,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:d_,eventMap:h_,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),ze(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}X(Ob,"contextType",je);function f_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Bc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?f_(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var p_={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},g_={bounds(n,e){n.setBounds(e)},draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},visible(n,e){n.setVisible(e)}};function Db(n){var{options:e,bounds:t,draggable:r,editable:o,visible:a,onDblClick:u,onDragEnd:d,onDragStart:f,onMouseDown:g,onMouseMove:_,onMouseOut:w,onMouseOver:I,onMouseUp:R,onRightClick:P,onClick:D,onDrag:M,onBoundsChanged:q,onLoad:$,onUnmount:ee}=n,W=y.useContext(je),[H,Q]=y.useState(null),[k,L]=y.useState(null),[T,x]=y.useState(null),[O,N]=y.useState(null),[A,_e]=y.useState(null),[Ie,Ae]=y.useState(null),[Ce,te]=y.useState(null),[ce,se]=y.useState(null),[U,J]=y.useState(null),[ie,pe]=y.useState(null),[G,Te]=y.useState(null),[Le,de]=y.useState(null),[Me,me]=y.useState(null);return y.useEffect(()=>{H!==null&&H.setMap(W)},[W]),y.useEffect(()=>{typeof e<"u"&&H!==null&&H.setOptions(e)},[H,e]),y.useEffect(()=>{typeof r<"u"&&H!==null&&H.setDraggable(r)},[H,r]),y.useEffect(()=>{typeof o<"u"&&H!==null&&H.setEditable(o)},[H,o]),y.useEffect(()=>{typeof a<"u"&&H!==null&&H.setVisible(a)},[H,a]),y.useEffect(()=>{typeof t<"u"&&H!==null&&H.setBounds(t)},[H,t]),y.useEffect(()=>{H&&u&&(k!==null&&google.maps.event.removeListener(k),L(google.maps.event.addListener(H,"dblclick",u)))},[u]),y.useEffect(()=>{H&&d&&(T!==null&&google.maps.event.removeListener(T),x(google.maps.event.addListener(H,"dragend",d)))},[d]),y.useEffect(()=>{H&&f&&(O!==null&&google.maps.event.removeListener(O),N(google.maps.event.addListener(H,"dragstart",f)))},[f]),y.useEffect(()=>{H&&g&&(A!==null&&google.maps.event.removeListener(A),_e(google.maps.event.addListener(H,"mousedown",g)))},[g]),y.useEffect(()=>{H&&_&&(Ie!==null&&google.maps.event.removeListener(Ie),Ae(google.maps.event.addListener(H,"mousemove",_)))},[_]),y.useEffect(()=>{H&&w&&(Ce!==null&&google.maps.event.removeListener(Ce),te(google.maps.event.addListener(H,"mouseout",w)))},[w]),y.useEffect(()=>{H&&I&&(ce!==null&&google.maps.event.removeListener(ce),se(google.maps.event.addListener(H,"mouseover",I)))},[I]),y.useEffect(()=>{H&&R&&(U!==null&&google.maps.event.removeListener(U),J(google.maps.event.addListener(H,"mouseup",R)))},[R]),y.useEffect(()=>{H&&P&&(ie!==null&&google.maps.event.removeListener(ie),pe(google.maps.event.addListener(H,"rightclick",P)))},[P]),y.useEffect(()=>{H&&D&&(G!==null&&google.maps.event.removeListener(G),Te(google.maps.event.addListener(H,"click",D)))},[D]),y.useEffect(()=>{H&&M&&(Le!==null&&google.maps.event.removeListener(Le),de(google.maps.event.addListener(H,"drag",M)))},[M]),y.useEffect(()=>{H&&q&&(Me!==null&&google.maps.event.removeListener(Me),me(google.maps.event.addListener(H,"bounds_changed",q)))},[q]),y.useEffect(()=>{var Ue=new google.maps.Rectangle(Bc(Bc({},e),{},{map:W}));return typeof a<"u"&&Ue.setVisible(a),typeof o<"u"&&Ue.setEditable(o),typeof r<"u"&&Ue.setDraggable(r),typeof t<"u"&&Ue.setBounds(t),u&&L(google.maps.event.addListener(Ue,"dblclick",u)),d&&x(google.maps.event.addListener(Ue,"dragend",d)),f&&N(google.maps.event.addListener(Ue,"dragstart",f)),g&&_e(google.maps.event.addListener(Ue,"mousedown",g)),_&&Ae(google.maps.event.addListener(Ue,"mousemove",_)),w&&te(google.maps.event.addListener(Ue,"mouseout",w)),I&&se(google.maps.event.addListener(Ue,"mouseover",I)),R&&J(google.maps.event.addListener(Ue,"mouseup",R)),P&&pe(google.maps.event.addListener(Ue,"rightclick",P)),D&&Te(google.maps.event.addListener(Ue,"click",D)),M&&de(google.maps.event.addListener(Ue,"drag",M)),q&&me(google.maps.event.addListener(Ue,"bounds_changed",q)),Q(Ue),$&&$(Ue),()=>{k!==null&&google.maps.event.removeListener(k),T!==null&&google.maps.event.removeListener(T),O!==null&&google.maps.event.removeListener(O),A!==null&&google.maps.event.removeListener(A),Ie!==null&&google.maps.event.removeListener(Ie),Ce!==null&&google.maps.event.removeListener(Ce),ce!==null&&google.maps.event.removeListener(ce),U!==null&&google.maps.event.removeListener(U),ie!==null&&google.maps.event.removeListener(ie),G!==null&&google.maps.event.removeListener(G),Le!==null&&google.maps.event.removeListener(Le),Me!==null&&google.maps.event.removeListener(Me),ee&&ee(Ue),Ue.setMap(null)}},[]),null}y.memo(Db);class Nb extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{rectangle:null}),X(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(Bc(Bc({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:g_,eventMap:p_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:g_,eventMap:p_,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),ze(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}X(Nb,"contextType",je);function m_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function zc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?m_(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var v_={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},y_={center(n,e){n.setCenter(e)},draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},radius(n,e){n.setRadius(e)},visible(n,e){n.setVisible(e)}},Vb={};function Ub(n){var{options:e,center:t,radius:r,draggable:o,editable:a,visible:u,onDblClick:d,onDragEnd:f,onDragStart:g,onMouseDown:_,onMouseMove:w,onMouseOut:I,onMouseOver:R,onMouseUp:P,onRightClick:D,onClick:M,onDrag:q,onCenterChanged:$,onRadiusChanged:ee,onLoad:W,onUnmount:H}=n,Q=y.useContext(je),[k,L]=y.useState(null),[T,x]=y.useState(null),[O,N]=y.useState(null),[A,_e]=y.useState(null),[Ie,Ae]=y.useState(null),[Ce,te]=y.useState(null),[ce,se]=y.useState(null),[U,J]=y.useState(null),[ie,pe]=y.useState(null),[G,Te]=y.useState(null),[Le,de]=y.useState(null),[Me,me]=y.useState(null),[Ue,Rt]=y.useState(null),[At,mn]=y.useState(null);return y.useEffect(()=>{k!==null&&k.setMap(Q)},[Q]),y.useEffect(()=>{typeof e<"u"&&k!==null&&k.setOptions(e)},[k,e]),y.useEffect(()=>{typeof o<"u"&&k!==null&&k.setDraggable(o)},[k,o]),y.useEffect(()=>{typeof a<"u"&&k!==null&&k.setEditable(a)},[k,a]),y.useEffect(()=>{typeof u<"u"&&k!==null&&k.setVisible(u)},[k,u]),y.useEffect(()=>{typeof r=="number"&&k!==null&&k.setRadius(r)},[k,r]),y.useEffect(()=>{typeof t<"u"&&k!==null&&k.setCenter(t)},[k,t]),y.useEffect(()=>{k&&d&&(T!==null&&google.maps.event.removeListener(T),x(google.maps.event.addListener(k,"dblclick",d)))},[d]),y.useEffect(()=>{k&&f&&(O!==null&&google.maps.event.removeListener(O),N(google.maps.event.addListener(k,"dragend",f)))},[f]),y.useEffect(()=>{k&&g&&(A!==null&&google.maps.event.removeListener(A),_e(google.maps.event.addListener(k,"dragstart",g)))},[g]),y.useEffect(()=>{k&&_&&(Ie!==null&&google.maps.event.removeListener(Ie),Ae(google.maps.event.addListener(k,"mousedown",_)))},[_]),y.useEffect(()=>{k&&w&&(Ce!==null&&google.maps.event.removeListener(Ce),te(google.maps.event.addListener(k,"mousemove",w)))},[w]),y.useEffect(()=>{k&&I&&(ce!==null&&google.maps.event.removeListener(ce),se(google.maps.event.addListener(k,"mouseout",I)))},[I]),y.useEffect(()=>{k&&R&&(U!==null&&google.maps.event.removeListener(U),J(google.maps.event.addListener(k,"mouseover",R)))},[R]),y.useEffect(()=>{k&&P&&(ie!==null&&google.maps.event.removeListener(ie),pe(google.maps.event.addListener(k,"mouseup",P)))},[P]),y.useEffect(()=>{k&&D&&(G!==null&&google.maps.event.removeListener(G),Te(google.maps.event.addListener(k,"rightclick",D)))},[D]),y.useEffect(()=>{k&&M&&(Le!==null&&google.maps.event.removeListener(Le),de(google.maps.event.addListener(k,"click",M)))},[M]),y.useEffect(()=>{k&&q&&(Me!==null&&google.maps.event.removeListener(Me),me(google.maps.event.addListener(k,"drag",q)))},[q]),y.useEffect(()=>{k&&$&&(Ue!==null&&google.maps.event.removeListener(Ue),Rt(google.maps.event.addListener(k,"center_changed",$)))},[M]),y.useEffect(()=>{k&&ee&&(At!==null&&google.maps.event.removeListener(At),mn(google.maps.event.addListener(k,"radius_changed",ee)))},[ee]),y.useEffect(()=>{var He=new google.maps.Circle(zc(zc({},e||Vb),{},{map:Q}));return typeof r=="number"&&He.setRadius(r),typeof t<"u"&&He.setCenter(t),typeof r=="number"&&He.setRadius(r),typeof u<"u"&&He.setVisible(u),typeof a<"u"&&He.setEditable(a),typeof o<"u"&&He.setDraggable(o),d&&x(google.maps.event.addListener(He,"dblclick",d)),f&&N(google.maps.event.addListener(He,"dragend",f)),g&&_e(google.maps.event.addListener(He,"dragstart",g)),_&&Ae(google.maps.event.addListener(He,"mousedown",_)),w&&te(google.maps.event.addListener(He,"mousemove",w)),I&&se(google.maps.event.addListener(He,"mouseout",I)),R&&J(google.maps.event.addListener(He,"mouseover",R)),P&&pe(google.maps.event.addListener(He,"mouseup",P)),D&&Te(google.maps.event.addListener(He,"rightclick",D)),M&&de(google.maps.event.addListener(He,"click",M)),q&&me(google.maps.event.addListener(He,"drag",q)),$&&Rt(google.maps.event.addListener(He,"center_changed",$)),ee&&mn(google.maps.event.addListener(He,"radius_changed",ee)),L(He),W&&W(He),()=>{T!==null&&google.maps.event.removeListener(T),O!==null&&google.maps.event.removeListener(O),A!==null&&google.maps.event.removeListener(A),Ie!==null&&google.maps.event.removeListener(Ie),Ce!==null&&google.maps.event.removeListener(Ce),ce!==null&&google.maps.event.removeListener(ce),U!==null&&google.maps.event.removeListener(U),ie!==null&&google.maps.event.removeListener(ie),G!==null&&google.maps.event.removeListener(G),Le!==null&&google.maps.event.removeListener(Le),Ue!==null&&google.maps.event.removeListener(Ue),At!==null&&google.maps.event.removeListener(At),H&&H(He),He.setMap(null)}},[]),null}y.memo(Ub);class jb extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{circle:null}),X(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(zc(zc({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:y_,eventMap:v_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:y_,eventMap:v_,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),ze(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}X(jb,"contextType",je);function __(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function $c(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?__(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):__(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var E_={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},w_={add(n,e){n.add(e)},addgeojson(n,e,t){n.addGeoJson(e,t)},contains(n,e){n.contains(e)},foreach(n,e){n.forEach(e)},loadgeojson(n,e,t,r){n.loadGeoJson(e,t,r)},overridestyle(n,e,t){n.overrideStyle(e,t)},remove(n,e){n.remove(e)},revertstyle(n,e){n.revertStyle(e)},controlposition(n,e){n.setControlPosition(e)},controls(n,e){n.setControls(e)},drawingmode(n,e){n.setDrawingMode(e)},map(n,e){n.setMap(e)},style(n,e){n.setStyle(e)},togeojson(n,e){n.toGeoJson(e)}};function Fb(n){var{options:e,onClick:t,onDblClick:r,onMouseDown:o,onMouseMove:a,onMouseOut:u,onMouseOver:d,onMouseUp:f,onRightClick:g,onAddFeature:_,onRemoveFeature:w,onRemoveProperty:I,onSetGeometry:R,onSetProperty:P,onLoad:D,onUnmount:M}=n,q=y.useContext(je),[$,ee]=y.useState(null),[W,H]=y.useState(null),[Q,k]=y.useState(null),[L,T]=y.useState(null),[x,O]=y.useState(null),[N,A]=y.useState(null),[_e,Ie]=y.useState(null),[Ae,Ce]=y.useState(null),[te,ce]=y.useState(null),[se,U]=y.useState(null),[J,ie]=y.useState(null),[pe,G]=y.useState(null),[Te,Le]=y.useState(null),[de,Me]=y.useState(null);return y.useEffect(()=>{$!==null&&$.setMap(q)},[q]),y.useEffect(()=>{$&&r&&(W!==null&&google.maps.event.removeListener(W),H(google.maps.event.addListener($,"dblclick",r)))},[r]),y.useEffect(()=>{$&&o&&(Q!==null&&google.maps.event.removeListener(Q),k(google.maps.event.addListener($,"mousedown",o)))},[o]),y.useEffect(()=>{$&&a&&(L!==null&&google.maps.event.removeListener(L),T(google.maps.event.addListener($,"mousemove",a)))},[a]),y.useEffect(()=>{$&&u&&(x!==null&&google.maps.event.removeListener(x),O(google.maps.event.addListener($,"mouseout",u)))},[u]),y.useEffect(()=>{$&&d&&(N!==null&&google.maps.event.removeListener(N),A(google.maps.event.addListener($,"mouseover",d)))},[d]),y.useEffect(()=>{$&&f&&(_e!==null&&google.maps.event.removeListener(_e),Ie(google.maps.event.addListener($,"mouseup",f)))},[f]),y.useEffect(()=>{$&&g&&(Ae!==null&&google.maps.event.removeListener(Ae),Ce(google.maps.event.addListener($,"rightclick",g)))},[g]),y.useEffect(()=>{$&&t&&(te!==null&&google.maps.event.removeListener(te),ce(google.maps.event.addListener($,"click",t)))},[t]),y.useEffect(()=>{$&&_&&(se!==null&&google.maps.event.removeListener(se),U(google.maps.event.addListener($,"addfeature",_)))},[_]),y.useEffect(()=>{$&&w&&(J!==null&&google.maps.event.removeListener(J),ie(google.maps.event.addListener($,"removefeature",w)))},[w]),y.useEffect(()=>{$&&I&&(pe!==null&&google.maps.event.removeListener(pe),G(google.maps.event.addListener($,"removeproperty",I)))},[I]),y.useEffect(()=>{$&&R&&(Te!==null&&google.maps.event.removeListener(Te),Le(google.maps.event.addListener($,"setgeometry",R)))},[R]),y.useEffect(()=>{$&&P&&(de!==null&&google.maps.event.removeListener(de),Me(google.maps.event.addListener($,"setproperty",P)))},[P]),y.useEffect(()=>{if(q!==null){var me=new google.maps.Data($c($c({},e),{},{map:q}));r&&H(google.maps.event.addListener(me,"dblclick",r)),o&&k(google.maps.event.addListener(me,"mousedown",o)),a&&T(google.maps.event.addListener(me,"mousemove",a)),u&&O(google.maps.event.addListener(me,"mouseout",u)),d&&A(google.maps.event.addListener(me,"mouseover",d)),f&&Ie(google.maps.event.addListener(me,"mouseup",f)),g&&Ce(google.maps.event.addListener(me,"rightclick",g)),t&&ce(google.maps.event.addListener(me,"click",t)),_&&U(google.maps.event.addListener(me,"addfeature",_)),w&&ie(google.maps.event.addListener(me,"removefeature",w)),I&&G(google.maps.event.addListener(me,"removeproperty",I)),R&&Le(google.maps.event.addListener(me,"setgeometry",R)),P&&Me(google.maps.event.addListener(me,"setproperty",P)),ee(me),D&&D(me)}return()=>{$&&(W!==null&&google.maps.event.removeListener(W),Q!==null&&google.maps.event.removeListener(Q),L!==null&&google.maps.event.removeListener(L),x!==null&&google.maps.event.removeListener(x),N!==null&&google.maps.event.removeListener(N),_e!==null&&google.maps.event.removeListener(_e),Ae!==null&&google.maps.event.removeListener(Ae),te!==null&&google.maps.event.removeListener(te),se!==null&&google.maps.event.removeListener(se),J!==null&&google.maps.event.removeListener(J),pe!==null&&google.maps.event.removeListener(pe),Te!==null&&google.maps.event.removeListener(Te),de!==null&&google.maps.event.removeListener(de),M&&M($),$.setMap(null))}},[]),null}y.memo(Fb);class Bb extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{data:null}),X(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data($c($c({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:w_,eventMap:E_,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:w_,eventMap:E_,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),ze(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}X(Bb,"contextType",je);function S_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function I_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S_(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var T_={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},C_={options(n,e){n.setOptions(e)},url(n,e){n.setUrl(e)},zIndex(n,e){n.setZIndex(e)}};class zb extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{kmlLayer:null}),X(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(I_(I_({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:C_,eventMap:T_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:C_,eventMap:T_,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),ze(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}X(zb,"contextType",je);function bS(n,e){return typeof e=="function"?e(n.offsetWidth,n.offsetHeight):{x:0,y:0}}function $b(n,e){return new e(n.lat,n.lng)}function Wb(n,e){return new e(new google.maps.LatLng(n.ne.lat,n.ne.lng),new google.maps.LatLng(n.sw.lat,n.sw.lng))}function Hb(n,e,t){return n instanceof e?n:t(n,e)}function qb(n,e,t){return n instanceof e?n:t(n,e)}function Gb(n,e,t){var r=n&&n.fromLatLngToDivPixel(t.getNorthEast()),o=n&&n.fromLatLngToDivPixel(t.getSouthWest());return r&&o?{left:"".concat(o.x+e.x,"px"),top:"".concat(r.y+e.y,"px"),width:"".concat(r.x-o.x-e.x,"px"),height:"".concat(o.y-r.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function Kb(n,e,t){var r=n&&n.fromLatLngToDivPixel(t);if(r){var{x:o,y:a}=r;return{left:"".concat(o+e.x,"px"),top:"".concat(a+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function MS(n,e,t,r){return t!==void 0?Gb(n,e,qb(t,google.maps.LatLngBounds,Wb)):Kb(n,e,Hb(r,google.maps.LatLng,$b))}function Qb(n,e){return n.left===e.left&&n.top===e.top&&n.width===e.height&&n.height===e.height}function L_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Zb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L_(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Jb(n,e,t,r,o){class a extends google.maps.OverlayView{constructor(d,f,g,_){super(),this.container=d,this.pane=f,this.position=g,this.bounds=_}onAdd(){var d,f=(d=this.getPanes())===null||d===void 0?void 0:d[this.pane];f==null||f.appendChild(this.container)}draw(){var d=this.getProjection(),f=Zb({},this.container?bS(this.container,o):{x:0,y:0}),g=MS(d,f,this.bounds,this.position);for(var[_,w]of Object.entries(g))this.container.style[_]=w}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new a(n,e,t,r)}function P_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Yb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?P_(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):P_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function k_(n){if(!n)return"";var e=n instanceof google.maps.LatLng?n:new google.maps.LatLng(n.lat,n.lng);return e+""}function R_(n){if(!n)return"";var e=n instanceof google.maps.LatLngBounds?n:new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.east),new google.maps.LatLng(n.north,n.west));return e+""}function Xb(n){var{position:e,bounds:t,mapPaneName:r,zIndex:o,onLoad:a,onUnmount:u,getPixelPositionOffset:d,children:f}=n,g=y.useContext(je),_=y.useMemo(()=>{var I=document.createElement("div");return I.style.position="absolute",I},[]),w=y.useMemo(()=>Jb(_,r,e,t,d),[_,r,e,t]);return y.useEffect(()=>(a==null||a(w),w==null||w.setMap(g),()=>{u==null||u(w),w==null||w.setMap(null)}),[g,w]),y.useEffect(()=>{_.style.zIndex="".concat(o)},[o,_]),ea.createPortal(f,_)}y.memo(Xb);class da extends y.PureComponent{constructor(e){super(e),X(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),X(this,"updatePane",()=>{var r=this.props.mapPaneName,o=this.overlayView.getPanes();kt(!!r,"OverlayView requires props.mapPaneName but got %s",r),o?this.setState({paneEl:o[r]}):this.setState({paneEl:null})}),X(this,"onAdd",()=>{var r,o;this.updatePane(),(r=(o=this.props).onLoad)===null||r===void 0||r.call(o,this.overlayView)}),X(this,"onPositionElement",()=>{var r=this.overlayView.getProjection(),o=Yb({x:0,y:0},this.containerRef.current?bS(this.containerRef.current,this.props.getPixelPositionOffset):{}),a=MS(r,o,this.props.bounds,this.props.position);if(!Qb(a,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var u,d,f,g;this.setState({containerStyle:{top:(u=a.top)!==null&&u!==void 0?u:0,left:(d=a.left)!==null&&d!==void 0?d:0,width:(f=a.width)!==null&&f!==void 0?f:0,height:(g=a.height)!==null&&g!==void 0?g:0,position:"absolute"}})}}),X(this,"draw",()=>{this.onPositionElement()}),X(this,"onRemove",()=>{var r,o;this.setState(()=>({paneEl:null})),(r=(o=this.props).onUnmount)===null||r===void 0||r.call(o,this.overlayView)}),this.containerRef=y.createRef();var t=new google.maps.OverlayView;t.onAdd=this.onAdd,t.draw=this.draw,t.onRemove=this.onRemove,this.overlayView=t}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var t=k_(e.position),r=k_(this.props.position),o=R_(e.bounds),a=R_(this.props.bounds);(t!==r||o!==a)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?ea.createPortal(Z.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:y.Children.only(this.props.children)}),e):null}}X(da,"FLOAT_PANE","floatPane");X(da,"MAP_PANE","mapPane");X(da,"MARKER_LAYER","markerLayer");X(da,"OVERLAY_LAYER","overlayLayer");X(da,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");X(da,"contextType",je);function e1(){}function A_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function x_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?A_(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):A_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var b_={onDblClick:"dblclick",onClick:"click"},M_={opacity(n,e){n.setOpacity(e)}};function t1(n){var{url:e,bounds:t,options:r,visible:o}=n,a=y.useContext(je),u=new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.west),new google.maps.LatLng(t.north,t.east)),d=y.useMemo(()=>new google.maps.GroundOverlay(e,u,r),[]);return y.useEffect(()=>{d!==null&&d.setMap(a)},[a]),y.useEffect(()=>{typeof e<"u"&&d!==null&&(d.set("url",e),d.setMap(a))},[d,e]),y.useEffect(()=>{typeof o<"u"&&d!==null&&d.setOpacity(o?1:0)},[d,o]),y.useEffect(()=>{var f=new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.west),new google.maps.LatLng(t.north,t.east));typeof t<"u"&&d!==null&&(d.set("bounds",f),d.setMap(a))},[d,t]),null}y.memo(t1);class OS extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{groundOverlay:null}),X(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){kt(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,x_(x_({},this.props.options),{},{map:this.context}));this.registeredEvents=Be({updaterMap:M_,eventMap:b_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:M_,eventMap:b_,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}X(OS,"defaultProps",{onLoad:e1});X(OS,"contextType",je);function O_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Wc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O_(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var D_={},N_={data(n,e){n.setData(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)}};function n1(n){var{data:e,onLoad:t,onUnmount:r,options:o}=n,a=y.useContext(je),[u,d]=y.useState(null);return y.useEffect(()=>{google.maps.visualization||kt(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),y.useEffect(()=>{kt(!!e,"data property is required in HeatmapLayer %s",e)},[e]),y.useEffect(()=>{u!==null&&u.setMap(a)},[a]),y.useEffect(()=>{o&&u!==null&&u.setOptions(o)},[u,o]),y.useEffect(()=>{var f=new google.maps.visualization.HeatmapLayer(Wc(Wc({},o),{},{data:e,map:a}));return d(f),t&&t(f),()=>{u!==null&&(r&&r(u),u.setMap(null))}},[]),null}y.memo(n1);class r1 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{heatmapLayer:null}),X(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){kt(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),kt(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Wc(Wc({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=Be({updaterMap:N_,eventMap:D_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:N_,eventMap:D_,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),ze(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}X(r1,"contextType",je);var V_={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},U_={register(n,e,t){n.registerPanoProvider(e,t)},links(n,e){n.setLinks(e)},motionTracking(n,e){n.setMotionTracking(e)},options(n,e){n.setOptions(e)},pano(n,e){n.setPano(e)},position(n,e){n.setPosition(e)},pov(n,e){n.setPov(e)},visible(n,e){n.setVisible(e)},zoom(n,e){n.setZoom(e)}};class i1 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{streetViewPanorama:null}),X(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,t,r=(e=(t=this.context)===null||t===void 0?void 0:t.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=Be({updaterMap:U_,eventMap:V_,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({streetViewPanorama:r}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:U_,eventMap:V_,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),ze(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}X(i1,"contextType",je);class s1 extends y.PureComponent{constructor(){super(...arguments),X(this,"state",{streetViewService:null}),X(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}X(s1,"contextType",je);var j_={onDirectionsChanged:"directions_changed"},F_={directions(n,e){n.setDirections(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},panel(n,e){n.setPanel(e)},routeIndex(n,e){n.setRouteIndex(e)}};class o1 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"state",{directionsRenderer:null}),X(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Be({updaterMap:F_,eventMap:j_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:F_,eventMap:j_,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),ze(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}X(o1,"contextType",je);var B_={onPlacesChanged:"places_changed"},z_={bounds(n,e){n.setBounds(e)}};class a1 extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"containerElement",y.createRef()),X(this,"state",{searchBox:null}),X(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(kt(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=Be({updaterMap:z_,eventMap:B_,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{searchBox:t}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:z_,eventMap:B_,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),ze(this.registeredEvents))}render(){return Z.jsx("div",{ref:this.containerElement,children:y.Children.only(this.props.children)})}}X(a1,"contextType",je);var $_={onPlaceChanged:"place_changed"},W_={bounds(n,e){n.setBounds(e)},restrictions(n,e){n.setComponentRestrictions(e)},fields(n,e){n.setFields(e)},options(n,e){n.setOptions(e)},types(n,e){n.setTypes(e)}};class DS extends y.PureComponent{constructor(){super(...arguments),X(this,"registeredEvents",[]),X(this,"containerElement",y.createRef()),X(this,"state",{autocomplete:null}),X(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;kt(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(t){var r=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=Be({updaterMap:W_,eventMap:$_,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({autocomplete:r}),this.setAutocompleteCallback)}}componentDidUpdate(e){ze(this.registeredEvents),this.registeredEvents=Be({updaterMap:W_,eventMap:$_,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&ze(this.registeredEvents)}render(){return Z.jsx("div",{ref:this.containerElement,className:this.props.className,children:y.Children.only(this.props.children)})}}X(DS,"defaultProps",{className:""});X(DS,"contextType",je);const l1="AIzaSyA6CI9bIGzcpHhEvis6zC26ciBgTRdaxrg",u1={width:"100%",height:"400px"},c1="https://via.placeholder.com/800x500?text=Image+Non+Disponible",h1=[{id:1,title:"Appartement cosy à Paris",image:"https://images.unsplash.com/photo-1604014237744-6d293cf5e213",price:120,location:"Paris, France",description:"Un charmant appartement lumineux au cœur de Paris, proche des attractions principales.",lat:48.8566,lng:2.3522},{id:2,title:"Villa avec piscine à Nice",image:"https://images.unsplash.com/photo-1600585154340-be6161a56a0c",price:250,location:"Nice, France",description:"Une villa luxueuse avec piscine et vue panoramique sur la mer Méditerranée.",lat:43.7034,lng:7.2663},{id:3,title:"Chalet en montagne à Chamonix",image:"https://images.unsplash.com/photo-1582719478250-c89cae4dc85b",price:180,location:"Chamonix, France",description:"Un chalet rustique avec une cheminée et une vue imprenable sur le Mont Blanc.",lat:45.9237,lng:6.8694},{id:4,title:"Loft moderne à Lyon",image:"https://images.unsplash.com/photo-1574179271627-25b661aa0e40",price:140,location:"Lyon, France",description:"Un loft spacieux et design, situé dans un quartier dynamique de Lyon.",lat:45.764,lng:4.8357},{id:5,title:"Maison de campagne en Provence",image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6",price:200,location:"Provence, France",description:"Une maison chaleureuse entourée de lavande et d'oliviers, idéale pour se détendre.",lat:43.9471,lng:5.7711},{id:6,title:"Appartement avec terrasse à Bordeaux",image:"https://images.unsplash.com/photo-1600585152916-46d8f8b5e146",price:160,location:"Bordeaux, France",description:"Un appartement élégant avec une grande terrasse et vue sur la Garonne.",lat:44.8378,lng:-.5792},{id:7,title:"Penthouse à Marseille",image:"https://images.unsplash.com/photo-1572072393749-3ca9c8ea0831",price:300,location:"Marseille, France",description:"Un penthouse ultra-moderne avec jacuzzi et vue à 360° sur la ville et la mer.",lat:43.2965,lng:5.3698},{id:8,title:"Studio économique à Toulouse",image:"https://images.unsplash.com/photo-1598300183298-42ee84cc25e6",price:90,location:"Toulouse, France",description:"Un studio confortable et bien équipé, parfait pour les courts séjours.",lat:43.6045,lng:1.4442}],d1=()=>{const{id:n}=X_(),e=h1.find(D=>D.id===Number(n)),[t]=ha(Vr),[r,o]=y.useState(null),[a,u]=y.useState(null),[d,f]=y.useState([]),[g,_]=y.useState(5),[w,I]=y.useState(""),{isLoaded:R}=Dx({googleMapsApiKey:l1,libraries:["places","marker"]});y.useEffect(()=>{(async()=>{if(!n)return;const M=yl(ui,"listings",n,"reviews"),$=(await Tp(M)).docs.map(ee=>ee.data());f($)})()},[n]);const P=async D=>{if(D.preventDefault(),!(!t||!n||w.trim()===""))try{await Uw(yl(ui,"listings",n,"reviews"),{userId:t.uid,rating:g,comment:w,createdAt:new Date().toISOString()}),f([...d,{rating:g,comment:w}]),I(""),alert("Avis ajouté avec succès !")}catch(M){console.error("Erreur lors de l'ajout de l'avis :",M)}};return Z.jsxs("div",{className:"container mx-auto mt-10 p-6",children:[Z.jsx("h1",{className:"text-3xl font-bold",children:e==null?void 0:e.title}),Z.jsx("p",{className:"text-gray-600",children:e==null?void 0:e.location}),Z.jsx("img",{src:e==null?void 0:e.image,alt:e==null?void 0:e.title,className:"w-full h-96 object-cover rounded-lg mt-4",onError:D=>D.currentTarget.src=c1}),Z.jsxs("div",{className:"mt-6",children:[Z.jsx("h2",{className:"text-xl font-bold",children:"Localisation"}),R&&e?Z.jsx(Ix,{mapContainerStyle:u1,center:{lat:e.lat,lng:e.lng},zoom:14,children:Z.jsx(Hx,{position:{lat:e.lat,lng:e.lng}})}):Z.jsx("p",{children:"Chargement de la carte..."})]}),Z.jsxs("div",{className:"mt-6",children:[Z.jsx("h2",{className:"text-xl font-bold",children:"Avis des utilisateurs"}),d.length>0?d.map((D,M)=>Z.jsxs("div",{className:"mt-2 p-4 border rounded bg-gray-100",children:[Z.jsx("p",{className:"text-yellow-500",children:"⭐".repeat(D.rating)}),Z.jsx("p",{className:"text-gray-800",children:D.comment})]},M)):Z.jsx("p",{className:"text-gray-500",children:"Aucun avis pour ce logement."})]}),t&&Z.jsxs("div",{className:"mt-8 p-6 bg-gray-100 rounded-lg shadow-md",children:[Z.jsx("h2",{className:"text-lg font-bold mb-4",children:"Laisser un avis"}),Z.jsxs("form",{onSubmit:P,children:[Z.jsx("label",{className:"block text-gray-700",children:"Note :"}),Z.jsx("select",{value:g,onChange:D=>_(Number(D.target.value)),className:"w-full p-2 border rounded",children:[5,4,3,2,1].map(D=>Z.jsxs("option",{value:D,children:[D," ⭐"]},D))}),Z.jsx("label",{className:"block text-gray-700 mt-4",children:"Commentaire :"}),Z.jsx("textarea",{value:w,onChange:D=>I(D.target.value),className:"w-full p-2 border rounded"}),Z.jsx("button",{type:"submit",className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded-lg",children:"Soumettre"})]})]})]})},f1=()=>{const[n,e]=y.useState(""),[t,r]=y.useState(""),o=Cl(),a=async d=>{d.preventDefault();try{await $R(Vr,n,t),alert("Connexion réussie !"),o("/")}catch{alert("Erreur lors de la connexion")}},u=async()=>{try{await dA(Vr,ox),alert("Connexion réussie avec Google !"),o("/")}catch{alert("Erreur lors de la connexion avec Google")}};return Z.jsxs("div",{className:"container mx-auto mt-10 p-6",children:[Z.jsx("h2",{className:"text-3xl font-bold text-center",children:"Connexion"}),Z.jsxs("div",{className:"max-w-md mx-auto bg-white p-6 rounded shadow-md mt-6",children:[Z.jsxs("form",{onSubmit:a,children:[Z.jsx("input",{type:"email",placeholder:"Email",className:"w-full p-2 border rounded-md mb-4",value:n,onChange:d=>e(d.target.value)}),Z.jsx("input",{type:"password",placeholder:"Mot de passe",className:"w-full p-2 border rounded-md mb-4",value:t,onChange:d=>r(d.target.value)}),Z.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white p-2 rounded-md",children:"Connexion"})]}),Z.jsx("button",{onClick:u,className:"w-full bg-red-500 text-white p-2 rounded-md mt-2",children:"Connexion avec Google"})]})]})},p1=()=>{const[n,e]=y.useState(null);y.useEffect(()=>{const r=aS(Vr,o=>{e(o)});return()=>r()},[]);const t=async()=>{await qR(Vr),e(null)};return Z.jsxs("nav",{className:"glass fixed top-0 w-full flex justify-between px-10 py-4 z-10",children:[Z.jsx("h1",{className:"text-xl font-bold text-white",children:"🏡 Airbnb Clone"}),Z.jsxs("ul",{className:"flex space-x-6 text-white",children:[Z.jsx("li",{children:Z.jsx(Vo,{to:"/",className:"hover:text-gray-200 transition",children:"Accueil"})}),n?Z.jsxs(Z.Fragment,{children:[Z.jsx("li",{children:Z.jsx(Vo,{to:"/create-listing",className:"hover:text-gray-300",children:"📌 Créer une annonce"})}),Z.jsx("li",{children:Z.jsx(Vo,{to:"/favorites",className:"hover:text-blue-500",children:"❤️ Favoris"})}),Z.jsxs("li",{className:"text-white",children:["Bienvenue, ",n.displayName||"Utilisateur"]}),Z.jsx("li",{children:Z.jsx("button",{onClick:t,className:"bg-red-500 text-white px-4 py-1 rounded hover:bg-red-600 transition",children:"Déconnexion"})})]}):Z.jsx("li",{children:Z.jsx(Vo,{to:"/login",className:"hover:text-gray-200 transition",children:"Se connecter"})})]})]})},H_=({children:n})=>{const[e,t]=ha(Vr);return t?Z.jsx("p",{className:"text-center mt-10",children:"Chargement..."}):e?Z.jsx(Z.Fragment,{children:n}):Z.jsx(FT,{to:"/login"})},g1=()=>{const[n]=ha(Vr),[e,t]=y.useState([]);y.useEffect(()=>{if(!n)return;(async()=>{const a=Dk(yl(ui,"reservations"),Nk("userId","==",n.uid)),d=(await Tp(a)).docs.map(f=>({id:f.id,...f.data()}));t(d)})()},[n]);const r=async o=>{if(window.confirm("Voulez-vous vraiment annuler cette réservation ?"))try{await Vw(_l(ui,"reservations",o)),t(a=>a.filter(u=>u.id!==o)),alert("Réservation annulée !")}catch(a){console.error("Erreur lors de l'annulation :",a),alert("Erreur lors de l'annulation !")}};return n?Z.jsxs("div",{className:"container mx-auto mt-10 p-6",children:[Z.jsx("h1",{className:"text-3xl font-bold text-center",children:"Mes Réservations"}),Z.jsx("div",{className:"mt-6",children:e.length>0?e.map(o=>Z.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg shadow-md mb-4",children:[Z.jsx("h2",{className:"text-lg font-semibold",children:o.title}),Z.jsx("p",{className:"text-gray-600",children:o.location}),Z.jsxs("p",{className:"text-gray-900 font-bold",children:[o.price,"€ / nuit"]}),Z.jsxs("p",{className:"text-gray-700 mt-2",children:["Du ",new Date(o.startDate).toLocaleDateString()," au ",new Date(o.endDate).toLocaleDateString()]}),Z.jsx("button",{onClick:()=>r(o.id),className:"mt-4 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600",children:"Annuler la réservation"})]},o.id)):Z.jsx("p",{className:"text-gray-600",children:"Aucune réservation."})})]}):Z.jsx("p",{className:"text-center mt-10",children:"Veuillez vous connecter pour voir vos réservations."})},m1=[{id:1,title:"Appartement cosy à Paris",image:"https://source.unsplash.com/400x300/?apartment",price:120,location:"Paris, France"},{id:2,title:"Villa avec piscine à Nice",image:"https://source.unsplash.com/400x300/?villa",price:250,location:"Nice, France"},{id:3,title:"Chalet en montagne",image:"https://source.unsplash.com/400x300/?chalet",price:180,location:"Chamonix, France"}],v1=()=>{const[n,e]=y.useState([]);return y.useEffect(()=>{const t=JSON.parse(localStorage.getItem("favorites")||"[]");e(t)},[]),Z.jsxs("div",{className:"container mx-auto mt-10 p-6",children:[Z.jsx("h1",{className:"text-3xl font-bold text-center",children:"❤️ Mes Favoris"}),n.length>0?Z.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mt-8",children:m1.filter(t=>n.includes(t.id)).map(t=>Z.jsx(wS,{...t},t.id))}):Z.jsx("p",{className:"text-center text-gray-500 mt-6",children:"Aucun logement en favoris."})]})},y1=()=>{const[n]=ha(Vr),e=Cl(),[t,r]=y.useState({title:"",image:"",location:"",price:"",description:""}),o=u=>{r({...t,[u.target.name]:u.target.value})},a=async u=>{if(u.preventDefault(),!n){alert("Vous devez être connecté pour créer une annonce !");return}if(!t.title||!t.image||!t.location||!t.price||!t.description){alert("Veuillez remplir tous les champs !");return}try{await Uw(yl(ui,"listings"),{...t,price:Number(t.price),userId:n.uid,createdAt:new Date().toISOString()}),alert("Annonce créée avec succès !"),e("/")}catch(d){console.error("Erreur lors de la création :",d),alert("Erreur lors de la création !")}};return Z.jsxs("div",{className:"container mx-auto mt-10 p-6 max-w-lg bg-white shadow-lg rounded-lg",children:[Z.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Créer une annonce"}),Z.jsxs("form",{onSubmit:a,className:"space-y-4",children:[Z.jsx("input",{type:"text",name:"title",placeholder:"Titre",value:t.title,onChange:o,className:"w-full p-2 border rounded-md"}),Z.jsx("input",{type:"text",name:"image",placeholder:"URL de l'image",value:t.image,onChange:o,className:"w-full p-2 border rounded-md"}),Z.jsx("input",{type:"text",name:"location",placeholder:"Localisation",value:t.location,onChange:o,className:"w-full p-2 border rounded-md"}),Z.jsx("input",{type:"number",name:"price",placeholder:"Prix par nuit (€)",value:t.price,onChange:o,className:"w-full p-2 border rounded-md"}),Z.jsx("textarea",{name:"description",placeholder:"Description",value:t.description,onChange:o,className:"w-full p-2 border rounded-md",rows:4}),Z.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600",children:"Créer l'annonce"})]})]})},_1=()=>{const{id:n}=X_(),e=Cl(),[t]=ha(Vr),[r,o]=y.useState(""),[a,u]=y.useState(""),[d,f]=y.useState(""),[g,_]=y.useState(""),[w,I]=y.useState("");y.useEffect(()=>{(async()=>{if(!n)return;const D=_l(ui,"listings",n),M=await Bk(D);if(M.exists()){const q=M.data();o(q.title),u(q.location),f(q.price),_(q.description),I(q.image)}else console.error("Annonce non trouvée !"),e("/")})()},[n,e]);const R=async P=>{if(P.preventDefault(),!(!n||!t))try{await zk(_l(ui,"listings",n),{title:r,location:a,price:Number(d),description:g,image:w}),alert("Annonce mise à jour avec succès !"),e("/")}catch(D){console.error("Erreur lors de la mise à jour :",D),alert("Erreur lors de la mise à jour !")}};return Z.jsxs("div",{className:"container mx-auto mt-10 p-6",children:[Z.jsx("h1",{className:"text-3xl font-bold text-center",children:"Modifier l'annonce"}),Z.jsxs("form",{onSubmit:R,className:"max-w-md mx-auto mt-6 space-y-4",children:[Z.jsx("input",{type:"text",placeholder:"Titre",value:r,onChange:P=>o(P.target.value),className:"p-2 border rounded-md w-full"}),Z.jsx("input",{type:"text",placeholder:"Lieu",value:a,onChange:P=>u(P.target.value),className:"p-2 border rounded-md w-full"}),Z.jsx("input",{type:"number",placeholder:"Prix",value:d,onChange:P=>f(P.target.value),className:"p-2 border rounded-md w-full"}),Z.jsx("textarea",{placeholder:"Description",value:g,onChange:P=>_(P.target.value),className:"p-2 border rounded-md w-full"}),Z.jsx("input",{type:"text",placeholder:"Image URL",value:w,onChange:P=>I(P.target.value),className:"p-2 border rounded-md w-full"}),Z.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-lg w-full hover:bg-blue-600",children:"Mettre à jour"})]})]})};function E1(){return Z.jsxs(QT,{children:[Z.jsx(p1,{}),Z.jsxs(zT,{children:[Z.jsx(Bi,{path:"/",element:Z.jsx(hx,{})}),Z.jsx(Bi,{path:"/login",element:Z.jsx(f1,{})}),Z.jsx(Bi,{path:"/listing/:id",element:Z.jsx(H_,{children:Z.jsx(d1,{})})}),Z.jsx(Bi,{path:"/my-reservations",element:Z.jsx(H_,{children:Z.jsx(g1,{})})}),Z.jsx(Bi,{path:"/favorites",element:Z.jsx(v1,{})}),Z.jsx(Bi,{path:"/create-listing",element:Z.jsx(y1,{})}),Z.jsx(Bi,{path:"/edit-listing/:id",element:Z.jsx(_1,{})})]})]})}ZI.createRoot(document.getElementById("root")).render(Z.jsx(y.StrictMode,{children:Z.jsx(E1,{})}));
